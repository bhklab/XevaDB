{"version":3,"sources":["Components/CounterNav/CounterStyle.js","GlobalStyles.js","Components/TopNav/NavStyle.js","Components/TopNav/TopNav.js","Components/CounterNav/CounterNav.js","Components/Context/PatientContext.js","Components/HeatMap/HeatMap.js","Components/HeatMap/HeatMapData.js","util/MutationViewsUtil.js","Components/Oncoprint/Oncoprint.js","Components/SpinnerUtil/Spinner.js","Components/Oncoprint/OncoprintData.js","Components/Footer/Footer.js","Components/Dataset/Dataset.js","Components/DonutChart/DonutChart.js","Components/Drug/DrugTableStyle.js","Components/Dataset/DatasetTable.js","Components/Dataset/DatasetDonut.js","Components/Documentation/Documentation.js","Components/Drug/DrugTable.js","Components/Drug/DonutDrug.js","Components/DonutChart/DonutPatient.js","Components/Tissue/DonutTissue.js","Components/ResponseStat/ModelResponseStyle.js","Components/ResponseStat/BatchResponseStatTable.js","Components/ResponseStat/ModelResponseStatTable.js","Components/TumorGrowthCurve/TumorGrowthCurve.js","Components/TumorGrowthCurve/GrowthCurveData.js","Components/Search/SearchStyle.js","util/GeneList.js","Components/Search/Search.js","Components/Home/HomeStyle.js","Components/Home/Home.js","Components/Login/LoginStyle.js","Components/Login/Login.js","Components/Search/SearchResultHeatMap.js","Components/Search/SearchResultOncoprint.js","Components/Search/SearchResult.js","App.js","index.js","images/logo.png","images/bgImg7.png","images/pclogo_220.gif"],"names":["DonutNav","styled","div","GlobalStyles","createGlobalStyle","bgImg","HeaderStyle","header","LinkStyle","LogoStyle","img","TopNav","props","state","isLogged","isLink","isLoggedIn","bind","this","localStorage","removeItem","setState","to","src","logo","alt","Button","type","fullWidth","variant","color","onClick","getItem","React","Component","CounterNav","drugs","patients","datasets","tissues","models","axios","get","headers","Authorization","then","response","data","start","end","duration","useEasing","PatientContext","createContext","globalPatients","setPatients","PatientProvider","Provider","PatientConsumer","Consumer","HeatMap","modifiedPatients","makeHeatmap","rankHeatMap","rankHeatMapBasedOnOncoprintChanges","node","drugId","patientId","dimensions","margin","className","dataset","patient","drug","plotId","rectHeight","height","rectWidth","width","length","targetEval","CR","PR","SD","PD","targetColor","empty","NA","tooltip","d3","append","attr","style","drugUse","drugIndex","patientUse","maxDrug","drugEvaluations","i","patientEvaluations","j","total","calculateEvaluations","d","drugAlt","keys","Object","entries","currentMaxDrug","forEach","key","querystringValue","yScale","domain","rangeRound","xScale","yAxis","scale","tickSize","tickPadding","xAxis","svg","bottom","top","left","right","val","replace","skeleton","gskeleton","selectAll","enter","map","value","pCount","drugClass","on","patientToolTip","x","y","tooltipDiv","tooltipData","html","split","createToolTip","pageX","pageY","remove","lines","temp","slice","push","call","text","targetRect","values","drugEval","drugScale","range","xAxisVertical","ticks","tickFormat","drugHeightScale","drugEvaluationRectangle","iterator","xRange","maxPatientidTotal","curentMax","patientEval","patientScale","patientScales","patientEvaluationRectangle","yRange","newSortedPatients","res","newDataset","context","ref","contextType","HeatMapData","datasetParam","parseData","result","pop","element","dataObject","Drug","mutationStyleMap","missense","label","longName","mainType","priority","inframe","truncating","nonsense","nonstop","nonstart","frameshift","frame_shift_del","frame_shift_ins","in_frame_ins","in_frame_del","splice_site","fusion","silent","default","other","mutationTypeMap","missense_mutation","mutation","missense_variant","frameshift_deletion","frameshift_insertion","de_novo_start_outofframe","frameshift_variant","nonsense_mutation","stopgain_snv","stop_gained","splice","splicing","splice_site_snp","splice_site_del","splice_site_indel","splice_region_variant","translation_start_site","initiator_codon_variant","start_codon_snp","start_codon_del","nonstop_mutation","stop_lost","in_frame_deletion","in_frame_insertion","indel","nonframeshift_deletion","nonframeshift","nonframeshift_insertion","targeted_region","feature_truncation","synonymous_variant","any","cnaMap","xevalabel","0","1","2","deletion","gain","amp","amplification","unknown","rnaMap","positive","negative","Oncoprint","rankOncoprintBasedOnHeatMapChanges","rankOncoprint","hmap_patients","threshold","data_mut","data_rna","data_cnv","genes_mut","genes_rna","genes_cnv","patient_mut","patient_rna","patient_cnv","makeOncoprint","isAlteration","Array","prototype","unique","a","concat","genes","aberration","rect_height","rect_width","rect_alterations_mut","rect_alterations_rna","rect_alterations_cnv","rect_alterations","geneNames","geneAxis","alterations","highlight","gene_alterations","patient_alterations","del","colorReactangles","mutationType","rect","colorNotSequenced","includes","cnvType","toLowerCase","z","Number","max_width_arr","max","max_width","xrange_gene","gene_alter","geneAlterationReactangle","x_range","stroke_width","aberration_type","xrange_scale","x_axis","select","max_height_arr","max_height","patient_alter","yrange_patient","patientAlterationReactangle","y_range","yrange_axis","nice","y_axis","each","target_rect","mutationToolTip","undefined","cnvToolTip","gene","cnv","newData","createNewData","retunType","row","gene_id","isNaN","isNegative","isNegativeCheck","sortableArray","sortedPatients","sort","b","filter","override","css","SpinnerUtil","loading","sizeUnit","size","OncoprintData","updateResults","mutation_data","rnaseq_data","cnv_data","Promise","all","onco","substring","patient_id","return_value","Spinner","styles","fontSize","textAlign","paddingTop","minHeight","display","flexDirection","position","minWidth","backgroundColor","fontFamily","Footer","Dataset","providerData","match","params","id","DonutChart","makeDonutChart","chartId","arcRadius","arc","outerRadius","innerRadius","labelArc","pie","arcs","parameter","piearc","transition","ease","attrTween","startAngle","endAngle","t","mouseover","selection","mousemove","mouseout","centroid","donutRect","charAt","toUpperCase","TableWrapper","h1Style","DatasetTable","dataLength","columns","Header","accessor","search","sortable","Cell","original","textDecoration","showPagination","pageSize","Wrapper","DatasetDonut","dataset_name","dataset_id","totalModels","Documentation","DrugTable","pubchem","capitalize","s","pubchemLink","source","link","isNa","target","rel","href","defaultPageSize","filterable","DonutDrug","newValues","class_name","model_ids","DonutTissue","tissue_name","StyleTable","BatchStatTable","tableHeader","createTable","createTableHeader","batchId","eachdata","batch_id","batch","response_type","index","angle","TGI","abc","marginTop","padding","StatTable","batchData","drugParam","patientParam","getModelResponse","getBatchResponse","drugValue","modelValue","drug_name","model","bar","mRECIST","slope","AUC","survival","checkData","createTableRow","TumorGrowthCurve","makeTumorGrowthCurve","tumorGrowthCurve","first","plotBatch","graph","xrange","yrange","norm","dots","pdx_json","paths","replaceAll","exp_type","time","volume_normal","volume","linepath","createLine","stroke","opacity","tableSelect","tcolor","tback","acolor","aback","classed","console","log","ab","nodes","minmax","maxTimeArray","minVolArray","maxVolArray","maxVolNormArray","minVolNormArray","pdx_points","times","volumes","volume_normals","maxTime","Math","apply","minVolume","min","maxVolume","maxVolNorm","minVolNorm","calculateMinMax","expTypes","legend","yAxisAdd","additionalHeight","plot","rawToggle","normToggle","minimum","maximum","createReactangle","volumeToggle","tumorCurve","String","r","RegExp","GrowthCurveData","dataFormatted","dataParse","batches","batchSelect","newDatapt","model_id","parseInt","parseFloat","location","URLSearchParams","StyleBar","StyleButton","button","customStyles","placeholder","provided","fontWeight","control","borderColor","border","boxShadow","borderRadius","background","indicatorSeparator","dropdownIndicator","cursor","option","singleValue","multiValue","input","clearIndicator","valueContainer","paddingBottom","overflow","GeneList","Search","selectedGeneSearch","selectedDrugs","selectedDataset","genomicsValue","selectedGenomics","allDrugs","toggleRNA","genomics","axiosConfig","handleDrugChange","handleDatasetChange","handleGeneListChange","handleGeneSearchChange","handleExpressionChange","handleKeyPress","redirectUser","handleThreshold","checkInput","clearText","item","genomic","Accept","selectedOption","labelVal","truth","regex","test","doesItContain","initial","post","event","genomicsCurrentValue","history","onKeyPress","options","onChange","isMulti","isSearchable","isClearable","name","trigger","withRouter","Container","Home","Paper","PaperGradient","SubmitStyle","LogoBack","Login","username","password","isAuthenticated","handleSubmit","handleUserChange","handlePasswordChange","preventDefault","setItem","catch","error","alert","token","pathname","Typography","component","onSubmit","TextField","required","autoComplete","Grid","container","xs","SearchResultHeatMap","drugData","patientIdDrug","SearchResultOncoprint","hmapPatients","genesMut","genesRna","genesCnv","patientMut","patientRna","patientCnv","dataMut","dataRna","dataCnv","geneParam","genomicsParam","queryData","returnValue","geneId","SearchResult","Merge","App","path","exact","render","ReactDOM","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.8ac3fbb3.chunk.js","sourcesContent":["import styled from 'styled-components';\n\n\nconst DonutNav = styled.div`\n    display: flex;\n    background-color: rgb(255,255,255,0.8);\n    min-height: 70px;\n    max-height: 70px;\n    position: fixed;\n    bottom:0;\n    left:0;\n    width: 100%;\n    align-items: flex-end;\n    justify-content: space-around;\n    flex-wrap: wrap;\n    font-family: 'Raleway', sans-serif;\n    font-weight:500;\n    font-size: 1.4em;\n    padding-bottom:5px;\n    a{\n        padding: 10px;\n        color: #3453b0;\n        letter-spacing: 2px;\n        font-weight: bold;\n        font-size: 20px;\n        text-decoration: none;\n        &:hover {\n            color: #cd5686;\n        }\n        text-align:center;\n    }\n    h4 {\n        margin-top: 3px;\n        margin-bottom: 0px;\n    }\n\n    @media screen and (max-width: 1500px) {\n        a {\n            font-size: 18px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 100px;\n        }\n    }\n\n    @media screen and (max-width: 1300px) {\n        a {\n            font-size: 18px;\n        }\n        \n        a:nth-child(1) {\n            margin-left : 10px;\n        }\n    }\n\n    @media screen and (max-width: 1000px) {\n        a {\n           font-size: 14px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 0px;\n        }\n    }\n\n    @media screen and (max-width: 700px) {\n        a {\n           font-size: 10px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 0px;\n        }\n    }\n`;\n\n\nexport default DonutNav;\n","import { createGlobalStyle } from 'styled-components';\nimport bgImg from './images/bgImg7.png';\n\n\nconst GlobalStyles = createGlobalStyle`\n\n  body {\n    background: linear-gradient(\n      to right top,\n      rgba(255, 255, 255, 0.3), \n      rgba(255, 255, 255, 0.3)\n    ),url('${bgImg}');\n    background-size: cover;\n    background-attachment: fixed;\n    background-position: center;\n    margin: auto;\n    width:100%;\n  }\n\n  #root {\n    display: flex;\n    min-height: 100vh;\n    flex-direction: column;\n    \n    min-width:100vw;\n    width:auto;\n    position:relative;\n    margin:0px;\n  }\n\n  .wrapper {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    h1 {\n      font-family:'Raleway', sans-serif;\n      font-weight:700;\n      text-align:center;\n      color: #3453b0;\n    }\n  }\n\n  .heatmap-wrapper, .doc-wrapper {\n    margin-top: 200px;\n  }\n\n  .oprint-wrapper {\n    margin-bottom:100px;\n  }\n\n  .heatmap-wrapper, .oprint-wrapper {\n    min-width:1417px;\n  }\n  .heatmap-wrapper, .oprint-wrapper, .curve-wrapper,\n  .donut-wrapper, .doc-wrapper { //put all wrappers here and wrap them with wrapper\n    background:white;\n    font-family:'Raleway', sans-serif;\n  }\n\n  .donut-wrapper {\n    margin-bottom:20px;\n    min-width:1300px;\n  }\n\n  .heatmap, .oprint {\n    height:700px;\n    overflow:auto;\n  }\n\n  .curve-wrapper {\n    min-width:1300px;\n    display:flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    a {\n      text-decoration:none;\n      font-size:16px;\n      padding:20px;\n      font-family: 'Raleway', sans-serif;\n      color: #3453b0;\n    }\n\n    .no-graph {\n      padding:50px;\n    }\n  }\n`;\n\n\nexport default GlobalStyles;\n","import styled from 'styled-components';\n\nconst HeaderStyle = styled.header`\n    *{\n        margin: 0px;\n        padding: 0px;\n        box-sizing: border-box;\n    }\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    min-height: 80px;\n    max-height: 100px;\n    font-family: 'Raleway', sans-serif;\n    background-color: rgb(255,255,255,0.8);\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n`;\n\nconst LinkStyle = styled.div`\n    display: flex;\n    justify-content: space-around;\n    width: 60%;\n\n    a {\n        color: #3453b0;\n        text-decoration: none;\n        letter-spacing:1px;\n        font-family: 'Raleway', sans-serif;\n        font-weight:700;\n        font-size: 24px;\n        &:hover {\n            color: #cd5686;\n            cursor:pointer;\n        }\n    }\n\n    \n    a:nth-child(1) {\n        margin-left : 600px;\n    }\n\n    a:nth-child(6) {\n        margin-right : -200px;\n    }\n\n    @media screen and (max-width: 2100px) {\n        a {\n            font-size: 20px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 100px;\n        }\n\n        a:nth-child(6) {\n        margin-right : -100px;\n        }\n    }\n\n    @media screen and (max-width: 1300px) {\n        a {\n            font-size: 18px;\n        }\n        \n        a:nth-child(1) {\n            margin-left : 10px;\n        }\n    }\n\n    @media screen and (max-width: 1000px) {\n        a {\n           font-size: 14px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 0px;\n        }\n    }\n\n    @media screen and (max-width: 700px) {\n        a {\n           font-size: 10px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 0px;\n        }\n    }\n`;\n\nconst LogoStyle = styled.img`\n    width:calc(5em + 2vw);\n    margin-top:2px;\n    z-index:999;\n`;\n\n\nexport {\n    HeaderStyle,\n    LogoStyle,\n    LinkStyle,\n};\n","/* eslint-disable no-unused-expressions */\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport { HeaderStyle, LogoStyle, LinkStyle } from './NavStyle';\nimport logo from '../../images/logo.png';\n\nclass TopNav extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isLogged: 'Login',\n            isLink: '/login',\n        };\n        this.isLoggedIn = this.isLoggedIn.bind(this);\n    }\n\n    static getDerivedStateFromProps() {\n        let localState = '';\n        localStorage.getItem('user')\n            ? localState = ({ isLogged: 'Logout', isLink: '/login' })\n            : localState = ({ isLogged: 'Login' });\n        return localState;\n    }\n\n    isLoggedIn() {\n        const { isLogged } = this.state;\n        if (isLogged === 'Logout') {\n            localStorage.removeItem('user');\n            this.setState({ isLogged: 'Login', isLink: '/login' });\n        }\n    }\n\n    render() {\n        const { isLink, isLogged } = this.state;\n        return (\n            <HeaderStyle>\n                <Link to=\"/\">\n                    <LogoStyle src={logo} alt=\"logo\" />\n                </Link>\n                <LinkStyle>\n                    <Link to=\"/\"> Home </Link>\n                    <Link to=\"/datasets\"> Datasets </Link>\n                    <Link to=\"/drugs\"> Drugs </Link>\n                    <Link to=\"/tissues\"> Tissues </Link>\n                    <Link to=\"/doc\"> Documentation </Link>\n                    <Link to={`${isLink}`}>\n                        <Button\n                            type=\"submit\"\n                            fullWidth\n                            variant=\"contained\"\n                            color=\"primary\"\n                            onClick={this.isLoggedIn}\n                        >\n                            {isLogged}\n                        </Button>\n                    </Link>\n                </LinkStyle>\n            </HeaderStyle>\n        );\n    }\n}\n\n\nexport default TopNav;\n","import React from 'react';\nimport CountUp from 'react-countup';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport DonutNav from './CounterStyle';\nimport GlobalStyles from '../../GlobalStyles';\nimport TopNav from '../TopNav/TopNav';\n\nclass CounterNav extends React.Component {\n    constructor(props) {\n        super(props);\n        // setting states for all the variables.\n        this.state = {\n            drugs: 0,\n            patients: 0,\n            datasets: 0,\n            tissues: 0,\n            models: 0,\n        };\n    }\n\n    componentDidMount() {\n        axios.get('/api/v1/counter', { headers: { Authorization: localStorage.getItem('user') } })\n            .then((response) => {\n                this.setState({\n                    tissues: response.data.data[0][0].tissues,\n                    drugs: response.data.data[1][0].drugs,\n                    patients: response.data.data[2][0].patients,\n                    models: response.data.data[3][0].models,\n                    datasets: response.data.data[4][0].datasets,\n                });\n            });\n    }\n\n\n    render() {\n        const {\n            datasets, tissues, patients, drugs, models,\n        } = this.state;\n        return (\n            <div>\n                <TopNav />\n                <GlobalStyles />\n                <DonutNav>\n                    <Link to=\"/datasets\">\n                        <CountUp\n                            start={0}\n                            end={datasets}\n                            duration={3}\n                            useEasing\n                        />\n                        <h4> DATASETS </h4>\n                    </Link>\n                    <Link to=\"/tissues\">\n                        <CountUp\n                            start={0}\n                            end={tissues}\n                            duration={3}\n                            useEasing\n                        />\n                        <h4> TISSUES </h4>\n                    </Link>\n                    <Link to=\"/\">\n                        <CountUp\n                            start={0}\n                            end={patients}\n                            duration={3}\n                            useEasing\n                        />\n                        <h4> PATIENTS </h4>\n                    </Link>\n                    <Link to=\"/\">\n                        <CountUp\n                            start={0}\n                            end={models}\n                            duration={3}\n                            useEasing\n                        />\n                        <h4> MODELS </h4>\n                    </Link>\n                    <Link to=\"/drugs\">\n                        <CountUp\n                            start={0}\n                            end={drugs}\n                            duration={3}\n                            useEasing\n                        />\n                        <h4> DRUGS </h4>\n                    </Link>\n                </DonutNav>\n            </div>\n        );\n    }\n}\n\nexport default CounterNav;\n","import React from 'react';\n\nconst PatientContext = React.createContext({\n    globalPatients: [],\n    setPatients: () => {},\n});\n\nconst PatientProvider = PatientContext.Provider;\nconst PatientConsumer = PatientContext.Consumer;\n\nexport { PatientProvider, PatientConsumer };\nexport default PatientContext;\n","/* eslint-disable no-shadow */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-plusplus */\nimport React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport PatientContext, { PatientConsumer } from '../Context/PatientContext';\n\n\nclass HeatMap extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            modifiedPatients: [],\n        };\n        this.HeatMap = this.HeatMap.bind(this);\n        this.makeHeatmap = this.makeHeatmap.bind(this);\n        this.rankHeatMap = this.rankHeatMap.bind(this);\n        this.rankHeatMapBasedOnOncoprintChanges = this.rankHeatMapBasedOnOncoprintChanges.bind(this);\n    }\n\n    componentDidMount() {\n        this.HeatMap();\n    }\n\n    HeatMap() {\n        const { node } = this;\n        const { data } = this.props;\n        const { drugId } = this.props;\n        const { patientId } = this.props;\n        const { dimensions } = this.props;\n        const { margin } = this.props;\n        const { className } = this.props;\n        const { dataset } = this.props;\n        this.makeHeatmap(data, patientId, drugId, dataset, className, dimensions, margin, node);\n    }\n\n    // main heatmap function taking parameters as data, all the patient ids and drugs.\n    makeHeatmap(data, patient, drug, dataset, plotId, dimensions, margin, node) {\n        this.node = node;\n\n        // height and width for the SVG based on the number of drugs and patient/sample ids.\n        // height and width of the rectangles in the main skeleton.\n        const rectHeight = dimensions.height;\n        const rectWidth = dimensions.width;\n\n        // this height and width is used for setting the body.\n        const height = drug.length * rectHeight + 100;\n        const width = patient.length * rectWidth + 100;\n\n        const targetEval = [\n            { CR: '#0033CC' },\n            { PR: '#1a9850' },\n            { SD: '#fed976' },\n            { PD: '#e41a1c' },\n        ];\n\n        const targetColor = {\n            CR: '#0033CC',\n            PR: '#1a9850',\n            SD: '#fed976',\n            PD: '#e41a1c',\n            empty: 'lightgray',\n            NA: 'lightgray',\n        };\n\n        // making tooltips\n        const tooltip = d3.select('.heatmap-wrapper')\n            .append('div')\n            .attr('id', 'heatmap-tooltip')\n            .style('position', 'absolute')\n            .style('visibility', 'hidden')\n            .style('border', 'solid')\n            .style('border-width', '1px')\n            .style('border-radius', '5px')\n            .style('padding', '5px')\n            // .style('min-width', '150px')\n            // .style('min-height', '50px')\n            .attr('top', 10)\n            .attr('left', 20);\n\n\n        // setting the query strings\n        let drugUse = '';\n        let drugIndex = 0;\n        const patientUse = patient;\n\n        // drug evaluations\n        let maxDrug = 0;\n        let drugEvaluations = {};\n        for (let i = 0; i < drug.length; i++) {\n            drugEvaluations[drug[i]] = {\n                CR: 0, PR: 0, SD: 0, PD: 0, NA: 0, empty: 0,\n            };\n        }\n\n        // patient evaluations\n        let patientEvaluations = {};\n        for (let j = 0; j < patient.length; j++) {\n            patientEvaluations[patient[j]] = {\n                CR: 0, PR: 0, SD: 0, PD: 0, NA: 0, empty: 0, total: 0,\n            };\n        }\n\n        /* this code will add to the drugEvaluations  and\n      patientEvaluations  object the values for PD,SD,PR,CR\n      and also sets the value of the letiable maxDrug. */\n        function calculateEvaluations(d, i) {\n            const drugAlt = drug[i];\n            const keys = Object.entries(d);\n            let currentMaxDrug = 0;\n            keys.forEach((key) => {\n                if (key[1] === '') { key[1] = 'empty'; }\n                drugEvaluations[drugAlt][key[1]]++;\n                patientEvaluations[key[0]][key[1]]++;\n                if (key[1] !== 'NA' || key[1] !== 'empty') {\n                    currentMaxDrug++;\n                    patientEvaluations[key[0]].total++;\n                }\n            });\n            if (currentMaxDrug > maxDrug) { maxDrug = currentMaxDrug; }\n        }\n\n\n        /* This code is used to produce the query strings */\n        // eslint-disable-next-line consistent-return\n        function querystringValue(d, i) {\n            if (i === 0) {\n                drugUse = drug[drugIndex];\n                drugIndex++;\n            }\n            if (d.length === 2 && d !== 'NA') {\n                return `/curve?patient=${patientUse[i]}&drug=${drugUse}`;\n            }\n        }\n\n\n        /** SCALE FOR MAIN SKELETON * */\n\n        // defining the scale that we will use for our x-axis and y-axis for the skeleton.\n        const yScale = d3.scaleBand()\n            .domain(drug)\n            .rangeRound([rectHeight, drug.length * rectHeight + rectHeight]);\n\n        const xScale = d3.scaleBand()\n            .domain(patient)\n            .rangeRound([0, patient.length * rectWidth]);\n\n        // defining the x-axis for the main skeleton and\n        // setting tick size to zero will remove the ticks.\n        const yAxis = d3.axisLeft()\n            .scale(yScale)\n            .tickSize(0)\n            .tickPadding(25);\n\n\n        const xAxis = d3.axisTop()\n            .scale(xScale)\n            .tickSize(5);\n\n        /** SETTING SVG ATTRIBUTES * */\n\n        // make the SVG element.\n        const svg = d3.select(node)\n            .append('svg')\n            .attr('id', `heatmap-${plotId}`)\n            .attr('xmlns', 'http://wwww.w3.org/2000/svg')\n            .attr('xmlns:xlink', 'http://wwww.w3.org/1999/xlink')\n            .attr('height', height + margin.bottom + margin.top)\n            .attr('width', width + margin.left + margin.right)\n            .append('g')\n            .attr('transform', `translate(${margin.left},${margin.top})`);\n\n\n        /** Appending Circle to the  Y-Axis */\n        drug.forEach((val, i) => {\n            svg\n                .append('circle')\n                .attr('cx', -12)\n                .attr('cy', i)\n                .attr('r', 6)\n                .attr('id', `circle-${val.replace(/\\s/g, '').replace(/\\+/g, '')}`)\n                .style('fill', '#5b8c85')\n                .attr('transform', `translate(0,${yScale(val) + 15 - i})`)\n                .style('visibility', 'hidden');\n        });\n\n\n        /** HEATMAP SKELETON * */\n\n        // structure of the heatmap\n        const skeleton = svg.append('g')\n            .attr('id', 'skeleton');\n\n\n        // this will create g element for each of data row (equivalent to total number of row)\n        const drugResponse = skeleton.append('g')\n            .attr('id', 'targ_rect');\n\n\n        const gskeleton = drugResponse.selectAll('g')\n            .data(data)\n            .enter()\n            .append('g')\n            .attr('transform', (d, i) => `translate(0,${i * rectHeight})`);\n\n\n        // this will append rect equivalent to number of patient ids.\n        const drawrectangle = gskeleton.selectAll('rect.hmap-rect')\n            .data((d, i) => {\n                // calling the function and passing the data d as parameter.\n                calculateEvaluations(d, i);\n                // this returns the object values to next chaining method.\n                const rectValue = patient.map((value) => {\n                    let val = '';\n                    if (d[value].length === 2) {\n                        val = d[value];\n                    } else if (d[value].length === 0) {\n                        val = 'empty';\n                    }\n                    return val;\n                });\n                return rectValue;\n            })\n            .enter()\n            .append('a')\n            .attr('xlink:href', (d, i) => querystringValue(d, i))\n            .append('rect')\n            .attr('class', (d, i) => `hmap-rect heatmap-${patient[i]}`)\n            .attr('width', rectWidth - 2)\n            .attr('height', rectHeight - 2)\n            .attr('x', (d, i) => i * rectWidth)\n            .attr('y', rectHeight);\n\n\n        // this will fill the rectangles with different color based on the data.\n        drawrectangle.attr('fill', (d) => targetColor[d]);\n\n        // reset\n        drugEvaluations = {};\n        for (let i = 0; i < drug.length; i++) {\n            drugEvaluations[drug[i]] = {\n                CR: 0, PR: 0, SD: 0, PD: 0, NA: 0, empty: 0,\n            };\n        }\n\n        // patient evaluations\n        patientEvaluations = {};\n        for (let j = 0; j < patient.length; j++) {\n            patientEvaluations[patient[j]] = {\n                CR: 0, PR: 0, SD: 0, PD: 0, NA: 0, empty: 0, total: 0,\n            };\n        }\n\n        // creating tooltip.\n        const createToolTip = (x, y, patient, response) => {\n            // tooltip on mousever setting the div to visible.\n            tooltip\n                .style('visibility', 'visible');\n\n            // tooltip grabbing event.pageX and event.pageY\n            // and set color according to the ordinal scale.\n            const tooltipDiv = tooltip\n                .style('left', `${x + 10}px`)\n                .style('top', `${y + 10}px`)\n                .style('color', '#000000')\n                .style('background-color', '#ffffff');\n\n            // tooltip data.\n            const tooltipData = [\n                `Patient: ${patient}`, `Response Evaluation: ${response}`,\n            ];\n\n            tooltipDiv.selectAll('textDiv')\n                .data(tooltipData)\n                .enter()\n                .append('div')\n                .attr('id', 'tooltiptextonco')\n                .html((d) => {\n                    const data = d.split(':');\n                    return `<b>${data[0]}</b>: ${data[1]}`;\n                })\n                .attr('x', `${x + 10}px`)\n                .attr('y', (d, i) => (`${y + 10 + i * 10}px`));\n        };\n\n        // hiding tooltip.\n        const hideToolTip = () => {\n            // tooltip on mousever setting the div to hidden.\n            tooltip\n                .style('visibility', 'hidden');\n            // remove all the divs with id tooltiptext.\n            d3.selectAll('#tooltiptextonco').remove();\n        };\n\n        let pCount = 0;\n        drugIndex = 0;\n\n        // let highlight =\n        gskeleton.selectAll('rect.hmap-hlight')\n            .data((d, i) => {\n                // calling the function and passing the data d as parameter.\n                calculateEvaluations(d, i);\n                // this returns the object values to next chaining method.\n                const rectValue = patient.map((value) => {\n                    let val = '';\n                    if (d[value].length === 2) {\n                        val = d[value];\n                    } else if (d[value].length === 0) {\n                        val = 'empty';\n                    }\n                    return val;\n                });\n                return rectValue;\n            })\n            .enter()\n            .append('a')\n            .attr('xlink:href', (d, i) => querystringValue(d, i))\n            .append('rect')\n            .attr('class', (d, i) => {\n                const drugClass = drug[pCount].replace(/\\s/g, '').replace(/[.]/g, '')\n                    .replace(/[+]/g, '-');\n                if (i === (patient.length - 1)) {\n                    pCount++;\n                }\n                return `hmap-hlight-${patient[i]} hmap-hlight-${drugClass}`;\n            })\n            .attr('width', rectWidth - 2)\n            .attr('height', rectHeight - 2)\n            .attr('x', (d, i) => i * rectWidth)\n            .attr('fill', 'rgb(0,0,0)')\n            .attr('y', rectHeight)\n            .style('opacity', 0)\n            // eslint-disable-next-line func-names\n            .on('mouseover', function (d, i) {\n                // creating tooltip by calling createtooltip function.\n                const patientToolTip = patient[i];\n                createToolTip(d3.event.pageX, d3.event.pageY, patientToolTip, d);\n                // highlight\n                const drugClass = d3.select(this).attr('class').split(' ')[1];\n                d3.selectAll(`.hmap-hlight-${patient[i]}`)\n                    .style('opacity', 0.2);\n                d3.selectAll(`.oprint-hlight-${patient[i]}`)\n                    .style('opacity', 0.2);\n                d3.selectAll(`.hlight-space-${patient[i]}`)\n                    .style('opacity', 0.2);\n\n                return drugClass;\n            })\n            // eslint-disable-next-line func-names\n            .on('mouseout', function (d, i) {\n                // hide tooltip\n                hideToolTip();\n                // highlight\n                const drugClass = d3.select(this).attr('class').split(' ')[1];\n                d3.selectAll(`.hmap-hlight-${patient[i]}`)\n                    .style('opacity', 0);\n                d3.selectAll(`.oprint-hlight-${patient[i]}`)\n                    .style('opacity', 0);\n                d3.selectAll(`.hlight-space-${patient[i]}`)\n                    .style('opacity', 0);\n\n                return drugClass;\n            });\n\n        // Creating lines.\n        const lines = skeleton.append('g')\n            .attr('id', 'lines')\n            .attr('transform', () => `translate(2,${height - 62})`);\n\n        const temp = patient.slice(0);\n        temp.push('');\n\n        lines.selectAll('line.dashed-line')\n            .data(temp)\n            .enter()\n            .append('line')\n            .attr('class', 'dashed-line')\n            .attr('x1', (d, i) => i * (rectWidth) - 3)\n            .attr('x2', (d, i) => i * (rectWidth) - 3)\n            .attr('y1', 2)\n            .attr('y2', 200)\n            .attr('stroke', 'black')\n            .attr('stroke-width', 1)\n            .style('stroke-dasharray', '3 2')\n            .style('opacity', 0.2);\n\n        lines.selectAll('rect.hlight-space')\n            .data(patient)\n            .enter()\n            .append('rect')\n            .attr('class', (d) => `hlight-space-${d}`)\n            .attr('width', rectWidth - 2)\n            .attr('height', 200)\n            .attr('x', (d, i) => i * rectWidth - 2)\n            .attr('fill', 'rgb(0,0,0)')\n            .attr('y', 0)\n            .style('opacity', 0);\n\n        /** X-AXIS AND Y-AXIS FOR THE SKELETON * */\n\n        // calling the y-axis and removing the stroke.\n        const drugName = skeleton.append('g')\n            .attr('id', 'drugName');\n\n        drugName.attr('stroke-width', '0')\n            .style('font-family', '\\'Raleway\\',sans-serif')\n            .style('font-size', '12px')\n            .attr('font-weight', '500')\n            .call(yAxis)\n            .selectAll('text')\n            .attr('fill', (d) => {\n                if (d === 'untreated' || d === 'WATER' || d === 'Control') { return '#3453b0'; }\n                return 'black';\n            })\n            .attr('font-weight', (d) => {\n                if (d === 'untreated' || d === 'WATER' || d === 'Control') { return '700'; }\n                return '500';\n            })\n            .attr('id', (d) => `tick-${d.replace(/\\s/g, '').replace(/\\+/g, '')}`)\n            // eslint-disable-next-line func-names\n            .on('mouseover', function () {\n                // tooltip on mousever setting the div to visible.\n                d3.select('.heatmap-wrapper')\n                    .append('div')\n                    .style('position', 'absolute')\n                    .style('border', 'solid')\n                    .style('visibility', 'visible')\n                    .style('border-width', '1px')\n                    .style('border-radius', '5px')\n                    .style('padding', '5px')\n                    .style('left', `${d3.event.pageX - 100}px`)\n                    .style('top', `${d3.event.pageY + 15}px`)\n                    .attr('id', 'tooltiptextdrug')\n                    .style('color', '#000000')\n                    .style('background-color', '#ffffff')\n                    .text('Click to Sort');\n\n                const drugClass = d3.select(this).text().replace(/\\s/g, '').replace(/[.]/g, '')\n                    .replace(/[+]/g, '-');\n                d3.selectAll(`.hmap-hlight-${drugClass}`)\n                    .style('opacity', 0.2);\n            })\n            // eslint-disable-next-line func-names\n            .on('mouseout', function () {\n                // tooltip on mousever setting the div to hidden.\n                tooltip\n                    .style('visibility', 'hidden');\n                // remove all the divs with id tooltiptext.\n                d3.select('#tooltiptextdrug').remove();\n                // highlight.\n                const drugClass = d3.select(this).text().replace(/\\s/g, '').replace(/[.]/g, '')\n                    .replace(/[+]/g, '-');\n                d3.selectAll(`.hmap-hlight-${drugClass}`)\n                    .style('opacity', 0);\n            })\n            .on('click', (d, i) => {\n                // tooltip on mousever setting the div to hidden.\n                tooltip\n                    .style('visibility', 'hidden');\n                // remove all the divs with id tooltiptext.\n                d3.select('#tooltiptextdrug').remove();\n                // highlight.\n                this.rankHeatMap(d, i, data);\n            });\n\n        // calling the x-axis to set the axis and we have also transformed the text.\n        const patientId = skeleton.append('g')\n            .attr('id', 'patient_id');\n\n        patientId.attr('stroke-width', '0')\n            .style('font-size', '12px')\n            .style('font-family', '\\'Raleway\\',sans-serif')\n            .style('text-anchor', (dataset === '7' ? 'start' : 'middle'))\n            .call(xAxis)\n            .selectAll('text')\n            .attr('transform', 'rotate(-90)')\n            .attr('font-weight', '500')\n            .attr('x', (dataset === '7' ? '-2.4em' : '0.6em'))\n            .attr('y', '.15em');\n\n\n        /** SMALL RECTANGLES ON RIGHT SIDE OF HEATMAP * */\n\n        // This will create four rectangles on right side for the Evaluation of target lesions.\n        const targetRect = skeleton.append('g')\n            .attr('id', 'small_rect');\n\n        targetRect.selectAll('rect')\n            .data(targetEval)\n            .enter()\n            .append('rect')\n            .attr('x', (patient.length * rectWidth + 120))\n            .attr('y', (d, i) => (drug.length * 10) + i * 25)\n            .attr('height', '15')\n            .attr('width', '15')\n            .attr('fill', (d) => Object.values(d));\n\n        targetRect.selectAll('text')\n            .data(targetEval)\n            .enter()\n            .append('text')\n            .attr('x', (patient.length * rectWidth + 140))\n            .attr('y', (d, i) => (drug.length * 10 + 12) + i * 25)\n            .text((d) => Object.keys(d))\n            .attr('font-size', '14px');\n\n\n        /** VERTICAL GRAPH ON RIGHT SIDE OF HEATMAP * */\n\n        const strokeWidth = 0.75;\n\n        // This will make a right side vertical graph.\n        const drugEval = skeleton.append('g')\n            .attr('id', 'drug_eval');\n\n        const drugScale = d3.scaleLinear()\n            .domain([0, maxDrug])\n            .range([0, 70]);\n\n        // This will set an x-axis for the vertical graph.\n        const xAxisVertical = d3.axisTop()\n            .scale(drugScale)\n            .ticks(4)\n            .tickSize(3)\n            .tickFormat(d3.format('.0f'));\n\n        skeleton.append('g')\n            .attr('transform', `translate(${patient.length * rectWidth + 20},${35})`)\n            .call(xAxisVertical)\n            .selectAll('text')\n            .attr('fill', 'black')\n            .style('font-size', 8)\n            .attr('stroke', 'none');\n\n\n        const drugHeightScale = d3.scaleLinear()\n            .domain([0, (44 + (drug.length - 1) * 40)])\n            .range([0, (rectHeight * drug.length) + 10]);\n\n        drugEval.append('rect')\n            .attr('class', 'drug_eval_rect')\n            .attr('x', patient.length * rectWidth + 20)\n            .attr('y', 35)\n            .attr('height', rectHeight * drug.length)\n            .attr('width', drugScale(maxDrug))\n            .attr('fill', 'white')\n            .style('stroke', 'black')\n            .style('stroke-width', 1);\n\n\n        // rectangle for vertical graph.\n        const drugEvaluationRectangle = (iterator) => {\n            const responseEvalTypes = ['CR', 'PR', 'SD', 'PD'];\n            let xRange = patient.length * rectWidth + 20;\n            let width = 0;\n            responseEvalTypes.forEach((type) => {\n            // x range for the rectangles.\n                xRange += width;\n                width = drugScale(drugEvaluations[drug[iterator]][type]);\n                drugEval.append('rect')\n                    .attr('class', `drug_eval_${type}`)\n                    .attr('height', 26)\n                    .attr('width', width)\n                    .attr('x', xRange)\n                    .attr('y', drugHeightScale(42 + iterator * 40))\n                    .attr('fill', targetColor[type])\n                    .style('stroke', 'black')\n                    .style('stroke-width', strokeWidth);\n            });\n        };\n\n        for (let i = 0; i < drug.length; i++) {\n            drugEvaluationRectangle(i);\n        }\n\n\n        /** HORIZONTAL GRAPH AT THE TOP OF HEATMAP * */\n\n        let maxPatientidTotal = 0;\n        const boxHeight = 80;\n\n        // This will set the maximum number of total letiants.\n        const keys = Object.entries(patientEvaluations);\n        keys.forEach((key) => {\n            const curentMax = key[1].total;\n            if (curentMax > maxPatientidTotal) {\n                maxPatientidTotal = curentMax;\n            }\n        });\n\n        // This will only run if the length of the drug\n        // array is greater than 1 (it has more than one drug)\n        if (drug.length > 1) {\n        // appending 'g' element to the SVG.\n            const patientEval = skeleton.append('g')\n                .attr('id', 'patient_eval');\n\n            // setting the outer rectangle.\n            patientEval.append('rect')\n                .attr('class', 'patient_eval_rect')\n                .attr('x', 0)\n                .attr('y', -130)\n                .attr('height', boxHeight)\n                .attr('width', patient.length * 20)\n                .attr('fill', 'white')\n                .style('stroke', 'black')\n                .style('stroke-width', 1);\n\n            // setting scale to map max patient_id value to range (height of the box.)\n            const patientScale = d3.scaleLinear()\n                .domain([0, maxPatientidTotal])\n                .range([0, boxHeight]);\n\n            // This code will set y-axis of the graph at top\n            if (maxPatientidTotal !== 0) {\n                const patientScales = d3.scaleLinear()\n                    .domain([0, maxPatientidTotal])\n                    .range([boxHeight, 0]);\n\n                const yAxis = d3.axisLeft()\n                    .scale(patientScales)\n                    .ticks(2)\n                    .tickSize(0)\n                    .tickFormat(d3.format('.0f'));\n\n                skeleton.append('g')\n                    .attr('transform', 'translate(0,-130.5)')\n                    .call(yAxis);\n            }\n\n            // function to calculate patient evaluations.\n            const patientEvaluationRectangle = (iterator) => {\n                const responseEvalTypes = ['CR', 'PR', 'SD', 'PD'];\n                let height = 0;\n                let yRange = -130 + boxHeight;\n\n                responseEvalTypes.forEach((type) => {\n                    height = patientScale(patientEvaluations[patient[iterator]][type]);\n                    yRange -= height;\n                    patientEval.append('rect')\n                        .attr('class', 'patient_eval_cr')\n                        .attr('height', height)\n                        .attr('width', 16)\n                        .attr('x', iterator * 20)\n                        .attr('y', yRange)\n                        .attr('fill', targetColor[type])\n                        .style('stroke', 'black')\n                        .style('stroke-width', strokeWidth);\n                });\n            };\n\n            for (let i = 0; i < patient.length; i++) {\n                patientEvaluationRectangle(i);\n            }\n        }\n    }\n\n    rankHeatMap(drug, i, dataset) {\n        // grabbing the clicked data value.\n        const data = dataset[i];\n        const { node } = this;\n        const { dimensions } = this.props;\n        const { drugId } = this.props;\n        const { margin } = this.props;\n        const { className } = this.props;\n\n\n        // responses.\n        const responses = ['CR', 'PR', 'SD', 'PD', '', 'NA'];\n        const newSortedPatients = [];\n\n        // this produces the newSortedData.\n        responses.forEach((val) => {\n            Object.keys(data).forEach((res) => {\n                if (data[res] === val) {\n                    newSortedPatients.push(res);\n                }\n            });\n        });\n\n        // setting the variables with new data.\n        const newDataset = [];\n\n        // sort the dataset or complete data according to the new sorted patient ids.\n        dataset.forEach((val, i) => {\n            newDataset.push({});\n            newSortedPatients.forEach((patient) => {\n                newDataset[i][patient] = val[patient];\n            });\n        });\n\n        this.setState({\n            modifiedPatients: newSortedPatients,\n        }, () => {\n            const { setPatients } = this.context;\n            const { modifiedPatients } = this.state;\n            // calling the context setPatients method.\n            setPatients(modifiedPatients);\n        });\n\n        // removing the heatmap wrapper and tooltip from the DOM when clicked on drug.\n        d3.select(`#heatmap-${className}`).remove();\n        d3.select('#heatmap-tooltip').remove();\n\n        // finally calling the makeHeatMap function in order passing\n        // new dataset in order to make new heatmap based on ranking.\n        this.makeHeatmap(newDataset, newSortedPatients, drugId, className, dimensions, margin, node);\n\n        // making the circle visible on click of the drug.\n        d3.select(`#circle-${drug.replace(/\\s/g, '').replace(/\\+/g, '')}`)\n            .style('visibility', 'visible');\n    }\n\n    rankHeatMapBasedOnOncoprintChanges(value) {\n        const { node } = this;\n        const { data } = this.props;\n        const { drugId } = this.props;\n        const { globalPatients } = value;\n        const { dimensions } = this.props;\n        const { margin } = this.props;\n        const { className } = this.props;\n        const newDataset = [];\n\n        // sort the complete data according to the globalPatients.\n        data.forEach((val, i) => {\n            newDataset.push({});\n            globalPatients.forEach((patient) => {\n                newDataset[i][patient] = val[patient];\n            });\n        });\n\n        // removing the heatmap wrapper and tooltip from the DOM when clicked on drug.\n        if (globalPatients.length > 0) {\n            d3.select(`#heatmap-${className}`).remove();\n            d3.select('#heatmap-tooltip').remove();\n            this.makeHeatmap(newDataset, globalPatients, drugId, className, dimensions, margin, node);\n        }\n    }\n\n    // static contextType = PatientContext;\n\n    render() {\n        return (\n            <div>\n                <div ref={(node) => { this.node = node; }} className=\"heatmap-wrapper\" />\n                <PatientConsumer>{(value) => { this.rankHeatMapBasedOnOncoprintChanges(value); }}</PatientConsumer>\n            </div>\n        );\n    }\n}\n\nHeatMap.contextType = PatientContext;\n\nHeatMap.propTypes = {\n    dimensions: PropTypes.shape({\n        height: PropTypes.number,\n        width: PropTypes.number,\n    }).isRequired,\n    margin: PropTypes.shape({\n        top: PropTypes.number,\n        right: PropTypes.number,\n        bottom: PropTypes.number,\n        left: PropTypes.number,\n    }).isRequired,\n    drugId: PropTypes.arrayOf(PropTypes.string).isRequired,\n    patientId: PropTypes.arrayOf(PropTypes.string).isRequired,\n    data: PropTypes.arrayOf(PropTypes.object).isRequired,\n    className: PropTypes.string.isRequired,\n};\n\n\nexport default HeatMap;\n","/* eslint-disable no-shadow */\nimport React from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport HeatMap from './HeatMap';\nimport GlobalStyles from '../../GlobalStyles';\nimport TopNav from '../TopNav/TopNav';\n\nclass HeatMapData extends React.Component {\n    constructor(props) {\n        super(props);\n        // setting the states for the data.\n        this.state = {\n            data: [],\n            patientId: [],\n            drugId: [],\n            datasetParam: 0,\n            dimensions: {},\n            margin: {},\n        };\n        // binding the functions declared.\n        this.parseData = this.parseData.bind(this);\n    }\n\n\n    static getDerivedStateFromProps(props) {\n        const { dataset } = props;\n        return {\n            datasetParam: dataset,\n        };\n    }\n\n    componentDidMount() {\n        const { datasetParam } = this.state;\n        if (datasetParam > 0) {\n            axios.get(`/api/v1/response/${datasetParam}`, { headers: { Authorization: localStorage.getItem('user') } })\n                .then((response) => {\n                    this.parseData(response.data);\n                });\n        }\n    }\n\n    // this function takes the parsed result and set the states.\n    parseData(result) {\n        const dataset = [];\n        let patient = [];\n        const drug = [];\n\n        // patient array.\n        patient = result.pop();\n\n        // this function will loop through the elements and\n        // assign empty values in case model information is not available.\n        result.forEach((element) => {\n            const dataObject = {};\n            drug.push(element.Drug);\n            patient.forEach((patient) => {\n                if (!element[patient]) {\n                    dataObject[patient] = '';\n                } else {\n                    dataObject[patient] = element[patient];\n                }\n            });\n            dataset.push(dataObject);\n        });\n\n        // patient from one of the object elements to keep it in sync.\n        patient = Object.keys(dataset[0]);\n\n        this.setState({\n            drugId: drug,\n            patientId: patient,\n            data: dataset,\n            dimensions: { height: 35, width: 20 },\n            margin: {\n                top: 200, right: 200, bottom: 0, left: 250,\n            },\n        });\n    }\n\n    render() {\n        const {\n            data, drugId,\n            patientId, dimensions,\n            margin, datasetParam,\n        } = this.state;\n        return (\n            <div>\n                <TopNav />\n                <GlobalStyles />\n                {\n                    data.length > 0 ? (\n                        <div className=\"wrapper\" style={{ margin: 'auto' }}>\n                            <HeatMap\n                                data={data}\n                                drugId={drugId}\n                                className=\"heatmap\"\n                                patientId={patientId}\n                                dimensions={dimensions}\n                                margin={margin}\n                                dataset={datasetParam}\n                            />\n                        </div>\n                    ) : ''\n                }\n            </div>\n        );\n    }\n}\n\nHeatMapData.propTypes = {\n    dataset: PropTypes.string.isRequired,\n};\n\nexport default HeatMapData;\n","/*\n * Copyright (c) 2015 Memorial Sloan-Kettering Cancer Center.\n *\n * This library is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY, WITHOUT EVEN THE IMPLIED WARRANTY OF MERCHANTABILITY OR FITNESS\n * FOR A PARTICULAR PURPOSE. The software and documentation provided hereunder\n * is on an \"as is\" basis, and Memorial Sloan-Kettering Cancer Center has no\n * obligations to provide maintenance, support, updates, enhancements or\n * modifications. In no event shall Memorial Sloan-Kettering Cancer Center be\n * liable to any party for direct, indirect, special, incidental or\n * consequential damages, including lost profits, arising out of the use of this\n * software and its documentation, even if Memorial Sloan-Kettering Cancer\n * Center has been advised of the possibility of such damage.\n */\n\n/*\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * Singleton utility class for Mutation View related tasks.\n *\n * @author Selcuk Onur Sumer\n * @modified by Gangesh Beri\n */\n\n/**\n* Mapping between the mutation type (data) values and\n* view values.\n*/\n\nconst mutationStyleMap = {\n    missense: {\n        label: 'Missense',\n        longName: 'Missense',\n        style: 'missense_mutation',\n        mainType: 'missense',\n        priority: 3,\n        color: '#1a9850',\n    },\n    inframe: {\n        label: 'IF',\n        longName: 'In-frame',\n        style: 'inframe_mutation',\n        mainType: 'inframe',\n        priority: 4,\n        color: '#8B4513',\n    },\n    truncating: {\n        label: 'Truncating',\n        longName: 'Truncating',\n        style: 'trunc_mutation',\n        mainType: 'truncating',\n        priority: 6,\n        color: '#000000',\n    },\n    nonsense: {\n        label: 'Nonsense',\n        longName: 'Nonsense',\n        style: 'trunc_mutation',\n        mainType: 'truncating',\n        priority: 8,\n        color: '#000000',\n    },\n    nonstop: {\n        label: 'Nonstop',\n        longName: 'Nonstop',\n        style: 'trunc_mutation',\n        mainType: 'truncating',\n        priority: 9,\n        color: '#000000',\n    },\n    nonstart: {\n        label: 'Nonstart',\n        longName: 'Nonstart',\n        style: 'trunc_mutation',\n        mainType: 'truncating',\n        priority: 10,\n        color: '#000000',\n    },\n    frameshift: {\n        label: 'FS',\n        longName: 'Frame Shift',\n        style: 'trunc_mutation',\n        mainType: 'truncating',\n        priority: 6,\n        color: '#000000',\n    },\n    frame_shift_del: {\n        label: 'FS del',\n        longName: 'Frame Shift Deletion',\n        style: 'trunc_mutation',\n        mainType: 'truncating',\n        priority: 6,\n        color: '#000000',\n    },\n    frame_shift_ins: {\n        label: 'FS ins',\n        longName: 'Frame Shift Insertion',\n        style: 'trunc_mutation',\n        mainType: 'truncating',\n        priority: 7,\n        color: '#000000',\n    },\n    in_frame_ins: {\n        label: 'IF ins',\n        longName: 'In-frame Insertion',\n        style: 'inframe_mutation',\n        mainType: 'inframe',\n        priority: 5,\n        color: '#8B4513',\n    },\n    in_frame_del: {\n        label: 'IF del',\n        longName: 'In-frame Deletion',\n        style: 'inframe_mutation',\n        mainType: 'inframe',\n        priority: 4,\n        color: '#8B4513',\n    },\n    splice_site: {\n        label: 'Splice',\n        longName: 'Splice site',\n        style: 'trunc_mutation',\n        mainType: 'truncating',\n        priority: 11,\n        color: '#000000',\n    },\n    fusion: {\n        label: 'Fusion',\n        longName: 'Fusion',\n        style: 'fusion',\n        mainType: 'other',\n        priority: 12,\n        color: '#8B00C9',\n    },\n    silent: {\n        label: 'Silent',\n        longName: 'Silent',\n        style: 'other_mutation',\n        mainType: 'other',\n        priority: 13,\n        color: '#8B00C9',\n    },\n    // this\n    default: {\n        label: 'Other',\n        longName: 'Other',\n        style: 'other_mutation',\n        mainType: 'other',\n        priority: 13,\n        color: '#8B00C9',\n    },\n    // mutations mapped to \"other\" will be labelled\n    // with their original data value\n    other: {\n        style: 'other_mutation',\n        mainType: 'other',\n        priority: 13,\n        color: '#8B00C9',\n    },\n};\n\n\nexport const mutationTypeMap = {\n    missense_mutation: mutationStyleMap.missense,\n    mutation: mutationStyleMap.missense,\n    missense: mutationStyleMap.missense,\n    missense_variant: mutationStyleMap.missense,\n    frame_shift_ins: mutationStyleMap.frame_shift_ins,\n    frame_shift_del: mutationStyleMap.frame_shift_del,\n    frameshift: mutationStyleMap.frameshift,\n    frameshift_deletion: mutationStyleMap.frame_shift_del,\n    frameshift_insertion: mutationStyleMap.frame_shift_ins,\n    de_novo_start_outofframe: mutationStyleMap.frameshift,\n    frameshift_variant: mutationStyleMap.frameshift,\n    nonsense_mutation: mutationStyleMap.nonsense,\n    nonsense: mutationStyleMap.nonsense,\n    stopgain_snv: mutationStyleMap.nonsense,\n    stop_gained: mutationStyleMap.nonsense,\n    splice_site: mutationStyleMap.splice_site,\n    splice: mutationStyleMap.splice_site,\n    'splice site': mutationStyleMap.splice_site,\n    splicing: mutationStyleMap.splice_site,\n    splice_site_snp: mutationStyleMap.splice_site,\n    splice_site_del: mutationStyleMap.splice_site,\n    splice_site_indel: mutationStyleMap.splice_site,\n    splice_region_variant: mutationStyleMap.splice_site,\n    translation_start_site: mutationStyleMap.nonstart,\n    initiator_codon_variant: mutationStyleMap.nonstart,\n    start_codon_snp: mutationStyleMap.nonstart,\n    start_codon_del: mutationStyleMap.nonstart,\n    nonstop_mutation: mutationStyleMap.nonstop,\n    stop_lost: mutationStyleMap.nonstop,\n    in_frame_del: mutationStyleMap.in_frame_del,\n    in_frame_deletion: mutationStyleMap.in_frame_del,\n    in_frame_ins: mutationStyleMap.in_frame_ins,\n    in_frame_insertion: mutationStyleMap.in_frame_ins,\n    indel: mutationStyleMap.in_frame_del,\n    nonframeshift_deletion: mutationStyleMap.inframe,\n    nonframeshift: mutationStyleMap.inframe,\n    'nonframeshift insertion': mutationStyleMap.inframe,\n    nonframeshift_insertion: mutationStyleMap.inframe,\n    targeted_region: mutationStyleMap.inframe,\n    inframe: mutationStyleMap.inframe,\n    truncating: mutationStyleMap.truncating,\n    feature_truncation: mutationStyleMap.truncating,\n    fusion: mutationStyleMap.fusion,\n    silent: mutationStyleMap.silent,\n    synonymous_variant: mutationStyleMap.silent,\n    any: mutationStyleMap.default,\n    other: mutationStyleMap.default,\n};\n\n\n/*\nMapping btw the copy number (data) values and view values.\n*/\nexport const cnaMap = {\n    '-2': {\n        label: 'DeepDel', style: 'cna-homdel', tooltip: 'Deep deletion', color: '#0033CC', xevalabel: 'del', priority: 2,\n    },\n    '-1': {\n        label: 'ShallowDel', style: 'cna-hetloss', tooltip: 'Shallow deletion', color: '#0033CC', xevalabel: 'del', priority: 2,\n    },\n    0: {\n        label: 'Diploid', style: 'cna-diploid', tooltip: 'Diploid / normal', color: 'lightgray', xevalabel: 'empty', priority: 16,\n    },\n    1: {\n        label: 'Gain', style: 'cna-gain', tooltip: 'Low-level gain', color: '#e41a1c', xevalabel: 'amp', priority: 1,\n    },\n    2: {\n        label: 'AMP', style: 'cna-amp', tooltip: 'High-level amplification', color: '#e41a1c', xevalabel: 'amp', priority: 1,\n    },\n    'del0.8': {\n        label: 'DeepDel', style: 'cna-homdel', tooltip: 'Deep deletion', color: '#0033CC', xevalabel: 'del', priority: 2,\n    },\n    deletion: {\n        label: 'DeepDel', style: 'cna-homdel', tooltip: 'Deep deletion', color: '#0033CC', xevalabel: 'del', priority: 2,\n    },\n    'shallow deletion': {\n        label: 'DeepDel', style: 'cna-homdel', tooltip: 'Deep deletion', color: '#0033CC', xevalabel: 'del', priority: 2,\n    },\n    'deep deletion': {\n        label: 'DeepDel', style: 'cna-homdel', tooltip: 'Deep deletion', color: '#0033CC', xevalabel: 'del', priority: 2,\n    },\n    gain: {\n        label: 'Gain', style: 'cna-gain', tooltip: 'Low-level gain', color: '#e41a1c', xevalabel: 'amp', priority: 1,\n    },\n    amp: {\n        label: 'AMP', style: 'cna-amp', tooltip: 'High-level amplification', color: '#e41a1c', xevalabel: 'amp', priority: 1,\n    },\n    amplification: {\n        label: 'AMP', style: 'cna-amp', tooltip: 'High-level amplification', color: '#e41a1c', xevalabel: 'amp', priority: 1,\n    },\n    unknown: {\n        label: 'NA', style: 'cna-unknown', tooltip: 'CNA data is not available for this gene', xevalabel: 'empty', priority: 16,\n    },\n};\n\nexport const rnaMap = {\n    positive: {\n        priority: 14,\n    },\n    negative: {\n        priority: 15,\n    },\n    'not available': {\n        priority: 16,\n    },\n};\n\n\nexport default {\n    mutationTypeMap,\n    cnaMap,\n    rnaMap,\n};\n","/* eslint-disable func-names */\n/* eslint-disable no-plusplus */\n/* eslint-disable max-len */\n/* eslint-disable camelcase */\nimport React from 'react';\nimport * as d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport { mutationTypeMap, cnaMap, rnaMap } from '../../util/MutationViewsUtil';\nimport PatientContext, { PatientConsumer } from '../Context/PatientContext';\n\nclass Oncoprint extends React.Component {\n    constructor(props) {\n        super(props);\n        this.Oncoprint = this.Oncoprint.bind(this);\n        this.rankOncoprintBasedOnHeatMapChanges = this.rankOncoprintBasedOnHeatMapChanges.bind(this);\n        this.rankOncoprint = this.rankOncoprint.bind(this);\n    }\n\n    componentDidMount() {\n        this.Oncoprint();\n    }\n\n    Oncoprint(modifiedPatients) {\n        let { hmap_patients } = this.props;\n        hmap_patients = modifiedPatients || hmap_patients;\n        const { node } = this;\n        const { className } = this.props;\n        const { dimensions } = this.props;\n        const { margin } = this.props;\n        const { threshold } = this.props;\n        const { data_mut } = this.props;\n        const { data_rna } = this.props;\n        const { data_cnv } = this.props;\n        const { genes_mut } = this.props;\n        const { genes_rna } = this.props;\n        const { genes_cnv } = this.props;\n        const { patient_mut } = this.props;\n        const { patient_rna } = this.props;\n        const { patient_cnv } = this.props;\n\n        this.makeOncoprint(node, className, dimensions, margin, threshold, hmap_patients,\n            data_mut, data_rna, data_cnv, genes_mut, genes_rna, genes_cnv, patient_mut, patient_rna, patient_cnv);\n    }\n\n\n    makeOncoprint(node, plotId, dimensions, margin, threshold, hmap_patients, data_mut, data_rna, data_cnv, genes_mut, genes_rna, genes_cnv, patient_mut, patient_rna, patient_cnv) {\n        // reference.\n        this.node = node;\n        let isAlteration = false;\n\n        // to merge two arrays and give the unique values.\n        // eslint-disable-next-line no-extend-native\n        Array.prototype.unique = function () {\n            const a = this.concat();\n            for (let i = 0; i < a.length; ++i) {\n                for (let j = i + 1; j < a.length; ++j) {\n                    if (a[i] === a[j]) { a.splice(j--, 1); }\n                }\n            }\n            return a;\n        };\n\n        // merging the data from all of three calls to api ie cnv, mutation and rnaseq.\n        const genes = [...genes_mut, ...genes_rna, ...genes_cnv].unique();\n        const patients = [...patient_mut, ...patient_rna, ...patient_cnv].unique();\n\n        // aberration data\n        const aberration = [\n            { value: 'missense', color: '#1a9850' },\n            { value: 'inframe', color: '#8B4513' },\n            { value: 'truncating', color: '#000000' },\n            { value: 'other', color: '#8B00C9' },\n            { value: 'del', color: '#0033CC' },\n            { value: 'amp', color: '#e41a1c' },\n        ];\n\n        // height and width for the SVG based on the number of genes_mut and patient/sample ids.\n        // height and width of the rectangles in the main skeleton.\n        const rect_height = dimensions.height;\n        const rect_width = dimensions.width;\n\n        // this height and width is used for setting the body.\n        const height = genes.length * rect_height + 100;\n        const width = hmap_patients.length * rect_width + 100;\n\n        // adding this for rectangles on right side of oncoprint.\n        // only if the mutation data is present.\n        // TODO:: This should be according to the types of mutation present in the data.\n        let rect_alterations_mut = [];\n        if (data_mut.length > 0) {\n            rect_alterations_mut = [\n                { value: 'Missense Mutation', color: '#1a9850' },\n                { value: 'Inframe Mutation', color: '#8B4513' },\n                { value: 'Truncating Mutation', color: '#000000' },\n                { value: 'Other Mutations', color: '#8B00C9' },\n            ];\n        }\n        // only if rnaseq data is available.\n        let rect_alterations_rna = [];\n        if (data_rna.length > 0) {\n            rect_alterations_rna = [\n                { value: 'mRNA High', color: 'none' },\n                { value: 'mRNA Low', color: 'none' },\n            ];\n        }\n        // only if the cnv data is present.\n        let rect_alterations_cnv = [];\n        if (data_cnv.length > 0) {\n            rect_alterations_cnv = [\n                { value: 'Deletion', color: '#0033CC' },\n                { value: 'Amplification', color: '#e41a1c' },\n            ];\n        }\n\n        const rect_alterations = [\n            ...rect_alterations_mut,\n            ...rect_alterations_rna,\n            ...rect_alterations_cnv,\n            { value: 'Wild Type', color: 'lightgray' },\n            { value: 'Not Available', color: 'none' },\n        ];\n\n\n        // making tooltips\n        const tooltip = d3.select('.oprint-wrapper')\n            .append('div')\n            .style('position', 'absolute')\n            .style('visibility', 'hidden')\n            .style('border', 'solid')\n            .style('border-width', '1px')\n            .style('border-radius', '5px')\n            .style('padding', '5px')\n            // .style('min-width', '150px')\n            // .style('min-height', '80px')\n            .attr('top', 10)\n            .attr('left', 20);\n\n\n        /** SETTING SVG ATTRIBUTES and Oncoprint SKELETON * */\n        // make the svg element\n        const svg = d3.select(node)\n            .append('svg')\n            .attr('id', `oncoprint-${plotId}`) // set an id so that I can remove+replace on refresh\n            .attr('xmlns', 'http://www.w3.org/2000/svg')\n            .attr('xmlns:xlink', 'http://www.w3.org/1999/xlink')\n            .attr('width', width + margin.left + margin.right)\n            .attr('height', height + margin.top + margin.bottom)\n            .append('g')\n            .attr('transform',\n                `translate(${margin.left},${margin.top})`);\n\n        // skeleton of the oncoprint\n        const skeleton = svg.append('g')\n            .attr('id', 'skeleton');\n\n\n        /** Appending Circle to the  Y-Axis */\n        genes.forEach((val, i) => {\n            svg\n                .append('circle')\n                .attr('cx', -12)\n                .attr('cy', i)\n                .attr('r', 6)\n                .attr('id', `circle-${val.replace(/\\s/g, '').replace(/\\+/g, '')}`)\n                .style('fill', '#5b8c85')\n                .attr('transform', `translate(0,${i * (rect_height) + 15 - i})`)\n                .style('visibility', 'hidden');\n        });\n\n\n        /* *  Gene Names on Y-Axis * */\n\n        // geneNames\n        const geneNames = skeleton.append('g')\n            .attr('id', 'gene-names');\n\n        // gene names on the y axis\n        const geneAxis = () => {\n            for (let i = 0; i < genes.length; i++) {\n                geneNames.append('text')\n                    .attr('class', genes[i])\n                    .attr('dx', -25)\n                    .style('text-anchor', 'end')\n                    .style('font-size', '12px')\n                    .attr('dy', i * (rect_height) + 20)\n                    .attr('font-weight', '500')\n                    .text(genes[i])\n                    .on('mouseover', () => {\n                        // tooltip on mousever setting the div to visible.\n                        d3.select('.oprint-wrapper')\n                            .append('div')\n                            .style('position', 'absolute')\n                            .style('border', 'solid')\n                            .style('visibility', 'visible')\n                            .style('border-width', '1px')\n                            .style('border-radius', '5px')\n                            .style('padding', '5px')\n                            .style('left', `${d3.event.pageX - 100}px`)\n                            .style('top', `${d3.event.pageY + 15}px`)\n                            .attr('id', 'tooltiptextgene')\n                            .style('color', '#000000')\n                            .style('background-color', '#ffffff')\n                            .text('Click to Sort');\n\n                        d3.selectAll(`.oprint-hlight-${genes[i]}`)\n                            .style('opacity', 0.2);\n                    })\n                    .on('mouseout', () => {\n                        // tooltip on mousever setting the div to hidden.\n                        tooltip\n                            .style('visibility', 'hidden');\n                        // remove all the divs with id tooltiptext.\n                        d3.select('#tooltiptextgene').remove();\n                        // for highlight.\n                        d3.selectAll(`.oprint-hlight-${genes[i]}`)\n                            .style('opacity', 0);\n                    })\n                    .on('click', () => {\n                        // tooltip on mousever setting the div to hidden.\n                        tooltip\n                            .style('visibility', 'hidden');\n                        // remove all the divs with id tooltiptext.\n                        d3.select('#tooltiptextgene').remove();\n                        // ranking oncoprint.\n                        this.rankOncoprint(genes[i], [data_mut, data_cnv, data_rna]);\n                    });\n            }\n        };\n\n        // create gene-name y-axis.\n        geneAxis();\n\n\n        /** Setting Alterations * */\n\n        // alterations: mutations are #1a9850 and a third, AMP/del are #e41a1c/#0033CC and full respectively\n        const alterations = svg.append('g')\n            .attr('id', 'alterations');\n\n        const highlight = svg.append('g')\n            .attr('id', 'highlight');\n\n\n        // collect info about alterations per gene/patient for plotting later\n        const gene_alterations = {};\n        const patient_alterations = [];\n\n        if (genes_mut.length > 0 || genes_cnv.length > 0) {\n            for (let i = 0; i < genes.length; i++) {\n                gene_alterations[genes[i]] = {\n                    missense: 0, amp: 0, del: 0, inframe: 0, truncating: 0, other: 0,\n                };\n            }\n\n            for (let i = 0; i < hmap_patients.length; i++) {\n                patient_alterations.push({\n                    missense: 0, amp: 0, del: 0, inframe: 0, truncating: 0, other: 0,\n                });\n            }\n        }\n\n\n        /** Coloring the rectangles based on mutation, cnv or rnaseq data * */\n\n        // this will take four parameters and color the rectangle accordingly\n        const colorReactangles = (value, color, i, j, mutationType) => {\n            // setting a = 12 if value is mut\n            const a = value === 'mut' ? 12 : 0;\n            // setting the color based on value param.\n            if (value !== 'empty' && value === 'mut') {\n                gene_alterations[genes[i]][mutationType]++;\n                patient_alterations[j][mutationType]++;\n            } else if (value !== 'empty' && (value === 'amp' || value === 'del')) {\n                gene_alterations[genes[i]][value]++;\n                patient_alterations[j][value]++;\n            }\n\n            // value !== 'highrna' && value !== 'lowrna' && value! == 'amp'\n            // this is for mutation data and rnaseq.\n            const rect = alterations.append('rect')\n                .attr('class', `alter-rect ${value}`)\n                .attr('width', rect_width - 6)\n                .attr('height', rect_height - 6 - (2 * a))\n                .attr('fill', color)\n                .attr('x', j * (rect_width))\n                .attr('y', i * (rect_height) + 2 * (a / 2));\n\n            // setting the boder high-rna and low-rna.\n            if (value === 'highrna') {\n                rect.attr('stroke', 'red')\n                    .style('opacity', 0.6);\n            } else if (value === 'lowrna') {\n                rect.attr('stroke', 'blue')\n                    .style('opacity', 0.6);\n            }\n        };\n\n\n        // stroke for not sequenced patients.\n        const colorNotSequenced = (i, j) => {\n            alterations.append('rect')\n                .attr('class', 'alter-rect nseq')\n                .attr('width', rect_width - 6)\n                .attr('height', rect_height - 6)\n                .attr('fill', 'white')\n                .attr('stroke', 'lightgray')\n                .attr('stroke-width', '1px')\n                .attr('x', j * (rect_width) + 1)\n                .attr('y', i * (rect_height) + 1);\n        };\n\n\n        // creates a layer of oncoprint.\n        for (let i = 0; i < genes.length; i++) {\n            for (let j = 0; j < hmap_patients.length; j++) {\n                if (patients.includes(hmap_patients[j])) {\n                    colorReactangles('empty', 'lightgrey', i, j);\n                } else {\n                    colorNotSequenced(i, j);\n                }\n            }\n        }\n\n        /** Coloring the rectangles borders based on mutation and cnv data * */\n        for (let i = 0; i < genes.length; i++) {\n            for (let j = 0; j < hmap_patients.length; j++) {\n                /** Coloring the rectangles borders based on cnv data * */\n                if (genes_cnv.includes(genes[i]) && data_cnv[i][hmap_patients[j]]) {\n                    const cnvType = cnaMap[data_cnv[i][hmap_patients[j]].toLowerCase()].xevalabel;\n                    const cnvColor = cnaMap[data_cnv[i][hmap_patients[j]].toLowerCase()].color;\n                    if (!isAlteration) {\n                        isAlteration = (cnvType !== 'empty');\n                    }\n                    colorReactangles(cnvType, cnvColor, i, j);\n                }\n\n                /** Coloring the rectangles borders based on mutation data * */\n                // if the gene from genes located in genes_mut.\n                // mutation later because they are 1/3 the box.\n                if (genes_mut.includes(genes[i]) && patient_mut.includes(hmap_patients[j]) && data_mut[i][hmap_patients[j]] !== '0' && data_mut[i][hmap_patients[j]] !== '') {\n                    isAlteration = !isAlteration ? true : isAlteration;\n                    // based on the data gives different colors to the rectangle.\n                    const { color } = mutationTypeMap[data_mut[i][hmap_patients[j]].toLowerCase()];\n                    const type = mutationTypeMap[data_mut[i][hmap_patients[j]].toLowerCase()].mainType;\n                    colorReactangles('mut', color, i, j, type);\n                }\n            }\n        }\n\n        /** Coloring the rectangles borders based on rna sequencing data * */\n        // variable for taking care of rnaseq data sequence.\n        let z = 0;\n        for (let i = 0; i < genes.length; i++) {\n            if (genes_rna.includes(genes[i])) {\n                for (let j = 0; j < hmap_patients.length; j++) {\n                    // only if the element is not included\n                    // complete layer of lightgrey rectangles only if mutation data is not available.\n                    if (Number(data_rna[z][hmap_patients[j]]) > threshold) {\n                        colorReactangles('highrna', 'none', i, j);\n                    } else if (Number(data_rna[z][hmap_patients[j]]) < -threshold) {\n                        colorReactangles('lowrna', 'none', i, j);\n                    }\n                }\n                z++;\n            }\n        }\n\n\n        /** ALTERATION GRAPHS * */\n\n        /** Vertical Graph * */\n        if ((genes_mut.length > 0 || genes_cnv.length > 0) && isAlteration) {\n            // calculating max width\n            const max_width_arr = [];\n            for (let i = 0; i < genes.length; i++) {\n                let max = 0;\n                for (let j = 0; j < aberration.length; j++) {\n                    max += gene_alterations[genes[i]][aberration[j].value];\n                }\n                max_width_arr.push(max);\n            }\n            const max_width = d3.max(max_width_arr);\n\n\n            const xrange_gene = d3.scaleLinear()\n                .domain([0, max_width])\n                .range([0, 70]);\n\n\n            const gene_alter = svg.append('g')\n                .attr('id', 'gene-alter')\n                .attr('transform', `translate(${hmap_patients.length * rect_width + 20},0)`);\n\n            const stroke_width = 1; // this will set the stroke width of the outer rectangle\n\n            // setting the outer rectangle.\n            gene_alter.append('rect')\n                .attr('class', 'patient_eval_rect')\n                .attr('x', 0)\n                .attr('y', 0)\n                .attr('height', (rect_height) * (genes.length) - 6)\n                .attr('width', xrange_gene(max_width))\n                .attr('fill', 'white')\n                .style('stroke', 'black')\n                .style('stroke-width', stroke_width);\n\n\n            // function to caculate alterations.\n            const geneAlterationReactangle = (iterator) => {\n                // variables.\n                const i = iterator;\n                let x_range = stroke_width / 2;\n                let aberration_type = '';\n                // loops through each type for each of the genes_mut.\n                aberration.forEach((type) => {\n                    const { color } = type;\n                    if (aberration_type !== '') {\n                        x_range += xrange_gene(gene_alterations[genes[i]][aberration_type]);\n                    }\n                    aberration_type = type.value;\n\n                    // rectangle coloring.\n                    gene_alter.append('rect')\n                        .attr('class', `gene-rect ${type}`)\n                        .attr('height', rect_height - 6)\n                        .attr('width', xrange_gene(gene_alterations[genes[i]][type.value]))\n                        .attr('fill', color)\n                        .attr('y', (i * (rect_height)))\n                        .attr('x', x_range);\n                });\n            };\n\n            // calculate alterations for each row.\n            for (let i = 0; i < genes.length; i++) {\n                geneAlterationReactangle(i);\n            }\n\n            // This will set the axis and scale.\n            const xrange_scale = d3.scaleLinear()\n                .domain([0, max_width])\n                .range([0, xrange_gene(max_width)]);\n\n            const x_axis = d3.axisTop()\n                .scale(xrange_scale)\n                .ticks(4)\n                .tickSize(3)\n                .tickFormat(d3.format('.0f'));\n\n            svg.append('g')\n                .attr('class', 'x_axis')\n                .attr('fill', 'none')\n                .attr('stroke', 'black')\n                .attr('stroke-width', 1)\n                .attr('transform', `translate(${hmap_patients.length * rect_width + 20} -0 )`)\n                .call(x_axis)\n                .selectAll('text')\n                .attr('fill', 'black')\n                .style('font-size', 8)\n                .attr('stroke', 'none');\n\n            svg.selectAll('.tick')\n                .select('text')\n                .attr('fill', 'black')\n                .attr('stroke', 'none');\n        }\n\n\n        /** Horizontal Graph * */\n\n        // calculating max height\n\n        if ((genes_mut.length > 0 || genes_cnv.length > 0) && isAlteration) {\n            // calculating the max height.\n            const max_height_arr = [];\n\n            for (let i = 0; i < patient_alterations.length; i++) {\n                let max = 0;\n                for (let j = 0; j < aberration.length; j++) {\n                    max += patient_alterations[i][aberration[j].value];\n                    // max_height_arr.push(patient_alterations[i][aberration[j].value]);\n                }\n                max_height_arr.push(max);\n            }\n\n            const max_height = d3.max(max_height_arr);\n\n            const patient_alter = svg.append('g')\n                .attr('id', 'patient-alter');\n\n            const yrange_patient = d3.scaleLinear() // #TODO: scale.linear\n                .domain([0, max_height])\n                .range([35, 0]);\n\n            // function to caculate alterations.\n            const patientAlterationReactangle = (iterator) => {\n                // variables.\n                const i = iterator;\n                let y_range = 0;\n\n                // loops through each type for each of the genes_mut.\n                aberration.forEach((type, j) => {\n                    // set value to 1 if j is greater than 1.\n                    j = j > 1 ? j / j : j;\n\n                    // setting y range.\n                    y_range = (yrange_patient(patient_alterations[i][type.value])) - ((35 * j) - y_range);\n\n                    // color setting.\n                    const { color } = type;\n\n                    // rectangle coloring.\n                    patient_alter.append('rect')\n                        .attr('class', `patient-rect${type}`)\n                        .attr('height', 35 - yrange_patient(patient_alterations[i][type.value]))\n                        .attr('width', rect_width - 5)\n                        .attr('fill', color)\n                        .attr('y', y_range)\n                        .attr('x', i * 20 + 1)\n                        .attr('transform', 'translate(0,-40)');\n                });\n            };\n\n            for (let i = 0; i < patient_alterations.length; i++) {\n                patientAlterationReactangle(i);\n            }\n\n            const yrange_axis = d3.scaleLinear()\n                .domain([0, max_height])\n                .range([35 - yrange_patient(max_height), 0]).nice();\n\n            const y_axis = d3.axisLeft()\n                .scale(yrange_axis)\n                .ticks(4); // change to dynamic ticks.\n                // .tickSize(2)\n                // .tickFormat(d3.format('.0f'));\n\n            svg.append('g')\n                .attr('class', 'y_axis')\n                .attr('fill', 'none')\n                .attr('stroke', 'black')\n                .attr('stroke-width', 1)\n                .attr('transform', `translate(-10,${-(35 - yrange_patient(max_height)) - 5})`)\n                .call(y_axis)\n                .selectAll('text')\n                .attr('fill', 'black')\n                .style('font-size', 8)\n                .attr('stroke', 'none');\n\n            svg.selectAll('.tick')\n                .select('text')\n                .attr('fill', 'black')\n                .attr('stroke', 'none');\n\n            // removing the 0 tick\n            svg.selectAll('.y_axis .tick')\n                .each(function (d) {\n                    if (d === 0) {\n                        this.remove();\n                    }\n                });\n        }\n        // dotted lines.\n        const lines = svg.append('g')\n            .attr('id', 'lines')\n            .attr('transform', () => 'translate(2,-200)');\n        const temp = hmap_patients.slice(0);\n        temp.push('');\n\n        lines.selectAll('line.dashed-line')\n            .data(temp)\n            .enter()\n            .append('line')\n            .attr('class', 'dashed-line')\n            .attr('x1', (d, i) => i * (rect_width) - 3)\n            .attr('x2', (d, i) => i * (rect_width) - 3)\n            .attr('y1', 0)\n            .attr('y2', 200)\n            .attr('stroke', 'black')\n            .attr('stroke-width', 1)\n            .style('stroke-dasharray', '3 2')\n            .style('opacity', 0.2);\n\n        lines.selectAll('rect.hlight-space')\n            .data(hmap_patients)\n            .enter()\n            .append('rect')\n            .attr('class', (d) => `hlight-space-${d}`)\n            .attr('width', rect_width - 2)\n            .attr('height', 200)\n            .attr('x', (d, i) => i * rect_width - 2)\n            .attr('fill', 'rgb(0,0,0)')\n            .attr('y', 0)\n            .style('opacity', 0);\n        // }\n        /** SMALL RECTANGLES ON RIGHT SIDE OF Oncoprint * */\n\n        // This will create rectangles on right side for alterations.\n        // legends\n        const target_rect = skeleton.append('g')\n            .attr('id', 'small_rectangle');\n\n        target_rect.selectAll('rect')\n            .data(rect_alterations)\n            .enter()\n            .append('rect')\n            .attr('x', (hmap_patients.length * rect_width + 120))\n            .attr('y', (d, i) => (genes.length * 10) + i * 25)\n            .attr('height', '15')\n            .attr('width', '15')\n            .attr('fill', function (d) {\n                if (d.color === 'none') {\n                    d3.select(this).attr('stroke', 'lightgray')\n                        .attr('transform', 'translate(1,1)')\n                        .attr('width', 14)\n                        .attr('height', 14);\n                    return 'white';\n                }\n                return d.color;\n            })\n            .attr('stroke', (d) => {\n                let val = '';\n                if (d.value === 'mRNA High') {\n                    val = 'red';\n                } if (d.value === 'mRNA Low') {\n                    val = 'blue';\n                } if (d.value === 'Not Available') {\n                    val = 'lightgray';\n                }\n                return val;\n            })\n            .attr('stroke-width', '.5px');\n\n        target_rect.selectAll('text')\n            .data(rect_alterations)\n            .enter()\n            .append('text')\n            .attr('x', (hmap_patients.length * rect_width + 140))\n            .attr('y', (d, i) => (genes.length * 10 + 12) + i * 25)\n            .text((d) => d.value)\n            .attr('font-size', '14px');\n\n\n        // creating tooltip.\n        const createToolTip = (x, y, gene, patient, mutation, cnv) => {\n            // tooltip on mousever setting the div to visible.\n            tooltip\n                .style('visibility', 'visible');\n\n            // tooltip grabbing event.pageX and event.pageY\n            // and set color according to the ordinal scale.\n            const tooltipDiv = tooltip\n                .style('left', `${x + 10}px`)\n                .style('top', `${y + 10}px`)\n                .style('color', '#000000')\n                .style('background-color', '#ffffff');\n\n            // tooltip data.\n            const tooltipData = [\n                `Gene: ${gene}`, `Patient: ${patient}`,\n            ];\n            // pushing data into the tooltipData if mutation or cnv is not empty or null.\n            if (mutation !== '0' && mutation) { tooltipData.push(`Mutation: ${mutation}`); }\n            if (cnv !== '0' && cnv) { tooltipData.push(`Copy Number Variation: ${cnv}`); }\n\n            tooltipDiv.selectAll('textDiv')\n                .data(tooltipData)\n                .enter()\n                .append('div')\n                .attr('id', 'tooltiptextonco')\n                .html((d) => {\n                    const data = d.split(':');\n                    return `<b>${data[0]}</b>: ${data[1]}`;\n                })\n                .attr('x', `${x + 10}px`)\n                .attr('y', (d, i) => (`${y + 10 + i * 10}px`));\n        };\n\n        // hiding tooltip.\n        const hideToolTip = () => {\n            // tooltip on mousever setting the div to hidden.\n            tooltip\n                .style('visibility', 'hidden');\n            // remove all the divs with id tooltiptext.\n            d3.selectAll('#tooltiptextonco').remove();\n        };\n\n        // highlight\n        for (let i = 0; i < genes.length; i++) {\n            for (let j = 0; j < hmap_patients.length; j++) {\n                highlight.append('rect')\n                    .attr('class', `oprint-hlight-${hmap_patients[j]} oprint-hlight-${genes[i]}`)\n                    .attr('width', rect_width - 2)\n                    .attr('height', rect_height - 2)\n                    .attr('fill', 'black')\n                    .attr('x', j * (rect_width))\n                    .attr('y', i * (rect_height))\n                    .style('opacity', 0)\n                    .on('mouseover', () => {\n                        // calling createToolTip function passing pageX and pageY\n                        const mutationToolTip = (data_mut.length !== 0) && data_mut[i] !== undefined && data_mut[i][hmap_patients[j]];\n                        const cnvToolTip = (data_cnv.length !== 0) && data_cnv[i] !== undefined && data_cnv[i][hmap_patients[j]];\n                        createToolTip(d3.event.pageX, d3.event.pageY, genes[i], hmap_patients[j], mutationToolTip, cnvToolTip);\n\n                        // highlight\n                        d3.selectAll(`.hmap-hlight-${hmap_patients[j]}`)\n                            .style('opacity', 0.2);\n                        d3.selectAll(`.oprint-hlight-${hmap_patients[j]}`)\n                            .style('opacity', 0.2);\n                        d3.selectAll(`.hlight-space-${hmap_patients[j]}`)\n                            .style('opacity', 0.2);\n                    })\n                    .on('mouseout', () => {\n                        // hide tooltip\n                        hideToolTip();\n\n                        // highlight\n                        d3.selectAll(`.hmap-hlight-${hmap_patients[j]}`)\n                            .style('opacity', 0);\n                        d3.selectAll(`.oprint-hlight-${hmap_patients[j]}`)\n                            .style('opacity', 0);\n                        d3.selectAll(`.hlight-space-${hmap_patients[j]}`)\n                            .style('opacity', 0);\n                    });\n            }\n        }\n    }\n\n    // ranking the oncopring based on the globalPatients passed from heatmap.\n    rankOncoprintBasedOnHeatMapChanges(value) {\n        const { globalPatients } = value;\n        const { className } = this.props;\n        if (globalPatients.length > 0) {\n            d3.select(`#oncoprint-${className}`).remove();\n            this.Oncoprint(globalPatients);\n        }\n    }\n\n    // ranking oncoprint based on the gene clicked.\n    // eslint-disable-next-line class-methods-use-this\n    rankOncoprint(gene, data) {\n        // array for new data.\n        const newData = {};\n        // function to return the type.\n        const retunType = (i) => {\n            let type = {};\n            switch (i) {\n            case 0:\n                type = mutationTypeMap;\n                break;\n            case 1:\n                type = cnaMap;\n                break;\n            case 2:\n                type = rnaMap;\n                break;\n            default:\n                type = mutationTypeMap;\n            }\n            return type;\n        };\n        // function to check if it's a negative number or not.\n        const isNegativeCheck = (row) => {\n            let val = '';\n            const { threshold } = this.props;\n            if (Number(row) > threshold) {\n                val = 'positive';\n            } else if (Number(row) < -threshold) {\n                val = 'negative';\n            } else {\n                val = 'not available';\n            }\n            return val;\n        };\n        // this function will create/push data to the newData object.\n        const createNewData = (patient, priority) => {\n            if (!newData[patient] || (newData[patient] && newData[patient].priority === 16)) {\n                const total = 1;\n                newData[patient] = {\n                    priority,\n                    total,\n                };\n            } else if (newData[patient].priority < priority && priority !== 16) {\n                const total = newData[patient].total + 1;\n                newData[patient].total = total;\n            } else if (newData[patient] && newData[patient].priority > priority && priority !== 16) {\n                const total = newData[patient].total + 1;\n                newData[patient].total = total;\n                newData[patient].priority = priority;\n            }\n        };\n\n        // loop through all the data types and push relevant data into the array.\n        data.forEach((val, i) => {\n            // type from the function.\n            const type = retunType(i);\n            // loop through each of the data value.\n            val.forEach((row) => {\n                // if the gene id matches the clicked gene.\n                if (row.gene_id === gene) {\n                    Object.keys(row).forEach((patient, j) => {\n                        if ((isNaN(row[patient]) || i === 1) && patient !== 'gene_id') {\n                            const { priority } = type[row[patient].toLowerCase()];\n                            createNewData(patient, priority);\n                        } else if (Number(row[patient])) {\n                            // check for the value of the number.\n                            const isNegative = isNegativeCheck(row[patient]);\n                            const { priority } = type[isNegative];\n                            createNewData(patient, priority);\n                        } else if ((Number(row[patient]) === 0 || row[patient] === '') && typeof (newData[patient]) === 'undefined') {\n                            newData[patient] = {\n                                priority: 16,\n                                total: 1,\n                            };\n                        }\n                    });\n                }\n            });\n        });\n\n        // sorting the array based on priority.\n        const sortableArray = [];\n        Object.keys(newData).forEach((val) => {\n            sortableArray.push([val, newData[val].priority, newData[val].total]);\n        });\n        const sortedData = sortableArray.sort((a, b) => (a[1] - b[1]));\n\n        // final list of the patients in the sorted order.\n        const sortedPatients = sortedData.map((patient) => patient[0]);\n\n        // grabbing the difference from the list of initial patients and sorted patients.\n        // pushing it to the sortedPatients list.\n        const { hmap_patients } = this.props;\n        const diff = hmap_patients.filter((x) => !sortedPatients.includes(x));\n        diff.forEach((val) => sortedPatients.push(val));\n\n        // setting the patients in the context.\n        const { setPatients } = this.context;\n        setPatients(sortedPatients);\n\n        // creating a new oncoprint based on the sorted patients list.\n        const { className } = this.props;\n        d3.select(`#oncoprint-${className}`).remove();\n        this.Oncoprint(sortedPatients);\n\n        // making the circle visible on click of the drug.\n        d3.select(`#circle-${gene.replace(/\\s/g, '').replace(/\\+/g, '')}`)\n            .style('visibility', 'visible');\n    }\n\n    render() {\n        return (\n            // eslint-disable-next-line no-return-assign\n            <div>\n                <div ref={(node) => { this.node = node; }} className=\"oprint-wrapper\" />\n                <PatientConsumer>{(value) => { this.rankOncoprintBasedOnHeatMapChanges(value); }}</PatientConsumer>\n            </div>\n        );\n    }\n}\n\nOncoprint.contextType = PatientContext;\n\nOncoprint.propTypes = {\n    className: PropTypes.string.isRequired,\n    dimensions: PropTypes.shape({\n        height: PropTypes.number,\n        width: PropTypes.number,\n    }).isRequired,\n    margin: PropTypes.shape({\n        top: PropTypes.number,\n        right: PropTypes.number,\n        bottom: PropTypes.number,\n        left: PropTypes.number,\n    }).isRequired,\n    threshold: PropTypes.number.isRequired,\n    hmap_patients: PropTypes.arrayOf(PropTypes.string).isRequired,\n    genes_mut: PropTypes.arrayOf(PropTypes.string).isRequired,\n    genes_rna: PropTypes.arrayOf(PropTypes.string).isRequired,\n    genes_cnv: PropTypes.arrayOf(PropTypes.string).isRequired,\n    patient_mut: PropTypes.arrayOf(PropTypes.string).isRequired,\n    patient_rna: PropTypes.arrayOf(PropTypes.string).isRequired,\n    patient_cnv: PropTypes.arrayOf(PropTypes.string).isRequired,\n    data_mut: PropTypes.arrayOf(PropTypes.object).isRequired,\n    data_rna: PropTypes.arrayOf(PropTypes.object).isRequired,\n    data_cnv: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\n\nexport default Oncoprint;\n","import React from 'react';\nimport { HashLoader } from 'react-spinners';\nimport { css } from '@emotion/core';\n\n\nconst override = css`\n    display: block;\n    margin: auto;\n    margin-top: 300px;\n`;\n\n\nconst SpinnerUtil = (props) => {\n    const { loading } = props;\n    return loading ? (\n        <div style={{ height: '500px', width: '1300px' }}>\n            <HashLoader\n                css={override}\n                sizeUnit=\"px\"\n                size={100}\n                color=\"#cd5686\"\n            />\n        </div>\n    ) : (<div />);\n};\n\nexport default SpinnerUtil;\n","/* eslint-disable no-shadow */\n/* eslint-disable camelcase */\n/* eslint-disable react/destructuring-assignment */\nimport React from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport Oncoprint from './Oncoprint';\nimport Spinner from '../SpinnerUtil/Spinner';\n\nclass OncoprintData extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dataset: 0,\n            threshold: 2,\n            hmap_patients: [],\n            genes_mut: [],\n            genes_rna: [],\n            genes_cnv: [],\n            patient_mut: [],\n            patient_rna: [],\n            patient_cnv: [],\n            data_mut: [],\n            data_rna: [],\n            data_cnv: [],\n            dimensions: {},\n            margin: {},\n            loading: true,\n        };\n        this.updateResults = this.updateResults.bind(this);\n    }\n\n    static getDerivedStateFromProps(props) {\n        const { dataset } = props;\n        return {\n            dataset,\n        };\n    }\n\n    componentDidMount() {\n        if (this.state.dataset > 0) {\n            const mutation_data = axios.get(`/api/v1/mutation/${this.state.dataset}`, { headers: { Authorization: localStorage.getItem('user') } });\n            const rnaseq_data = axios.get(`/api/v1/rnaseq/${this.state.dataset}`, { headers: { Authorization: localStorage.getItem('user') } });\n            const cnv_data = axios.get(`/api/v1/cnv/${this.state.dataset}`, { headers: { Authorization: localStorage.getItem('user') } });\n\n            Promise.all([mutation_data, rnaseq_data, cnv_data])\n                .then((response) => {\n                    this.updateResults(response);\n                });\n        }\n    }\n\n    updateResults(onco) {\n        // total patients.\n        const dataset = onco[0].data;\n        // grabbing the total patients from hmap.\n        let hmap_patients = [];\n        hmap_patients = dataset.pop();\n\n        // this is according to the object and heatmap sequence.\n        onco.forEach((value, i) => { // can't break in forEach use for if wanna break.\n            const dataObject = {};\n            if (value.data.length > 1) {\n                hmap_patients.forEach((patient) => {\n                    if (!onco[i].data[0][patient]) {\n                        dataObject[patient] = '';\n                    } else {\n                        dataObject[patient] = onco[i].data[0][patient];\n                    }\n                });\n                hmap_patients = Object.keys(dataObject);\n            }\n        });\n\n        // setting patients genes and data for\n        // each of mutation, cnv and rna (given they are present)\n        const patient = {};\n        const genes = {};\n        const data = {};\n        const genomics = onco[2].data.length > 1 ? ['Mutation', 'RNASeq', 'CNV'] : ['RNASeq'];\n\n        genomics.forEach((value) => {\n            let i = 0;\n            if (value === 'Mutation') {\n                i = 0;\n            } else if (value === 'RNASeq') {\n                i = 1;\n            } else if (value === 'CNV') {\n                i = 2;\n            }\n            const val = value.substring(0, 3).toLowerCase();\n\n            // setting patients\n            const patient_id = Object.keys(onco[i].data[0]).filter((value) => {\n                let return_value = '';\n                if (value !== 'gene_id') {\n                    return_value = value;\n                }\n                return return_value;\n            });\n\n            patient[`patient_${val}`] = patient_id;\n\n            // genes\n            const gene_id = onco[i].data.map((data) => data.gene_id);\n            genes[`genes_${val}`] = gene_id;\n\n            // data\n            data[`data_${val}`] = onco[i].data;\n        });\n\n        this.setState({\n            hmap_patients,\n            patient_mut: patient.patient_mut ? patient.patient_mut : [],\n            patient_rna: patient.patient_rna ? patient.patient_rna : [],\n            patient_cnv: patient.patient_cnv ? patient.patient_cnv : [],\n            genes_mut: genes.genes_mut ? genes.genes_mut : [],\n            genes_rna: genes.genes_rna ? genes.genes_rna : [],\n            genes_cnv: genes.genes_cnv ? genes.genes_cnv : [],\n            data_mut: data.data_mut ? data.data_mut : [],\n            data_rna: data.data_rna ? data.data_rna : [],\n            data_cnv: data.data_cnv ? data.data_cnv : [],\n            dimensions: { height: 35, width: 20 },\n            margin: {\n                top: 50, right: 200, bottom: 0, left: 250,\n            },\n            loading: false,\n        });\n    }\n\n\n    render() {\n        const {\n            genes_mut, genes_rna, genes_cnv,\n            patient_mut, patient_rna, patient_cnv,\n            data_mut, data_rna, data_cnv,\n            dimensions, margin, threshold,\n            hmap_patients, loading,\n        } = this.state;\n\n        return (\n            <div className=\"wrapper\" style={{ margin: 'auto' }}>\n                {\n                    (data_mut.length || data_cnv.length || data_rna.length)\n                        ? (\n                            <Oncoprint\n                                className=\"oprint\"\n                                dimensions={dimensions}\n                                margin={margin}\n                                threshold={threshold}\n                                hmap_patients={hmap_patients}\n                                genes_mut={genes_mut}\n                                genes_rna={genes_rna}\n                                genes_cnv={genes_cnv}\n                                patient_mut={patient_mut}\n                                patient_rna={patient_rna}\n                                patient_cnv={patient_cnv}\n                                data_mut={data_mut}\n                                data_rna={data_rna}\n                                data_cnv={data_cnv}\n                            />\n                        )\n                        : (<div className=\"oprint-wrapper\"><Spinner loading={loading} /></div>)\n                }\n            </div>\n        );\n    }\n}\n\nOncoprintData.propTypes = {\n    dataset: PropTypes.string.isRequired,\n};\n\n\nexport default OncoprintData;\n","import React from 'react';\n\n\nconst styles = {\n    color: '#3453b0',\n    fontSize: 18,\n    textAlign: 'center',\n    paddingTop: '30px',\n    minHeight: '50px',\n    bottom: '0',\n    right: '0',\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'absolute',\n    minWidth: '100vw',\n    backgroundColor: 'rgb(255,255,255,0.8)',\n    fontFamily: 'Raleway, sans-serif',\n\n};\n\n\nconst Footer = () => (\n    <div style={styles}>\n        BHKLab 2019\n    </div>\n);\n\nexport default Footer;\n","import React from 'react';\nimport HeatMapData from '../HeatMap/HeatMapData';\nimport OncoprintData from '../Oncoprint/OncoprintData';\nimport Footer from '../Footer/Footer';\nimport { PatientProvider } from '../Context/PatientContext';\n\nclass Dataset extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.setPatients = (patients) => {\n            this.setState({\n                globalPatients: patients,\n            });\n        };\n\n        this.state = {\n            dataset: 0,\n            globalPatients: [],\n            setPatients: this.setPatients,\n        };\n    }\n\n    // new component life cycle method (mounting).\n    static getDerivedStateFromProps(props) {\n        const { match } = props;\n        const datasetParam = match.params.id;\n        return {\n            dataset: datasetParam,\n        };\n    }\n\n    render() {\n        const { dataset, globalPatients, setPatients } = this.state;\n        const providerData = {\n            globalPatients,\n            setPatients,\n        };\n        return (\n            <div>\n                <PatientProvider value={providerData}>\n                    <HeatMapData\n                        dataset={dataset}\n                    />\n                    <OncoprintData\n                        dataset={dataset}\n                    />\n                </PatientProvider>\n                <Footer />\n            </div>\n        );\n    }\n}\n\n\nexport default Dataset;\n","/* eslint-disable func-names */\nimport React from 'react';\nimport * as d3 from 'd3';\nimport PropTypes from 'prop-types';\n\n\nclass DonutChart extends React.Component {\n    constructor(props) {\n        super(props);\n        this.DonutChart = this.DonutChart.bind(this);\n        this.makeDonutChart = this.makeDonutChart.bind(this);\n    }\n\n    componentDidMount() {\n        // this.DonutChart()\n    }\n\n    componentDidUpdate() {\n        this.DonutChart();\n    }\n\n    DonutChart() {\n        const { dimensions } = this.props;\n        const { margin } = this.props;\n        const { node } = this;\n        const { data } = this.props;\n        const { height } = dimensions;\n        const { width } = dimensions;\n        const { left } = margin;\n        const { top } = margin;\n        const { bottom } = margin;\n        const { right } = margin;\n        this.makeDonutChart(node, data, height, width, left, top, bottom, right);\n    }\n\n    // data should be like => {id: 'Gastric Cancer', value: 1007}\n    makeDonutChart(node, data, height, width, left, top, bottom, right) {\n        // console.log(data)\n        const { chartId } = this.props;\n\n        /** SETTING SVG ATTRIBUTES * */\n        d3.select('svg').remove();\n        // make the SVG element.\n        const svg = d3.select(node)\n            .append('svg')\n            .attr('id', `donutchart-${chartId}`)\n            .attr('xmlns', 'http://wwww.w3.org/2000/svg')\n            .attr('xmlns:xlink', 'http://wwww.w3.org/1999/xlink')\n            .attr('height', height + top + bottom)\n            .attr('width', width + left + right)\n            .append('g')\n            .attr('transform', `translate(${left},${top})`);\n\n        /* Skeleton for the pie/donut chart */\n        // structure of the chart\n        const skeleton = svg.append('g')\n            .attr('id', 'skeleton');\n\n        /* Donut Chart */\n\n        // color scheme for the pie/donut chart using the ordinal scale.\n\n        const colors = ['#E64B35FF', '#4DBBD5FF', '#00A087FF', '#3C5488FF', '#F39B7FFF', '#8491B4FF', '#91D1C2FF', '#B09C85FF',\n            '#0073C2FF', '#868686FF', '#CD534CFF', '#7AA6DCFF', '#003C67FF', '#3B3B3BFF', '#A73030FF', '#4A6990FF',\n            '#00468BBF', '#42B540BF', '#0099B4BF', '#925E9FBF', '#FDAF91BF', '#AD002ABF', '#ADB6B6BF',\n        ];\n\n        const color = d3.scaleOrdinal()\n            .domain(data)\n            .range(colors);\n\n\n        /* div element for the tooltip */\n        // create a tooltip\n        const tooltip = d3.select(node)\n            .append('div')\n            .style('position', 'absolute')\n            .style('visibility', 'hidden')\n            .style('border', 'solid')\n            .style('border-width', '2px')\n            .style('border-radius', '5px')\n            .style('padding', '5px')\n            .attr('top', 10)\n            .attr('left', 20);\n\n\n        /* Arc for the main pie chart and label arc */\n        const { arcRadius } = this.props;\n        // arc generator\n        const arc = d3.arc()\n            .outerRadius(arcRadius.outerRadius)\n            .innerRadius(arcRadius.innerRadius);\n\n        // this is used to set the labels\n        const labelArc = d3.arc()\n            .outerRadius(arcRadius.outerRadius - 20)\n            .innerRadius(arcRadius.innerRadius + 10);\n\n        /* Pie/Donut chart layout */\n\n        // pie generator/layout\n        const pie = d3.pie()\n            .sort(null)\n            .value((d) => d.value);\n\n        // this will send the data to the pie generator and appending the class arc.\n        const arcs = skeleton.selectAll('.arc')\n            .data(() => pie(data))\n            .enter()\n            .append('a')\n            .attr('xlink:href', (d, i) => {\n                if (chartId === 'donut_datasets') {\n                    return `/dataset/${data[i].parameter}`;\n                }\n            })\n            .append('g')\n            .attr('class', (d) => `${(d.data.id).replace(/\\s/g, '').replace(/[(-)]/g, '')}_Arc`);\n\n        // here we are appending path and use of d element to create the path.\n        const piearc = arcs.append('path')\n            .attr('d', arc)\n            .attr('fill', (d) => color(d.data.value))\n            .attr('stroke', 'black')\n            .style('stroke-width', '.5px');\n\n        function pieTween(b) {\n            b.innerRadius = 0;\n            const i = d3.interpolate({ startAngle: 0, endAngle: 0 }, b);\n            return function (t) {\n                return arc(i(t));\n            };\n        }\n        // transition of the arcs for the pie chart itself.\n        piearc.transition()\n            .ease(d3.easeLinear)\n            .duration(500)\n            .attrTween('d', pieTween);\n\n        // this is a very basic tooltip.\n        /*\n                piearc.append('title')\n                    .text((d) => {\n                        return 'value is ' + d.data.value\n                    })\n                */\n        /* event listeners */\n\n        const mouseover = function (d) {\n            const selection = (d.data.id).replace(/\\s/g, '').replace(/[(-)]/g, '');\n            d3.select(`.${selection}_Arc`)\n                .transition()\n                .duration(300)\n                .style('opacity', 0.4)\n                .style('cursor', 'pointer');\n            // tooltip on mousever setting the div to visible.\n            tooltip\n                .style('visibility', 'visible');\n        };\n\n        const mousemove = function (d) {\n            const selection = (d.data.id).replace(/\\s/g, '').replace(/[(-)]/g, '');\n            d3.select(`.${selection}_Arc`)\n                .transition()\n                .duration(300)\n                .style('opacity', 0.4)\n                .style('cursor', 'pointer');\n            // tooltip grabbing event.pageX and event.pageY\n            // and set color according to the ordinal scale.\n            const value = ` (${d.data.value})`;\n            tooltip\n                .text([d.data.id + value])\n                .style('left', `${d3.event.pageX + 10}px`)\n                .style('top', `${d3.event.pageY + 10}px`)\n                .style('color', 'white')\n                .style('background-color', color(d.data.value));\n        };\n\n        const mouseout = function (d) {\n            const selection = (d.data.id).replace(/\\s/g, '').replace(/[(-)]/g, '');\n            d3.select(`.${selection}_Arc`)\n                .transition()\n                .duration(300)\n                .style('opacity', 1)\n                .style('cursor', 'pointer');\n            // tooltip on mouseout.\n            tooltip\n                .style('visibility', 'hidden')\n                .style('background-color', 'black');\n        };\n\n        // transition while mouseover and mouseout on each slice.\n        piearc.on('mouseover', (d) => {\n            mouseover(d);\n        })\n            .on('mousemove', (d) => {\n                mousemove(d);\n            })\n            .on('mouseout', (d) => {\n                mouseout(d);\n            });\n\n        /* Label with event listeners */\n\n        // append the text labels.\n        if (chartId !== 'donut_drugs' && chartId !== 'donut_datasets' && chartId !== 'donut_tissues') {\n            arcs.append('text')\n                .attr('transform', (d) => `translate(${labelArc.centroid(d)})`)\n                .attr('dy', '0.35em')\n                .text((d) => {\n                    if (d.data.id === 'Non-small Cell Lung Carcinoma') {\n                        return 'NSCLC';\n                    } return d.data.id;\n                })\n            // .attr('font-weight', 'bold')\n                .style('text-anchor', 'middle')\n                .style('font-size', 14)\n                .attr('fill', 'white')\n                .on('mouseover', (d) => {\n                    mouseover(d);\n                })\n                .on('mousemove', (d) => {\n                    mousemove(d);\n                })\n                .on('mouseout', (d) => {\n                    mouseout(d);\n                });\n        }\n\n\n        /**   Legends for the Donut Chart * */\n\n        // small side rectangles or legends for the donut chart.\n        const donutRect = svg.append('g')\n            .attr('id', 'donut_small_rect');\n\n        donutRect.selectAll('rect')\n            .data(data)\n            .enter()\n            .append('rect')\n            .attr('x', (width) - 290)\n            .attr('y', (d, i) => ((30 * i) - (data.length * 15)))\n            .attr('width', 20)\n            .attr('height', 20)\n            .attr('fill', (d) => color(d.value));\n\n        donutRect.selectAll('text')\n            .data(data)\n            .enter()\n            .append('text')\n            .attr('x', (width) - 250)\n            .attr('y', (d, i) => ((30 * i) - (data.length * 15)) + 15)\n            .attr('fill', (d) => color(d.value))\n            .text((d) => `${d.id.charAt(0).toUpperCase() + d.id.slice(1)} (${d.value})`);\n    }\n\n    render() {\n        return (\n            <div\n                ref={(node) => this.node = node}\n                className=\"donut-chart\"\n            />\n        );\n    }\n}\n\n\nDonutChart.propTypes = {\n    dimensions: PropTypes.shape({\n        height: PropTypes.number,\n        width: PropTypes.number,\n    }).isRequired,\n    margin: PropTypes.shape({\n        top: PropTypes.number,\n        right: PropTypes.number,\n        bottom: PropTypes.number,\n        left: PropTypes.number,\n    }).isRequired,\n    chartId: PropTypes.string.isRequired,\n    data: PropTypes.arrayOf(PropTypes.object).isRequired,\n    arcRadius: PropTypes.shape({\n        innerRadius: PropTypes.number,\n        outerRadius: PropTypes.number,\n    }).isRequired,\n};\n\nexport default DonutChart;\n","import styled from 'styled-components';\n\n\nconst TableWrapper = styled.div`\n    padding:10px 20px 30px 20px;\n    font-family: 'Raleway', sans-serif;\n\n    .ReactTable * {\n        box-sizing: border-box;\n    }\n\n    .ReactTable .rt-table {\n        align-items: stretch;\n        width: 100%;\n        border-collapse: collapse;\n        overflow: auto\n    }\n\n    .rt-thead.-header {\n        border-bottom: 1px solid rgba(0,0,0,0.1);\n    }\n\n    .ReactTable.-highlight .rt-tbody .rt-tr:not(.-padRow):hover {\n        background: #EAEFF9\n    }\n\n    .ReactTable .rt-thead {\n        color:  #3453b0;\n        font-size: 18px;\n        font-weight: 600;\n        box-shadow:none !important;\n    }\n\n    .ReactTable .rt-tbody{\n        color:  #3453b0;\n        font-size: 16px;\n        box-shadow:none !important;\n    }\n\n    .-previous, .-next, .-btn {\n      background: #3453b0;\n      color:white !important;\n    }\n\n    .-pagination, .pagination-bottom {\n        box-shadow:none !important;\n        border-top:1px solid rgba(0,0,0,0.1) !important;\n    }\n\n    .ReactTable .-pagination .-pageJump input, input{\n        color: #3453b0;\n        box-shadow:none !important;\n        background: #EAEFF9 !important;\n    }\n\n    .ReactTable .-pagination select {\n        color: #3453b0;\n    }\n`;\n\n\nexport default TableWrapper;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport ReactTable from 'react-table';\nimport TableWrapper from '../Drug/DrugTableStyle';\nimport Spinner from '../SpinnerUtil/Spinner';\nimport 'react-table/react-table.css';\n\nconst h1Style = {\n    color: '#3453b0',\n    margin: '50px',\n};\n\nconst DatasetTable = (props) => {\n    const { data, dataLength } = props;\n    const loading = !(dataLength > 0);\n\n    const columns = [\n        {\n            Header: 'Dataset Name',\n            accessor: 'id',\n            minWidth: 180,\n            search: false,\n            sortable: false,\n            Cell: (row) => (\n                <Link to={`/dataset/${row.original.parameter}`} style={{ color: '#3453b0', textDecoration: 'none' }}>\n                    {row.original.id}\n                </Link>\n            ),\n        },\n        {\n            Header: 'Number of Patients',\n            accessor: 'value',\n            minWidth: 120,\n        },\n        {\n            Header: 'Number of Models',\n            accessor: 'totalModels',\n            minWidth: 120,\n        },\n    ];\n\n    return (\n        loading ? (<Spinner loading={loading} />)\n            : (\n                <TableWrapper className=\"wrap\">\n                    <h1 style={h1Style}> List of Datasets </h1>\n                    <ReactTable\n                        data={data}\n                        columns={columns}\n                        className=\"-highlight\"\n                        showPagination={false}\n                        pageSize={dataLength > 0 ? dataLength + 1 : 7}\n                    />\n                </TableWrapper>\n            )\n    );\n};\n\nexport default DatasetTable;\n","import React from 'react';\nimport axios from 'axios';\nimport styled from 'styled-components';\nimport DonutChart from '../DonutChart/DonutChart';\nimport Footer from '../Footer/Footer';\nimport GlobalStyles from '../../GlobalStyles';\nimport TopNav from '../TopNav/TopNav';\nimport DatasetTable from './DatasetTable';\n\nconst Wrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: 200px;\n    color: #3453b0;\n    margin-bottom: 100px;\n\n    h1 {\n        font-family:'Raleway', sans-serif;\n        font-weight:700;\n        text-align:center;\n    }\n`;\n\nclass DatasetDonut extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: [],\n            dimensions: {},\n            margin: {},\n            arc: {},\n        };\n    }\n\n    componentDidMount() {\n        axios.get('/api/v1/dataset/models', { headers: { Authorization: localStorage.getItem('user') } })\n            .then((response) => {\n                const data = response.data.data.map((element) => ({\n                    id: element.dataset_name,\n                    value: element.patient_id,\n                    parameter: element.dataset_id,\n                    totalModels: element.totalModels,\n                }));\n                this.setState({\n                    data,\n                    dimensions: { width: 650, height: 250 },\n                    margin: {\n                        top: 320, right: 100, bottom: 100, left: 380,\n                    },\n                    arc: { outerRadius: 260, innerRadius: 150 },\n                });\n            });\n    }\n\n    render() {\n        const {\n            data, arc,\n            dimensions, margin,\n        } = this.state;\n        return (\n            <div>\n                <TopNav />\n                <GlobalStyles />\n                <Wrapper>\n                    <div className=\"donut-wrapper\">\n                        <h1> Number of Patients Per Dataset </h1>\n                        <DonutChart\n                            dimensions={dimensions}\n                            margin={margin}\n                            data={data}\n                            arcRadius={arc}\n                            chartId=\"donut_datasets\"\n                        />\n                    </div>\n                    <div className=\"donut-wrapper\">\n                        <DatasetTable\n                            data={data}\n                            dataLength={data.length}\n                        />\n                    </div>\n                </Wrapper>\n                <Footer />\n            </div>\n        );\n    }\n}\n\n\nexport default DatasetDonut;\n","import React from 'react';\nimport GlobalStyles from '../../GlobalStyles';\nimport TopNav from '../TopNav/TopNav';\n\n\nconst Documentation = () => (\n    <div>\n        <TopNav />\n        <GlobalStyles />\n        <div className=\"wrapper\">\n            <div className=\"doc-wrapper\">\n                <h1> Documentation will be added Later. </h1>\n            </div>\n        </div>\n    </div>\n);\n\n\nexport default Documentation;\n","import React from 'react';\nimport axios from 'axios';\nimport ReactTable from 'react-table';\nimport TableWrapper from './DrugTableStyle';\nimport pubchem from '../../images/pclogo_220.gif';\nimport Spinner from '../SpinnerUtil/Spinner';\nimport 'react-table/react-table.css';\n\nconst h1Style = {\n    color: '#3453b0',\n    margin: '50px',\n};\n\nclass DrugTable extends React.Component {\n    constructor(props) {\n        super(props);\n        // setting the states for the data.\n        this.state = {\n            data: [],\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        axios.get('/api/v1/drugs', { headers: { Authorization: localStorage.getItem('user') } })\n            .then((response) => {\n                this.setState({\n                    data: response.data,\n                    loading: false,\n                });\n            });\n    }\n\n    render() {\n        const { data, loading } = this.state;\n\n        // adding image to each of the object in array.\n        data.forEach((val) => {\n            val.img = pubchem;\n        });\n\n        // to capitalize first alphabet.\n        const capitalize = (s) => {\n            if (typeof s !== 'string') return '';\n            return s.charAt(0).toUpperCase() + s.slice(1);\n        };\n\n        const columns = [\n            {\n                Header: 'Drug Name',\n                accessor: 'drug_name',\n                minWidth: 180,\n                Cell: (props) => capitalize(props.value),\n                sortable: true,\n            },\n            {\n                Header: 'Standard Name',\n                accessor: 'standard_name',\n                minWidth: 150,\n                Cell: (props) => capitalize(props.value),\n                sortable: true,\n            },\n            {\n                Header: 'Targets',\n                accessor: 'class',\n                minWidth: 150,\n                Cell: (props) => capitalize(props.value),\n                sortable: true,\n            },\n            {\n                Header: 'Class',\n                accessor: 'class_name',\n                minWidth: 220,\n                Cell: (props) => capitalize(props.value),\n                sortable: true,\n            },\n            {\n                Header: 'Source',\n                Cell: (val) => {\n                    const pubchemLink = val.original.source.split(' + ');\n                    const { length } = pubchemLink;\n                    const link = [];\n                    let isNa = '';\n\n                    // function checks if any of the value in the pubchemlink array is NA.\n                    pubchemLink.forEach((row) => {\n                        if (row === 'NA') {\n                            isNa = true;\n                        }\n                    });\n\n                    // looping through the pubchemLink and adding image and url based on the data.\n                    pubchemLink.forEach((row, i) => {\n                        if (row !== 'NA') {\n                            link.push(\n                                <span key={row}>\n                                    <a\n                                        className=\"hover\"\n                                        target=\"_blank\"\n                                        rel=\"noopener noreferrer\"\n                                        href={`${row}`}\n                                    >\n                                        <img height={38} src={val.original.img} alt=\"pubchem links\" />\n                                    </a>\n                                    { ((length > i + 1) && !isNa) ? <sup> + </sup> : ''}\n                                </span>,\n                            );\n                        }\n                    });\n                    return link;\n                },\n                sortable: false,\n            },\n        ];\n\n        return (\n            loading\n                ? (<Spinner loading={loading} />)\n                : (\n                    <TableWrapper className=\"wrap\">\n                        <h1 style={h1Style}> List of Drugs </h1>\n                        <ReactTable\n                            data={data}\n                            columns={columns}\n                            className=\"-highlight\"\n                            defaultPageSize={10}\n                            filterable\n                        />\n                    </TableWrapper>\n                )\n        );\n    }\n}\n\nexport default DrugTable;\n","import React from 'react';\nimport axios from 'axios';\nimport styled from 'styled-components';\nimport DonutChart from '../DonutChart/DonutChart';\nimport Footer from '../Footer/Footer';\nimport DrugTable from './DrugTable';\nimport GlobalStyles from '../../GlobalStyles';\nimport TopNav from '../TopNav/TopNav';\n\nconst Wrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: 200px;\n    margin-bottom: 100px;\n    color: #3453b0\n\n    h1 {\n        font-family:'Raleway', sans-serif;\n        font-weight:700;\n        text-align:center;\n    }\n`;\n\nclass DonutDrug extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: [],\n            dimensions: {},\n            margin: {},\n            arc: {},\n        };\n    }\n\n    componentDidMount() {\n        const newValues = [];\n        // passing on token as the header to the api call.\n        axios.get('/api/v1/drug/class', { headers: { Authorization: localStorage.getItem('user') } })\n            .then((response) => {\n                response.data.data.forEach((data) => {\n                    const value = {};\n                    if (data.class_name !== '') {\n                        value.id = (data.class_name).replace('\"', '').replace('/', '_');\n                        value.value = data.model_ids;\n                        newValues.push(value);\n                    }\n                });\n                this.setState({\n                    data: newValues,\n                    dimensions: { width: 650, height: 250 },\n                    margin: {\n                        top: 320, right: 100, bottom: 100, left: 380,\n                    },\n                    arc: { outerRadius: 260, innerRadius: 150 },\n                });\n            });\n    }\n\n    render() {\n        const {\n            data, arc,\n            dimensions, margin,\n        } = this.state;\n        return (\n            <div>\n                <TopNav />\n                <GlobalStyles />\n                <Wrapper>\n                    <div className=\"donut-wrapper\">\n                        <h1> Number of Models Per Drug class </h1>\n                        <DonutChart\n                            dimensions={dimensions}\n                            margin={margin}\n                            chartId=\"donut_drugs\"\n                            data={data}\n                            arcRadius={arc}\n                        />\n                    </div>\n                    <div className=\"donut-wrapper\">\n                        <DrugTable />\n                    </div>\n                </Wrapper>\n                <Footer />\n            </div>\n        );\n    }\n}\n\nexport default DonutDrug;\n","import React from 'react'\nimport DonutChart from './DonutChart'\nimport axios from 'axios'\n\n// ************ This code is not being used anywhere for now  ************//\nclass DonutPatient extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            data : []\n        }\n    }\n\n    componentDidMount() {\n        let new_values = []\n        const promise1 = axios.get(`/api/v1/getinboth`);\n        const promise2 = axios.get(`/api/v1/getonlydrug`);\n        const promise3 = axios.get(`/api/v1/getonlysequencing`);\n\n        Promise.all([promise1, promise2, promise3])\n             .then((response) => {\n                let i = 1;\n                response.forEach((data) => {\n                    if(data.data.length !== 0) {\n                        let value = {}\n                        if (i===1) {\n                            value['id'] = 'Sequence and Drug Data'\n                        } else if (i===2) {\n                            value['id'] = 'Only Drug Data'\n                        } else if (i===3) {\n                            value['id'] = 'Only Sequence Data'\n                        }\n                        i++;\n                        value['value'] = data.data.length;\n                        new_values.push(value)\n                    }\n                })\n                this.setState({\n                    data : new_values\n                })\n             })\n    }\n\n    dimensions = {\n        width: 130,\n        height: 80\n    }\n\n    margin = {\n        top: 220,\n        right: 100,\n        bottom: 100,\n        left: 250\n    }\n\n    arc = {\n        outerRadius: 160,\n        innerRadius: 70\n    }\n\n    chartId = 'donut_patient'\n\n    render() {\n        return (\n            <div className='DonutPatient'>\n                <DonutChart \n                    dimensions = {this.dimensions} \n                    margin = {this.margin} \n                    chartId = {this.chartId} \n                    data = {this.state.data}\n                    arc = {this.arc}\n                />\n            </div>\n        )\n    }\n}\n\nexport default DonutPatient","import React from 'react';\nimport axios from 'axios';\nimport styled from 'styled-components';\nimport DonutChart from '../DonutChart/DonutChart';\nimport Footer from '../Footer/Footer';\nimport GlobalStyles from '../../GlobalStyles';\nimport TopNav from '../TopNav/TopNav';\n\nconst Wrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: 200px;\n    color: #3453b0;\n    margin-bottom: 100px;\n\n    h1 {\n        font-family:'Raleway', sans-serif;\n        font-weight:700;\n        text-align:center;\n    }\n`;\n\n\nclass DonutTissue extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: [],\n            dimensions: {},\n            margin: {},\n            arc: {},\n        };\n    }\n\n    componentDidMount() {\n        const newValues = [];\n        axios.get('/api/v1/tissue/models', { headers: { Authorization: localStorage.getItem('user') } })\n            .then((response) => {\n                response.data.data.forEach((data) => {\n                    const value = {};\n                    value.id = data.tissue_name;\n                    value.value = data.total;\n                    newValues.push(value);\n                });\n                this.setState({\n                    data: newValues,\n                    dimensions: { width: 600, height: 300 },\n                    margin: {\n                        top: 320, right: 100, bottom: 100, left: 380,\n                    },\n                    arc: { outerRadius: 260, innerRadius: 150 },\n                });\n            });\n    }\n\n\n    render() {\n        const {\n            data, arc,\n            dimensions, margin,\n        } = this.state;\n        return (\n            <div>\n                <TopNav />\n                <GlobalStyles />\n                <Wrapper>\n                    <div className=\"donut-wrapper\">\n                        <h1> PDXs Per Tissue Type </h1>\n                        <DonutChart\n                            dimensions={dimensions}\n                            margin={margin}\n                            chartId=\"donut_tissues\"\n                            data={data}\n                            arcRadius={arc}\n                        />\n                    </div>\n                </Wrapper>\n                <Footer />\n            </div>\n        );\n    }\n}\n\nexport default DonutTissue;\n","import styled from 'styled-components';\n\nconst StyleTable = styled.div`\n\n    table, th, td {\n        border: 1px solid #999999;\n    }\n\n    #stats-table {\n        text-align: left;\n        font-family: 'Raleway', sans-serif;\n        border-collapse: collapse;\n        width: 800px;\n    }\n\n    th {\n        color: #5974c4;\n        text-align: left;\n        font-family: 'Raleway', sans-serif;\n        padding: 10px;\n        height: 40px;\n        background-color: #ddd;\n    }\n\n    td {\n        color: #cd5686;\n        padding: 10px;\n        white-space: normal;\n        max-width: 200px;\n        overflow: scroll;\n    }\n\n    tr:hover {\n        background-color: #f5f5f5;\n    }\n`;\n\nexport default StyleTable;\n","/* eslint-disable react/no-array-index-key */\n/* eslint-disable class-methods-use-this */\nimport React from 'react';\nimport StyleTable from './ModelResponseStyle';\n\nclass BatchStatTable extends React.Component {\n    constructor(props) {\n        super(props);\n        // data for the table.\n        this.state = {\n            tableHeader: ['Batch', 'TGI', 'Angle', 'ABC'],\n        };\n        this.createTable = this.createTable.bind(this);\n        this.createTableHeader = this.createTableHeader.bind(this);\n    }\n\n    createTable() {\n        // this will create newData array of objects for the table.\n        const { data } = this.props;\n        const newData = [];\n        let total = 0;\n        let batchId = '';\n\n        data.forEach((eachdata) => {\n            if (newData.length === 0 || batchId !== eachdata.batch_id) {\n                newData.push({});\n                batchId = eachdata.batch_id;\n                newData[total].batch = eachdata.batch;\n                total += 1;\n            }\n            newData[total - 1][eachdata.response_type] = eachdata.value;\n        });\n\n        const table = newData.map((eachdata, index) => {\n            const {\n                batch, angle, TGI, abc,\n            } = eachdata;\n            return (\n                <tr key={index}>\n                    <td>{batch}</td>\n                    <td>{TGI}</td>\n                    <td>{angle}</td>\n                    <td>{abc}</td>\n                </tr>\n            );\n        });\n        return table;\n    }\n\n    createTableHeader() {\n        // create the header for the table.\n        const { tableHeader } = this.state;\n        const header = tableHeader.map((key, index) => <th key={index}>{key}</th>);\n        return header;\n    }\n\n    render() {\n        return (\n            <div className=\"curve-wrapper\" style={{ marginTop: '0px', padding: '60px 0px 20px 0px' }}>\n                <h1 id=\"title\">Statistics (Batch Response)</h1>\n                <StyleTable>\n                    <table id=\"stats-table\">\n                        <tbody>\n                            <tr>{this.createTableHeader()}</tr>\n                            {this.createTable()}\n                        </tbody>\n                    </table>\n                </StyleTable>\n            </div>\n        );\n    }\n}\n\n\nexport default BatchStatTable;\n","/* eslint-disable max-len */\n/* eslint-disable react/no-array-index-key */\n/* eslint-disable class-methods-use-this */\nimport React from 'react';\nimport axios from 'axios';\nimport StyleTable from './ModelResponseStyle';\nimport BatchStatTable from './BatchResponseStatTable';\n\nclass StatTable extends React.Component {\n    constructor(props) {\n        super(props);\n        // data for the table.\n        this.state = {\n            data: [],\n            batchData: [],\n            tableHeader: ['Patient', 'Model', 'Drug',\n                'mRECIST', 'Best Average Response', 'Slope', 'AUC',\n                'Survival (Days)', 'Link', 'Row Number'],\n        };\n        this.createTable = this.createTable.bind(this);\n        this.createTableHeader = this.createTableHeader.bind(this);\n        this.parseData = this.parseData.bind(this);\n    }\n\n    componentDidMount() {\n        const { drugParam, patientParam } = this.props;\n        const getModelResponse = axios.get(`/api/v1/stats?patient=${patientParam}&drug=${drugParam}`, { headers: { Authorization: localStorage.getItem('user') } });\n        const getBatchResponse = axios.get(`/api/v1/batchstat?patient=${patientParam}&drug=${drugParam}`, { headers: { Authorization: localStorage.getItem('user') } });\n\n        Promise.all([getBatchResponse, getModelResponse]).then((response) => {\n            this.parseData(response);\n        });\n    }\n\n    parseData(response) {\n        this.setState({\n            data: response[1].data,\n            batchData: response[0].data,\n        });\n        // if the dataset id is not 7 then table header won't include Link and Row Number.\n        const { data } = this.state;\n        if (data[0] && data[0].dataset_id !== 7) {\n            this.setState({\n                tableHeader: ['Patient', 'Model', 'Drug',\n                    'mRECIST', 'Best Average Response', 'Slope', 'AUC', 'Survival (Days)'],\n            });\n        }\n    }\n\n    createTable() {\n        // this will create the table data (each row for corresponding data).\n        const { data } = this.state;\n        // this will create newData array of objects for the table.\n        const newData = [];\n        let total = 0;\n        let drugValue = '';\n        let modelValue = '';\n\n        data.forEach((eachdata) => {\n            if (newData.length === 0 || drugValue !== eachdata.drug_name || modelValue !== eachdata.model) {\n                newData.push({});\n                drugValue = eachdata.drug_name;\n                modelValue = eachdata.model;\n                newData[total].model = modelValue;\n                newData[total].drug = drugValue;\n                newData[total].patient = eachdata.patient;\n                newData[total].link = eachdata.link;\n                newData[total].row = eachdata.row;\n                total += 1;\n            }\n            newData[total - 1][eachdata.response_type === 'best.average.response' ? 'bar' : eachdata.response_type] = eachdata.value;\n        });\n\n        // creating each table row.\n        const createTableRow = (eachdata, index) => {\n            const {\n                patient, model, drug,\n                bar, mRECIST, slope, AUC,\n                survival, link, row,\n            } = eachdata;\n\n            // will not return anything if there is no data.\n            const checkData = (val) => {\n                let tableData = '';\n                if (val && val === link) {\n                    tableData = <td style={{ minWidth: 150 }}><a href={val} target=\"_blank\" rel=\"noopener noreferrer\">Google-Sheet</a></td>;\n                } else if (val && val === row) {\n                    tableData = <td>{val}</td>;\n                } else {\n                    tableData = null;\n                }\n                return tableData;\n            };\n\n            const dataRow = (\n                <tr key={index} className={`responsetable_${model.replace(/\\./g, '_')}`}>\n                    <td>{patient}</td>\n                    <td>{model}</td>\n                    <td>{drug}</td>\n                    <td>{mRECIST}</td>\n                    <td>{bar}</td>\n                    <td>{slope}</td>\n                    <td>{AUC}</td>\n                    <td>{survival}</td>\n                    {checkData(link)}\n                    {checkData(row)}\n                </tr>\n            );\n\n            return dataRow;\n        };\n\n        // create the table.\n        const table = newData.map((eachdata, index) => (\n            createTableRow(eachdata, index)\n        ));\n\n        return table;\n    }\n\n    createTableHeader() {\n        // create the header for the table.\n        const { tableHeader } = this.state;\n        const header = tableHeader.map((key, index) => <th key={index}>{key}</th>);\n        return header;\n    }\n\n    render() {\n        const { batchData } = this.state;\n        return (\n            <>\n                <BatchStatTable data={batchData} />\n                <div className=\"curve-wrapper\" style={{ marginTop: '0px', padding: '30px 0px' }}>\n                    <h1 id=\"titlemodel\">Statistics (Model Response)</h1>\n                    <StyleTable>\n                        <table id=\"stats-table\">\n                            <tbody>\n                                <tr>{this.createTableHeader()}</tr>\n                                {this.createTable()}\n                            </tbody>\n                        </table>\n                    </StyleTable>\n                </div>\n            </>\n        );\n    }\n}\n\n\nexport default StatTable;\n","/* eslint-disable func-names */\n/* eslint-disable no-extend-native */\n/* eslint-disable no-shadow */\n/* eslint-disable class-methods-use-this */\n/* eslint-disable radix */\n/* eslint-disable no-plusplus */\nimport React from 'react';\nimport * as d3 from 'd3';\nimport { Link } from 'react-router-dom';\nimport GlobalStyles from '../../GlobalStyles';\nimport TopNav from '../TopNav/TopNav';\nimport StatTable from '../ResponseStat/ModelResponseStatTable';\n\nclass TumorGrowthCurve extends React.Component {\n    constructor(props) {\n        super(props);\n        // binding the functions declared.\n        this.makeTumorGrowthCurve = this.makeTumorGrowthCurve.bind(this);\n    }\n\n    componentDidUpdate() {\n        this.tumorGrowthCurve();\n    }\n\n    // intiliazing the variables.\n    tumorGrowthCurve() {\n        const { node } = this;\n        const plotId = 'plot';\n        const { data } = this.props;\n\n        // call the function only if there is data available.\n        if (data.length !== 0) {\n            this.makeTumorGrowthCurve(data, plotId, node);\n            d3.select('.no-graph').remove();\n        } else {\n            d3.select('svg').remove();\n        }\n    }\n\n    // unity normalization\n    norm(value, first) {\n        return (value / first) - 1;\n    }\n\n    // This is the main function to create Growth curves.\n    makeTumorGrowthCurve(data, plotId, node) {\n        // calling tumorCurve function passing the data, PlotID and node reference.\n        tumorCurve(data, plotId, node);\n\n        String.prototype.replaceAll = String.prototype.replaceAll || function (s, r) {\n            return this.replace(new RegExp(s, 'g'), r);\n        };\n\n        // unique function\n        // usage: let a = [1,2,3,4]; unique = a.filter(unique);\n        function unique(value, index, self) {\n            return self.indexOf(value) === index;\n        }\n\n        // get the union set of all timepoints for the means\n        // until the last timepoint of the shortest graph\n        // returns [ [control] , [treatment] ]\n        function getUnionOfTimepoints(data) {\n            let control = [];\n            let treatment = [];\n            let minControl;\n            let minTreatment;\n            for (let i = 0; i < data.length; i++) {\n                if (data[i].exp_type === 'control') {\n                    minControl = data[i].pdx_points[0]\n                        .times[data[i].pdx_points[0].times.length - 1];\n                    break;\n                }\n            }\n            for (let i = 0; i < data.length; i++) {\n                if (data[i].exp_type === 'treatment') {\n                    minTreatment = data[i].pdx_points[0]\n                        .times[data[i].pdx_points[0].times.length - 1];\n                    break;\n                }\n            }\n\n            // merging time point arrays, and then unique\n            for (let i = 0; i < data.length; i++) {\n                const temp = data[i].pdx_points[0].times;\n                if (data[i].exp_type === 'control') {\n                    control = control.concat(temp);\n                    minControl = temp[temp.length - 1] < minControl\n                        ? temp[temp.length - 1] : minControl;\n                } else {\n                    treatment = treatment.concat(data[i].pdx_points[0].times);\n                    minTreatment = temp[temp.length - 1] < minTreatment\n                        ? temp[temp.length - 1] : minTreatment;\n                }\n            }\n            // unique, sort, and cut off at the last timepoint of shortest graph\n            control = control.filter(unique).sort((a, b) => a - b);\n            let index = control.indexOf(minControl);\n            control = control.slice(0, index + 1);\n\n            treatment = treatment.filter(unique).sort((a, b) => a - b);\n            index = treatment.indexOf(minTreatment);\n            treatment = treatment.slice(0, index + 1);\n\n            return [control, treatment];\n        }\n\n\n        // calculating the min max volume and time.\n        function calculateMinMax(data) {\n            // calculating max time, min/max volumes of all data\n            const maxTimeArray = [];\n            const minVolArray = [];\n            const maxVolArray = [];\n            const maxVolNormArray = [];\n            const minVolNormArray = [];\n\n            // looping through data to get max and min array.\n            for (let i = 0; i < data.length; i++) {\n                maxTimeArray.push(d3.max(data[i].pdx_points[0].times));\n                minVolArray.push(d3.min(data[i].pdx_points[0].volumes));\n                maxVolArray.push(d3.max(data[i].pdx_points[0].volumes));\n                maxVolNormArray.push(d3.max(data[i].pdx_points[0].volume_normals));\n                minVolNormArray.push(d3.min(data[i].pdx_points[0].volume_normals));\n            }\n\n            // maxt and min value.\n            const maxTime = Math.max.apply(null, maxTimeArray);\n            const minVolume = Math.min.apply(null, minVolArray);\n            const maxVolume = Math.max.apply(null, maxVolArray);\n            const maxVolNorm = Math.max.apply(null, maxVolNormArray);\n            const minVolNorm = Math.min.apply(null, minVolNormArray);\n\n            return {\n                maxTime, minVolume, maxVolume, maxVolNorm, minVolNorm,\n            };\n        }\n\n\n        function tumorCurve(data, plotId, node) {\n            // calling function to grab the min max values.\n            const minmax = calculateMinMax(data);\n\n            // expression types.\n            const expTypes = ['control', 'treatment'];\n\n            // positioning variables\n            const width = 970;\n            const height = 500;\n            const margin = {\n                top: 50,\n                right: 260,\n                bottom: 250,\n                left: 130,\n            };\n\n            // make the svg element\n            const svg = d3.select(node)\n                .append('svg')\n                .attr('id', `pdx${plotId}`)\n                .attr('xmlns', 'http://www.w3.org/2000/svg')\n                .attr('xmlns:xlink', 'http://www.w3.org/1999/xlink') // for downloading\n                .attr('width', width + margin.left + margin.right)\n                .attr('height', height + margin.top + margin.bottom)\n                .append('g')\n                .attr('transform', `translate(${margin.left},${margin.top})`);\n\n            // legend\n            const legend = svg.selectAll('.legend')\n                .data(expTypes)\n                .enter();\n\n            legend.append('circle')\n                .attr('id', (d, i) => `legend-dot-${expTypes[i]}`)\n                .attr('class', 'legend')\n                .attr('r', 5)\n                .attr('fill', (d, i) => {\n                    if (expTypes[i] === 'control') {\n                        return '#cd5686';\n                    }\n                    return '#5974c4';\n                })\n                .attr('cx', width + 30)\n                .attr('cy', (d, i) => height / 2 - 50 + (i * 50));\n\n            legend.append('text')\n                .attr('id', (d, i) => `legend-text-${expTypes[i]}`)\n                .attr('class', 'legend')\n                .attr('fill', 'black')\n                .style('font-size', '16px')\n                .attr('x', width + 40)\n                .attr('y', (d, i) => height / 2 - 45 + (i * 50))\n                .text((d, i) => expTypes[i]);\n\n\n            // set domain and range scaling\n            const xrange = d3.scaleLinear()\n                .domain([0, minmax.maxTime])\n                .range([0, width])\n                .nice();\n\n            const yrange = d3.scaleLinear()\n                .domain([0, minmax.maxVolume])\n                .range([height, 0])\n                .nice();\n\n            // set axes for graph\n            const xAxis = d3.axisBottom()\n                .scale(xrange)\n                .tickPadding(2);\n\n            const yAxis = d3.axisLeft()\n                .scale(yrange)\n                .tickPadding(2);\n\n            // Add the X Axis\n            const xAxisAdd = svg.append('g')\n                .attr('class', 'x axis')\n                .attr('transform', `translate(0,${yrange(0)})`)\n                .attr('fill', 'none')\n                .attr('stroke', 'black')\n                .attr('stroke-width', 1)\n                .call(xAxis);\n\n            // X axis label\n            svg.append('text')\n                .attr('text-anchor', 'middle')\n                .attr('fill', 'black')\n                .attr('transform', `translate(${width / 2},${height + 40})`)\n                .text('Time (days)');\n\n            // Add the Y Axis\n            const yAxisAdd = svg.append('g')\n                .attr('class', 'y axis')\n                .attr('fill', 'none')\n                .attr('stroke', 'black')\n                .attr('stroke-width', 1)\n                .call(yAxis);\n\n            // Y axis label\n            svg.append('text')\n                .attr('text-anchor', 'middle')\n                .attr('fill', 'black')\n                .attr('transform', `translate(${-60},${height / 2})rotate(-90)`)\n                .text('Volume (mm)');\n\n            // remove strokes for all ticks\n            svg.selectAll('.tick').select('text')\n                .attr('fill', 'black')\n                .attr('stroke', 'none')\n                .attr('font-size', '14px');\n\n            const graph = svg.append('g')\n                .attr('id', 'curves');\n\n            // plot each model\n            plotBatch(data, graph, xrange, yrange, width, height, false);\n            volumeToggle(data, svg, xrange, yrange, yAxis, yAxisAdd,\n                width, height, minmax.maxVolume, minmax.maxVolNorm, plotId, minmax.minVolNorm);\n        }\n\n        function plotBatch(data, graph, xrange, yrange, width, height, norm) {\n            // when using d.model, use d.model.replace(/\\./g,' ').replaceAll(' ', '-')\n            // to replace all the periods with dashes because dots interfere with classes\n\n            const models = graph.selectAll('g.model')\n                .data(data)\n                .enter()\n                .append('g')\n                .attr('class', 'model');\n\n            // plotting the dots\n            const dots = models.selectAll('.model-dot')\n                .data((d) => d.pdx_json)\n                .enter();\n\n            const paths = graph.selectAll('.model-path')\n                .data(() => data)\n                .enter();\n\n            // making tooltips\n            const tooltip = d3.select('.wrapper')\n                .append('div')\n                .style('position', 'absolute')\n                .style('visibility', 'hidden')\n                .style('border', 'solid')\n                .style('border-width', '1px')\n                .style('border-radius', '5px')\n                .style('padding', '5px')\n                .style('min-width', '150px')\n                .style('min-height', '80px')\n                .attr('top', 10)\n                .attr('left', 20);\n\n            // appends dots.\n            dots.append('circle')\n                .attr('id', (d, i) => `dot-${d.model.replace(/\\./g, ' ').replaceAll(' ', '-')}-${\n                    d.exp_type}${i}`)\n                .attr('class', (d) => `model-dot ${\n                    d.model.replace(/\\./g, ' ').replaceAll(' ', '-')} ${\n                    d.batch}`)\n                .attr('r', 4)\n                .attr('fill', (d) => {\n                    if (d.exp_type === 'control') {\n                        return '#cd5686';\n                    }\n                    return '#5974c4';\n                })\n                .style('opacity', 0.6)\n                .attr('cx', (d) => xrange(d.time))\n                .attr('cy', (d) => {\n                    if (norm) {\n                        return yrange(d.volume_normal);\n                    }\n                    return yrange(d.volume);\n                });\n\n\n            // line function, to join dots\n            const linepath = d3.line()\n                .x((d) => xrange(d.time))\n                .y((d) => {\n                    if (norm) {\n                        return yrange(d.volume_normal);\n                    }\n                    return yrange(d.volume);\n                });\n\n            // creating line.\n            const createLine = (stroke, opacity, color = '#cd5686') => (\n                paths.append('path')\n                    .attr('id', (d) => `path-${d.model.replace(/\\./g, ' ').replaceAll(' ', '-')}`)\n                    .attr('class', (d) => `model-path_${d.exp_type}_${\n                        d.model.replace(/\\./g, ' ').replaceAll(' ', '-')}_${\n                        d.batch}`)\n                    .attr('d', (d) => linepath(d.pdx_json))\n                    .attr('fill', 'none')\n                    .style('opacity', opacity)\n                    .attr('stroke', (d) => {\n                        if (color === 'white') {\n                            return color;\n                        }\n                        if (d.exp_type === 'control') {\n                            return '#cd5686';\n                        }\n                        return '#5974c4';\n                    })\n                    .attr('stroke-width', stroke)\n            );\n\n            // selecting and unselecting the table data.\n            const tableSelect = (d, stroke, opacity, tcolor, tback, acolor, aback) => {\n                d3.select(`#path-${d.model.replace(/\\./g, ' ').replaceAll(' ', '-')}`)\n                    .attr('stroke-width', stroke)\n                    .style('opacity', opacity);\n                d3.selectAll(`.responsetable_${d.model.replace(/\\./g, '_')}`)\n                    .selectAll('td')\n                    .style('color', tcolor)\n                    .style('background', tback);\n                d3.selectAll(`.responsetable_${d.model.replace(/\\./g, '_')}`)\n                    .selectAll('a')\n                    .style('color', acolor)\n                    .style('background', aback);\n            };\n\n            // add line\n            createLine(3, 0.6)\n                .attr('stroke-dasharray', ('3', '3'));\n\n            // create a white line to let user hover over with opacity 0 and event listeners.\n            createLine(4, 0, 'white')\n                .on('mouseover', (d) => {\n                    // tooltip on mousever setting the div to visible.\n                    tooltip\n                        .style('visibility', 'visible');\n\n                    // tooltip grabbing event.pageX and event.pageY\n                    // and set color according to the ordinal scale.\n                    const tooltipDiv = tooltip\n                        .style('left', `${d3.event.pageX + 10}px`)\n                        .style('top', `${d3.event.pageY + 10}px`)\n                        .style('color', '#000000')\n                        .style('background-color', '#ffffff');\n\n                    // tooltip data.\n                    const tooltipData = [\n                        `Batch: ${d.batch}`, `Drug: ${d.drug}`, `Exp_Type: ${d.exp_type}`, `Model: ${d.model}`,\n                    ];\n                    tooltipDiv.selectAll('textDiv')\n                        .data(tooltipData)\n                        .enter()\n                        .append('div')\n                        .attr('id', 'tooltiptext')\n                        .html((d) => {\n                            const data = d.split(':');\n                            return `<b>${data[0]}</b>: ${data[1]}`;\n                        })\n                        .attr('x', `${d3.event.pageX + 10}px`)\n                        .attr('y', (d, i) => (`${d3.event.pageY + 10 + i * 10}px`));\n\n                    // changing attributes of the line on mouseover.\n                    tableSelect(d, 5, 1.0, '#f5f5f5', '#5974c4', '#f5f5f5', '#5974c4');\n                })\n                .on('mouseout', (d) => {\n                    // remove all the divs with id tooltiptext.\n                    d3.selectAll('#tooltiptext').remove();\n\n                    // tooltip on mousever setting the div to hidden.\n                    tooltip\n                        .style('visibility', 'hidden');\n\n                    // changing attributes back to normal of the line on mouseout.\n                    if (!(d3.select(`.model-path_${d.exp_type}_${d.model.replace(/\\./g, ' ').replaceAll(' ', '-')}_${d.batch}`).classed('selected'))) {\n                        tableSelect(d, 3, 0.6, '#cd5686', 'white', '#5974c4', 'white');\n                    }\n                })\n                .on('click', (d) => {\n                    const a = d3.selectAll('path');\n                    console.log(a, a.classed('selected'), d3.select(`.model-path_${d.exp_type}_${d.model.replace(/\\./g, ' ').replaceAll(' ', '-')}_${d.batch}`));\n                    const ab = d3.selectAll('path').nodes().map((d) => d);\n                    console.log(ab);\n                    const selection = d3.select(`.model-path_${d.exp_type}_${d.model.replace(/\\./g, ' ').replaceAll(' ', '-')}_${d.batch}`);\n                    if (!(selection.classed('selected'))) {\n                        selection.classed('selected', true);\n                        tableSelect(d, 5, 1.0, '#f5f5f5', '#5974c4', '#f5f5f5', '#5974c4');\n                    } else if (selection.classed('selected')) {\n                        selection.classed('selected', false);\n                        tableSelect(d, 3, 0.6, '#cd5686', 'white', '#5974c4', 'white');\n                    }\n                });\n            // plotMeans(data, graph, xrange, yrange, width, height);\n            // modelToggle(graph, width, height)\n        }\n\n        // plot the mean of each experiment type (control, treatment)\n        function plotMeans(data, svg, xrange, yrange, width, height) {\n            const timeUnion = getUnionOfTimepoints(data);\n            let expTypes = [];\n\n            // if there is no control\n            if (timeUnion[0].length === 0) {\n                expTypes = ['treatment'];\n                timeUnion.shift();\n            } else if (timeUnion[1].length === 0) { // no treatment\n                expTypes = ['control'];\n                timeUnion.pop();\n            } else {\n                expTypes = ['control', 'treatment'];\n            }\n\n\n            let ypointArr = []; // un-yranged\n            let allYpoint = []; // for std devs\n\n            // TODO: fix the batch, it's the first one rn\n            const { batch } = data[0];\n\n            for (let n = 0; n < expTypes.length; n++) {\n                const exp = expTypes[n];\n                const times = timeUnion[n];\n                const selection = d3.selectAll(`.model-path.${expTypes[n]}`)._groups;\n                // for each timepoint\n                for (let i = 0; i < timeUnion[n].length; i++) {\n                    const tempYcoord = [];\n\n                    // for each path, get ycoord for each timepoint in union\n                    for (let j = 0; j < selection.length; j++) {\n                        const path = selection[j][0];\n                        const ycoord = findY(path, xrange(timeUnion[n][i]));\n                        tempYcoord.push(yrange.invert(ycoord));\n                    }\n\n                    // append array to allYpoint for std devs\n                    allYpoint.push(tempYcoord);\n                    // append mean to ypointArr\n                    ypointArr.push(mean(tempYcoord));\n                }\n                // plot error bars\n                // plotErrorBars(data, exp, times, allYpoint, ypointArr, svg, xrange, yrange)\n\n                // mean svg\n                const meanSvg = svg.append('g')\n                    .attr('id', `mean_${expTypes[n]}`);\n\n                // tooltips\n                const tooltips = svg.selectAll(`.tooltip-mean-dot${exp}`)\n                    .data(ypointArr)\n                    .enter();\n\n                // timepoint\n                tooltips.append('text')\n                    .attr('id', (d, i) => `tooltip-mean-t-${batch}-${exp}${i}`)\n                    .attr('class', `tooltip-mean-dot${exp}`)\n                    .attr('dx', width + 20)\n                    .attr('dy', height / 2 + 30)\n                    .attr('font-size', '14px')\n                    .style('opacity', 0)\n                    .attr('fill', 'black')\n                    .html((d, i) => `Time: ${times[i]} days`);\n\n                // volume\n                tooltips.append('text')\n                    .attr('id', (d, i) => `tooltip-mean-v-${batch}-${exp}${i}`)\n                    .attr('class', 'tooltip-mean-dot')\n                    .attr('dx', width + 20)\n                    .attr('dy', height / 2 + 45)\n                    .attr('font-size', '14px')\n                    .style('opacity', 0)\n                    .attr('fill', 'black')\n                    .html((i) => `Volume: ${d3.format('.2f')(ypointArr[i])} mm`);\n\n                const meanDots = meanSvg.selectAll('.mean-dot')\n                    .data(ypointArr)\n                    .enter();\n                meanDots.append('circle')\n                    .attr('id', (d, i) => `mean-dot-${expTypes[n]}-${batch}`)\n                    .attr('class', `mean-dot ${batch}`)\n                    .attr('r', 4)\n                    .attr('fill', () => {\n                        if (expTypes[n] === 'control') {\n                            return '#cd5686';\n                        }\n                        return '#5974c4';\n                    })\n                    .attr('cx', (i) => xrange(timeUnion[n][i]))\n                    .attr('cy', (i) => yrange(ypointArr[i]))\n                    .on({\n                        mouseover(d, i) {\n                            d3.select(`#tooltip-mean-t-${batch}-${exp}${i}`).transition().duration(300).style('opacity', 1);\n                            d3.select(`#tooltip-mean-v-${batch}-${exp}${i}`).transition().duration(300).style('opacity', 1);\n                        },\n                        mouseout(d, i) {\n                            d3.select(`#tooltip-mean-t-${batch}-${exp}${i}`).transition().duration(300).style('opacity', 0);\n                            d3.select(`#tooltip-mean-v-${batch}-${exp}${i}`).transition().duration(300).style('opacity', 0);\n                        },\n                    });\n\n                const meanPath = meanSvg.selectAll('.mean-path')\n                    .data(ypointArr)\n                    .enter();\n\n\n                const linepath = d3.line()\n                    .x((d, i) => xrange(timeUnion[n][i]))\n                    .y((d, i) => yrange(ypointArr[i]));\n\n                meanPath.append('path')\n                    .attr('id', `mean-path-${expTypes[n]}-${batch}`)\n                    .attr('class', `mean-path ${batch}`)\n                    .attr('d', (d) => linepath(ypointArr))\n                    .attr('fill', 'none')\n                    .style('opacity', 0.2)\n                    .attr('stroke', () => {\n                        if (expTypes[n] === 'control') {\n                            return '#cd5686';\n                        }\n                        return '#5974c4';\n                    })\n                    .attr('stroke-width', 2);\n\n\n                // reset y arrs\n                allYpoint = [];\n                ypointArr = [];\n            }\n        }\n\n        // toggle to show each model\n        function modelToggle(svg, width, height) {\n            const nest = d3.nest()\n                .key((d) => d)\n                .entries(['']);\n\n            nest.forEach((d, i) => {\n                const modelToggle = svg.append('rect')\n                    .attr('x', width + 21)\n                    .attr('y', height / 2 + 40)\n                    .attr('id', 'modelToggle')\n                    .attr('width', 10)\n                    .attr('height', 10)\n                    .attr('fill', 'black')\n                    .attr('stroke', 'black')\n                    .attr('stroke-width', 1)\n                    .on('click', () => {\n                        const active = !d.active;\n                        const newOpacity = active ? 0 : 1;\n                        const newFill = active ? 'white' : 'black';\n\n                        // Hide or show the elements\n                        d3.selectAll('.model-dot').style('opacity', newOpacity);\n                        d3.selectAll('.model-path').style('opacity', newOpacity);\n                        d3.select('#modelToggle').attr('fill', newFill);\n\n                        // Update whether or not the elements are active\n                        d.active = active;\n                    })\n                    .on({\n                        mouseover() {\n                            d3.select(this).style('cursor', 'pointer');\n                        },\n                        mouseout() {\n                            d3.select(this).style('cursor', 'default');\n                        },\n                    });\n\n                const modelToggleText = svg.append('text')\n                    .attr('dx', width + 35)\n                    .attr('dy', height / 2 + 50)\n                    .attr('fill', 'black')\n                    .text('Show all curves')\n                    .on('click', () => {\n                        const active = !d.active;\n                        const newOpacity = active ? 0 : 1;\n                        const newFill = active ? 'white' : 'black';\n\n                        // Hide or show the elements\n                        d3.selectAll('.model-dot').style('opacity', newOpacity);\n                        d3.selectAll('.model-path').style('opacity', newOpacity);\n                        d3.select('#modelToggle').attr('fill', newFill);\n\n                        // Update whether or not the elements are active\n                        d.active = active;\n                    })\n                    .on({\n                        mouseover() {\n                            d3.select(this).style('cursor', 'pointer');\n                        },\n                        mouseout() {\n                            d3.select(this).style('cursor', 'default');\n                        },\n                    });\n            });\n        }\n\n\n        function mean(arr) {\n            let total = 0;\n            for (let i = 0; i < arr.length; i++) {\n                total += arr[i];\n            }\n            return (total / arr.length);\n        }\n\n        // thank you stackoverflow user Wei\n        // https://stackoverflow.com/questions/15578146/get-y-coordinate-of-point-along-svg-path-with-given-an-x-coordinate\n        function findY(path, x) {\n            const pathLength = path.getTotalLength();\n            let start = 0;\n            let end = pathLength;\n            let target = (start + end) / 2;\n\n            // Ensure that x is within the range of the path\n            x = Math.max(x, path.getPointAtLength(0).x);\n            x = Math.min(x, path.getPointAtLength(pathLength).x);\n\n            // Walk along the path using binary search\n            // to locate the point with the supplied x value\n            while (target >= start && target <= pathLength) {\n                const pos = path.getPointAtLength(target);\n\n                // use a threshold instead of strict equality\n                // to handle javascript floating point precision\n                if (Math.abs(pos.x - x) < 0.001) {\n                    return pos.y;\n                } if (pos.x > x) {\n                    end = target;\n                } else {\n                    start = target;\n                }\n                target = (start + end) / 2;\n            }\n        }\n\n        // takes in an array of arrays and an array of means,\n        // and returns array of std devs\n        function stdDev(values, means) {\n            const stdDevs = [];\n            for (let i = 0; i < values.length; i++) {\n                let temp = 0;\n                for (let j = 0; j < values[i].length; j++) {\n                    temp += Math.pow(values[i][j] - means[i], 2);\n                }\n                stdDevs.push(Math.sqrt(temp) / values[i].length);\n            }\n            return stdDevs;\n        }\n\n        function plotErrorBars(data, exp, times, allYpoint, ypointArr, svg, xrange, yrange) {\n            const stdDevs = stdDev(allYpoint, ypointArr);\n\n            const errorBars = svg.append('g')\n                .attr('id', 'errorBars');\n\n            const errorMidBar = errorBars.selectAll('line.error')\n                .data(stdDevs);\n\n            errorMidBar.enter()\n                .append('line')\n                .attr('class', 'error')\n                .attr('stroke', () => {\n                    if (exp === 'control') {\n                        return '#3b9dd6';\n                    }\n                    return '#e0913c';\n                })\n                .attr('stroke-width', 2)\n                .attr('x1', (d, i) => xrange(times[i]))\n                .attr('x2', (d, i) => xrange(times[i]))\n                .attr('y1', (d, i) => yrange(ypointArr[i] + stdDevs[i]))\n                .attr('y2', (d, i) => yrange(ypointArr[i] - stdDevs[i]));\n\n            const errorTopBar = errorBars.selectAll('line.errorTop')\n                .data(stdDevs);\n\n            errorTopBar.enter()\n                .append('line')\n                .attr('class', 'errorTop')\n                .attr('stroke', () => {\n                    if (exp === 'control') {\n                        return '#3b9dd6';\n                    }\n                    return '#e0913c';\n                })\n                .attr('stroke-width', 2)\n                .attr('x1', (d, i) => xrange(times[i]) - 3)\n                .attr('x2', (d, i) => xrange(times[i]) + 3)\n                .attr('y1', (d, i) => yrange(ypointArr[i] + stdDevs[i]))\n                .attr('y2', (d, i) => yrange(ypointArr[i] + stdDevs[i]));\n\n            const errorBotBar = errorBars.selectAll('line.errorBot')\n                .data(stdDevs);\n\n            errorBotBar.enter()\n                .append('line')\n                .attr('class', 'errorBot')\n                .attr('stroke', () => {\n                    if (exp === 'control') {\n                        return '#3b9dd6';\n                    }\n                    return '#e0913c';\n                })\n                .attr('stroke-width', 2)\n                .attr('x1', (d, i) => xrange(times[i]) - 3)\n                .attr('x2', (d, i) => xrange(times[i]) + 3)\n                .attr('y1', (d, i) => yrange(ypointArr[i] - stdDevs[i]))\n                .attr('y2', (d, i) => yrange(ypointArr[i] - stdDevs[i]));\n        }\n\n\n        // toggle to show each model\n        function volumeToggle(data, svg, xrange, yrange, yAxisAdd, yAxis, width, height, maxVolume, maxVolNorm, plotId, minVolNorm) {\n            const toggleValues = ['volRaw', 'volNorm', 'volRawText', 'volNormText'];\n\n            // to create the rectangle and\n            function createReactangle(additionalHeight, color, id, val) {\n                let rect = '';\n                if (val === 'volRaw' || val === 'volNorm') {\n                    rect = svg.append('rect')\n                        .attr('x', width + 25)\n                        .attr('y', height / 2 + additionalHeight)\n                        .attr('width', 70)\n                        .attr('height', 20)\n                        .attr('fill', color)\n                        .style('opacity', 0.8)\n                        .attr('id', id);\n                } else if (val === 'volRawText' || val === 'volNormText') {\n                    rect = svg.append('text')\n                        .attr('fill', 'black')\n                        .style('font-size', '12px')\n                        .attr('text-anchor', val === 'volRawText' ? 'middle' : 'null')\n                        .attr('id', 'volNormText')\n                        .attr('x', width + (val === 'volRawText' ? 60 : 29))\n                        .attr('y', height / 2 + (val === 'volRawText' ? 64 : 84))\n                        .text(val === 'volRawText' ? 'Raw' : 'Normalized');\n                }\n                return rect;\n            }\n\n            toggleValues.forEach((val) => {\n                // setting the initial variables.\n                let additionalHeight = 50;\n                let color = '#cd5686';\n                let id = '';\n                let plot = false;\n                let rawToggle = '#cd5686';\n                let normToggle = 'lightgray';\n                let minimum = 0;\n                let maximum = maxVolume;\n\n                // switching based on the toggle value.\n                switch (val) {\n                case 'volNorm':\n                    additionalHeight = 70;\n                    color = 'lightgray';\n                    id = 'volNormToggle';\n                    plot = true;\n                    rawToggle = 'lightgray';\n                    normToggle = '#cd5686';\n                    minimum = minVolNorm - 1;\n                    maximum = maxVolNorm + 1;\n                    break;\n\n                case 'volNormText':\n                    additionalHeight = 70;\n                    color = 'lightgray';\n                    id = 'volNormText';\n                    plot = true;\n                    rawToggle = 'lightgray';\n                    normToggle = '#cd5686';\n                    minimum = minVolNorm - 1;\n                    maximum = maxVolNorm + 1;\n                    break;\n\n                case 'volRaw':\n                    id = 'volRawToggle';\n                    break;\n\n                case 'volRawText':\n                    id = 'volRawText';\n                    break;\n\n                default:\n                    id = 'Looking for what??';\n                }\n\n                // call to create toggle rectangle and text.\n                const rect = createReactangle(additionalHeight, color, id, val);\n\n                // on click handler.\n                rect\n                    .on('click', () => {\n                        // y-axis change\n                        const yrange = d3.scaleLinear()\n                            .domain([minimum, maximum])\n                            .range([height, 0])\n                            .nice();\n\n                        const yAxis = d3.axisLeft()\n                            .scale(yrange)\n                            .tickPadding(2);\n\n                        d3.selectAll('g.y.axis').call(yAxis);\n\n                        // setting ticks.\n                        svg.selectAll('.tick').select('text')\n                            .attr('fill', 'black')\n                            .attr('stroke', 'none')\n                            .attr('font-size', '14px');\n\n                        // removing the other curve.\n                        d3.select('#curves').remove();\n                        const graph = svg.append('g')\n                            .attr('id', 'curves');\n\n                        // plot the toggle curve.\n                        plotBatch(data, graph, xrange, yrange, width, height, plot);\n\n                        d3.select('#volRawToggle').attr('fill', rawToggle);\n                        d3.select('#volNormToggle').attr('fill', normToggle);\n                    });\n            });\n        }\n    }\n\n    render() {\n        const { patientParam, drugParam } = this.props;\n        return (\n            <div>\n                <TopNav />\n                <GlobalStyles />\n                <div className=\"wrapper\" style={{ margin: 'auto', fontSize: '16px' }}>\n                    <div className=\"curve-wrapper\" style={{ marginTop: '100px' }}>\n                        <h1>\nDrug ID =\n                            {' '}\n                            <span style={{ color: '#cd5686' }}>{drugParam.replace(/\\s\\s\\s/g, ' + ').replace(/\\s\\s/g, ' + ')}</span>\n                            {' '}\nand Patient ID =\n                            {' '}\n                            <span style={{ color: '#cd5686' }}>{patientParam}</span>\n                        </h1>\n\n                        <svg ref={(node) => this.node = node} width={1300} height={620} />\n\n                        <div className=\"no-graph\">There is no data for this graph.</div>\n\n\n                    </div>\n                    <StatTable patientParam={patientParam} drugParam={drugParam} />\n                    <div className=\"curve-wrapper\" style={{ marginTop: '20px', padding: '10px 0px' }}>\n                        <Link to=\"/datasets\"> &nbsp;&nbsp;Back to Datasets </Link>\n                    </div>\n\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport default TumorGrowthCurve;\n","/* eslint-disable radix */\n/* eslint-disable no-extend-native */\n/* eslint-disable no-plusplus */\nimport React from 'react';\nimport axios from 'axios';\nimport TumorGrowthCurve from './TumorGrowthCurve';\n\nclass GrowthCurveData extends React.Component {\n    constructor(props) {\n        super(props);\n        // setting states.\n        this.state = {\n            dataFormatted: [],\n            patientParam: '',\n            drugParam: '',\n        };\n        // binding the function declarations.\n        this.dataParse = this.dataParse.bind(this);\n    }\n\n    // get the parameters and set the values in the variables.\n    static getDerivedStateFromProps(props) {\n        const { location } = props;\n        const params = new URLSearchParams(location.search);\n        return ({\n            patientParam: params.get('patient'),\n            drugParam: params.get('drug'),\n        });\n    }\n\n    componentDidMount() {\n        const { patientParam, drugParam } = this.state;\n        axios.get(`/api/v1/treatment?drug=${drugParam}&patient=${patientParam}`, { headers: { Authorization: localStorage.getItem('user') } })\n            .then((response) => {\n                const batches = [];\n                for (let i = 0; i < response.data.length; i++) {\n                    batches.push(response.data[i].batch);\n                }\n                this.dataParse(response.data, batches[0]);\n            });\n    }\n\n    // filters by batch - comment out the batch lines for full data\n    // call this command to create a curve!!!\n    dataParse(data, batchSelect) {\n        const dataFormatted = [];\n        const batches = [];\n        String.prototype.replaceAll = String.prototype.replaceAll || function (s, r) {\n            return this.replace(new RegExp(s, 'g'), r);\n        };\n\n        // loop throuth the data and set the values in the variable.\n        for (let i = 0; i < data.length; i++) {\n            batches.push(data[i].batch);\n            if (data[i].batch === batchSelect) {\n                if (data[i].time === 0) {\n                    const newDatapt = {\n                        exp_type: data[i].type,\n                        batch: data[i].patient_id,\n                        model: data[i].model_id,\n                        drug: data[i].drug,\n                        pdx_points: [{\n                            times: [parseInt(data[i].time)],\n                            volumes: [parseFloat(data[i].volume)],\n                            volume_normals: [parseFloat(data[i].volume_normal)],\n                        }],\n                        pdx_json: [{\n                            model: data[i].model_id.replace(/\\./g, ' ').replaceAll(' ', '-'),\n                            batch: data[i].patient_id,\n                            exp_type: data[i].type,\n                            time: parseInt(data[i].time),\n                            volume: parseFloat(data[i].volume),\n                            volume_normal: parseFloat(data[i].volume_normal),\n                        }],\n\n                    };\n                    dataFormatted.push(newDatapt);\n                } else if (data[i].time <= 200) {\n                    dataFormatted[dataFormatted.length - 1].pdx_points[0]\n                        .times.push(parseInt(data[i].time));\n                    dataFormatted[dataFormatted.length - 1].pdx_points[0]\n                        .volumes.push(parseFloat(data[i].volume));\n                    dataFormatted[dataFormatted.length - 1].pdx_points[0]\n                        .volume_normals.push(parseFloat(data[i].volume_normal));\n                    dataFormatted[dataFormatted.length - 1].pdx_json.push(\n                        {\n                            model: data[i].model_id,\n                            batch: data[i].patient_id,\n                            exp_type: data[i].type,\n                            time: parseInt(data[i].time),\n                            volume: parseFloat(data[i].volume),\n                            volume_normal: parseFloat(data[i].volume_normal),\n                        },\n                    );\n                }\n            }\n        }\n        this.setState({ dataFormatted });\n    }\n\n    render() {\n        const { patientParam, drugParam, dataFormatted } = this.state;\n        return (\n            <div>\n                <TumorGrowthCurve\n                    patientParam={patientParam}\n                    drugParam={drugParam}\n                    data={dataFormatted}\n                />\n            </div>\n        );\n    }\n}\n\n\nexport default GrowthCurveData;\n","import styled from 'styled-components';\n\nconst StyleBar = styled.div`\n    margin-top: 30vh;\n    font-family: 'Raleway', sans-serif;\n    display:flex;\n    margin:auto;\n    \n    .search-container {\n        max-width: 1000px;\n        text-align:center;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: space-around;\n        align-items: center;\n        border-radius:25px;\n        max-height: 700px;\n    }\n\n    .select-component {\n        background: rgb(255,255,255,0.8);\n        width: 45%;\n        min-width: 750px;\n        margin-top: 0px;\n        max-height: 550px;\n        display: flex;\n        flex-wrap: wrap;\n        margin: 35px;\n        padding: 10px 25px 50px 25px;\n        \n        justify-content: space-around;\n        border-radius: 20px;\n\n        .div-dataset, .div-drug {\n            max-width: 49%;\n            min-width: 295px;\n        }\n        .div-genomics, .div-gene {\n            margin: 10px;\n            min-width: 600px;\n            max-width: 70%;\n        }\n\n        .div-rnaseq {\n            text-align: left;\n            padding-left: 5px;\n            margin: 5px;\n            min-width: 600px;\n            max-width: 70%;\n            font-size: 15px;\n            color: #3453b0;\n            \n            input {\n                color: #3453b0;\n                font-size: 14px;\n                border: 1px solid #3453b0;\n                border-radius: 4px;\n                outline-style: none;\n                padding: 2px;\n                margin-left: 4px;\n            }\n        }\n\n        .div-gene-enter {\n            margin-top: 15px;\n            min-width: 620px;\n            max-height: 150px;\n            textarea {\n                min-width: 600px;\n                min-height: 120px;\n                outline-style: none;\n                border-radius: 10px;\n                color: #3453b0;\n                font-weight: 300;\n                font-size: 15px;\n                border: 1px solid #3453b0;\n                padding: 10px;\n                overflow-wrap: break-word;\n                box-sizing: border-box;\n                resize: none\n            }\n        }\n\n        .sample {\n            margin: 10px 0px 0px 15px;\n            min-width: 600px;\n            font-size: 16px;\n            text-align: left;\n            font-weight: 550;\n            a {\n                color: #3453b0;\n                text-decoration: none;\n            }\n            font-style: italic;\n        }\n\n    }\n\n    .two-col {\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: space-around;\n        align-items: flex-end;\n        min-width: 610px;\n        max-width: 70%;\n        margin-bottom:10px;\n    }\n\n    h1 {\n      color: #3453b0;\n      text-align: center;\n      font-size: 36px;\n    }    \n\n   @media screen and (max-width: 1700px) {\n        h1 {\n            font-size: 22px;\n        }\n        .select-component {\n            width: 55%;\n            max-height: 400px;\n            min-width: 650px;\n        }\n        .search-container {\n            max-height: 500px;\n        }\n        .div-gene-enter {\n            min-height: 100px !important;\n            margin: 10px !important;\n            textarea {\n                min-height: 100px !important;\n                max-height: 100px;\n            }\n        }\n        .div-genomics, .div-gene {\n            margin: 5px !important;\n        }\n        .sample {\n            font-size: 14px !important;\n            margin: 0px 0px -10px 10px !important;\n        }\n        .stylebutton {\n            font-size: 28px;\n            padding: 6px 10px 6px 10px;\n        }\n   }\n\n   @media screen and (max-width: 650px) {\n       h1 {\n           font-size: 18px;\n       }\n   }\n`;\n\n\nconst StyleButton = styled.button`\n    background-color: #3453b0;\n    border: none;\n    border-radius: 6px;\n    color: #ffffff;\n    padding: 10px 20px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 32px;\n    font-family: 'Raleway', sans-serif;\n    font-weight:700;\n    margin: auto;\n    transition: .3s;\n    outline-style: none;\n    margin-top: 0px;\n    &:hover {\n        opacity: 1;\n        cursor: pointer;\n        color:  #3453b0;\n        background-color: #ffffff;\n        border: 1px solid #3453b0;\n    }\n`;\n\n\nconst customStyles = {\n    placeholder: (provided) => ({\n        ...provided,\n        color: '#3453b0',\n        fontWeight: '400',\n        fontSize: '15px',\n    }),\n\n    control: (provided) => ({\n        ...provided,\n        '&:hover': { borderColor: '#3453b0' },\n        border: '1px solid #3453b0',\n        boxShadow: 'none',\n        padding: '0px 5px',\n        borderRadius: '5px',\n        background: 'rgb(255,255,255,0.7)',\n    }),\n\n    indicatorSeparator: (provided) => ({\n        ...provided,\n        background: '#3453b0',\n        '&:hover': { background: '#3453b0' },\n        height: '30px',\n    }),\n\n    dropdownIndicator: (provided) => ({\n        ...provided,\n        color: '#3453b0',\n        '&:hover': {\n            color: '#3453b0',\n            cursor: 'pointer',\n        },\n    }),\n\n    option: (provided) => ({\n        ...provided,\n        color: '#3453b0',\n        background: '#ffffff',\n        margin: '0px 0px',\n        '&:hover': {\n            background: '#fee8c8',\n        },\n        fontSize: '14px',\n        textAlign: 'left',\n    }),\n\n    singleValue: (provided) => ({\n        ...provided,\n        color: '#3453b0',\n        fontSize: '15px',\n    }),\n\n    multiValue: (provided) => ({\n        ...provided,\n        color: '#3453b0',\n        fontSize: '15px',\n    }),\n\n    input: (provided) => ({\n        ...provided,\n        color: '#3453b0',\n    }),\n\n    clearIndicator: (provided) => ({\n        ...provided,\n        color: '#3453b0',\n        '&:hover': {\n            color: '#3453b0',\n        },\n    }),\n\n    valueContainer: (provided) => ({\n        ...provided,\n        minHeight: '10px',\n        height: '40px',\n        paddingTop: '0',\n        paddingBottom: '0',\n        overflow: 'auto',\n    }),\n};\n\n\nexport {\n    StyleBar,\n    customStyles,\n    StyleButton,\n};\n","export const GeneList = [\n    'Prostate Cancer: AR Signaling=SOX9 RAN TNK2 EP300 PXN NCOA2 AR NRIP1 NCOR1 NCOR2',\n    'Prostate Cancer: AR and steroid synthesis enzymes=AKR1C3 AR CYB5A CYP11A1 CYP11B1 CYP11B2 CYP17A1 CYP19A1 CYP21A2 HSD17B1 HSD17B10 HSD17B11 HSD17B12 HSD17B13 HSD17B14 HSD17B2 HSD17B3 HSD17B4 HSD17B6 HSD17B7 HSD17B8 HSD3B1 HSD3B2 HSD3B7 RDH5 SHBG SRD5A1 SRD5A2 SRD5A3 STAR',\n    'Prostate Cancer: Steroid inactivating genes=AKR1C1 AKR1C2 AKR1C4 CYP3A4 CYP3A43 CYP3A5 CYP3A7 UGT2B15 UGT2B17 UGT2B7',\n    'Prostate Cancer: Down-regulated by androgen=BCHE CDK8 CTBP1 ACKR3 DDC DPH1 FN1 HES6 MMP16 MYC PEG3 PIK3R3 PRKD1 SCNN1A SDC4 SERPINI1 SLC29A1 ST7 TULP4',\n    'Glioblastoma: TP53 Pathway=CDKN2A MDM2 MDM4 TP53',\n    'Glioblastoma: RTK/Ras/PI3K/AKT Signaling=EGFR ERBB2 PDGFRA MET KRAS NRAS HRAS NF1 SPRY2 FOXO1 FOXO3 AKT1 AKT2 AKT3 PIK3R1 PIK3CA PTEN',\n    'Glioblastoma: RB Pathway=CDKN2A CDKN2B CDKN2C CDK4 CDK6 CCND2 RB1',\n    'Ovarian Cancer: Oncogenes associated with epithelial ovarian cancer=RAB25 MECOM EIF5A2 PRKCI PIK3CA KIT FGF1 MYC EGFR NOTCH3 KRAS AKT1 ERBB2 PIK3R1 CCNE1 AKT2 AURKA',\n    'Ovarian Cancer: Putative tumor-suppressor genes in epithelial ovarian cancer=DIRAS3 RASSF1 DLEC1 SPARC DAB2 PLAGL1 RPS6KA2 PTEN OPCML BRCA2 ARL11 WWOX TP53 DPH1 BRCA1 PEG3',\n    'General: Cell Cycle Control=RB1 RBL1 RBL2 CCNA1 CCNB1 CDK1 CCNE1 CDK2 CDC25A CCND1 CDK4 CDK6 CCND2 CDKN2A CDKN2B MYC CDKN1A CDKN1B E2F1 E2F2 E2F3 E2F4 E2F5 E2F6 E2F7 E2F8 SRC JAK1 JAK2 STAT1 STAT2 STAT3 STAT5A STAT5B',\n    'General: p53 signaling=TP53 MDM2 MDM4 CDKN2A CDKN2B TP53BP1',\n    'General: Notch signaling=ADAM10 ADAM17 APH1A APH1B ARRDC1 CIR1 CTBP1 CTBP2 CUL1 DLL1 DLL3 DLL4 DTX1 DTX2 DTX3 DTX3L DTX4 EP300 FBXW7 HDAC1 HDAC2 HES1 HES5 HEYL ITCH JAG1 JAG2 KDM5A LFNG MAML1 MAML2 MAML3 MFNG NCOR2 NCSTN NOTCH1 NOTCH2 NOTCH3 NOTCH4 NRARP NUMB NUMBL PSEN1 PSEN2 PSENEN RBPJ RBPJL RFNG SNW1 SPEN HES2 HES4 HES7 HEY1 HEY2',\n    'General: DNA Damage Response=CHEK1 CHEK2 RAD51 BRCA1 BRCA2 MLH1 MSH2 ATM ATR MDC1 PARP1 FANCF',\n    'General: Other growth / proliferation signaling=CSF1 CSF1R IGF1 IGF1R FGF1 FGFR1 AURKA DLEC1 PLAGL1 OPCML DPH1',\n    'General: Survival / cell death regulation signaling=NFKB1 NFKB2 CHUK DIRAS3 FAS HLA-G BAD BCL2 BCL2L1 APAF1 CASP9 CASP8 CASP10 CASP3 CASP6 CASP7 GSK3B ARL11 WWOX PEG3 TGFB1 TGFBR1 TGFBR2',\n    'General: Telomere maintenance=TERC TERT',\n    'General: RTK signaling family=EGFR ERBB2 ERBB3 ERBB4 PDGFA PDGFB PDGFRA PDGFRB KIT FGF1 FGFR1 IGF1 IGF1R VEGFA VEGFB KDR',\n    'General: PI3K-AKT-mTOR signaling=PIK3CA PIK3R1 PIK3R2 PTEN PDPK1 AKT1 AKT2 FOXO1 FOXO3 MTOR RICTOR TSC1 TSC2 RHEB AKT1S1 RPTOR MLST8',\n    'General: Ras-Raf-MEK-Erk/JNK signaling=KRAS HRAS BRAF RAF1 MAP3K1 MAP3K2 MAP3K3 MAP3K4 MAP3K5 MAP2K1 MAP2K2 MAP2K3 MAP2K4 MAP2K5 MAPK1 MAPK3 MAPK4 MAPK6 MAPK7 MAPK8 MAPK9 MAPK12 MAPK14 DAB2 RASSF1 RAB25',\n    'General: Regulation of ribosomal protein synthesis and cell growth=RPS6KA1 RPS6KA2 RPS6KB1 RPS6KB2 EIF5A2 EIF4E EIF4EBP1 RPS6 HIF1A',\n    'General: Angiogenesis=VEGFA VEGFB KDR CXCL8 CXCR1 CXCR2',\n    'General: Folate transport=SLC19A1 FOLR1 FOLR2 FOLR3 IZUMO1R',\n    'General: Invasion and metastasis=MMP1 MMP2 MMP3 MMP7 MMP9 MMP10 MMP11 MMP12 MMP13 MMP14 MMP15 MMP16 MMP17 MMP19 MMP21 MMP23B MMP24 MMP25 MMP26 MMP27 MMP28 ITGB3 ITGAV PTK2 CDH1 SPARC WFDC2',\n];\n\n\nexport default {\n    GeneList,\n};\n","/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable no-plusplus */\n/* eslint-disable consistent-return */\n/* eslint-disable array-callback-return */\n/* eslint-disable react/no-deprecated */\n\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport Select from 'react-select';\nimport axios from 'axios';\nimport Popup from 'reactjs-popup';\nimport { StyleBar, customStyles, StyleButton } from './SearchStyle';\nimport { GeneList } from '../../util/GeneList';\n\nclass Search extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            drugs: [],\n            datasets: [],\n            genes: [],\n            selectedGeneSearch: ['Enter Gene Symbol(s)'],\n            selectedDrugs: [],\n            selectedDataset: '',\n            genomicsValue: ['All', 'Mutation', 'CNV', 'Gene Expression'],\n            selectedGenomics: [],\n            allDrugs: [],\n            threshold: 2,\n            toggleRNA: false,\n            genomics: [],\n            drugValue: [],\n            axiosConfig: {},\n        };\n        this.handleDrugChange = this.handleDrugChange.bind(this);\n        this.handleDatasetChange = this.handleDatasetChange.bind(this);\n        this.handleGeneListChange = this.handleGeneListChange.bind(this);\n        this.handleGeneSearchChange = this.handleGeneSearchChange.bind(this);\n        this.handleExpressionChange = this.handleExpressionChange.bind(this);\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n        this.redirectUser = this.redirectUser.bind(this);\n        this.handleThreshold = this.handleThreshold.bind(this);\n        this.checkInput = this.checkInput.bind(this);\n        this.clearText = this.clearText.bind(this);\n    }\n\n\n    componentWillMount() {\n        const { genomicsValue } = this.state;\n        const genes = GeneList.map((item) => ({\n            value: item.split('=')[1].replace(/\\s/g, ','),\n            label: `${item.split('=')[0]} (${item.split('=')[1].split(' ').length})`,\n        }));\n\n        this.setState({\n            genes: [{ value: 'user defined list', label: 'User-Defined List' }, ...genes],\n        });\n\n        const genomic = genomicsValue.map((item, i) => ({\n            label: item,\n            value: i,\n        }));\n        this.setState({\n            genomicsValue: [...genomic],\n            axiosConfig: {\n                headers: {\n                    'Content-Type': 'application/json;charset=UTF-8',\n                    Accept: 'application/json',\n                },\n            },\n        });\n    }\n\n    componentDidMount() {\n        axios.get('/api/v1/datasets', { headers: { Authorization: localStorage.getItem('user') } })\n            .then((response) => {\n                const datasets = response.data.data.map((item) => ({\n                    value: item.dataset_id,\n                    label: item.dataset_name,\n                }));\n                this.setState({\n                    datasets: [...datasets],\n                });\n            });\n    }\n\n\n    handleDrugChange(selectedOption) {\n        if (selectedOption !== null && selectedOption.length > 0) {\n            // destructuring the state.\n            const { drugs, allDrugs } = this.state;\n\n            // loop through the label to give the array of selectedOptions.\n            const label = selectedOption.map((value) => (value.label).replace(/\\s/g, '').replace('+', '_'));\n\n            // function to check if label array contains the All string.\n            const doesItContain = (labelVal) => {\n                let truth = false;\n                const regex = RegExp('All');\n                labelVal.map((val) => {\n                    if (regex.test(val)) {\n                        truth = true;\n                    }\n                });\n                return truth;\n            };\n\n            // if all is selected then everything except all is in the value for select.\n            if (doesItContain(label)) {\n                const data = drugs.filter((item, value) => {\n                    if (value !== 0) {\n                        return ({\n                            value,\n                            label: item.drug,\n                        });\n                    }\n                });\n                this.setState({\n                    selectedDrugs: allDrugs,\n                    drugValue: data,\n                });\n            } else { // else the selected option and label the array of drugs.\n                this.setState({\n                    selectedDrugs: label,\n                    drugValue: selectedOption,\n                });\n            } // if it's empty or null put the drugValue to be an empty array.\n        } else if (selectedOption === null || selectedOption.length === 0) {\n            this.setState({\n                drugValue: [],\n            });\n        }\n    }\n\n    // handle the dataset change and sends a post\n    // request to grab drugs based on the particular dataset.\n    handleDatasetChange(selectedOption) {\n        const { axiosConfig } = this.state;\n        this.setState({\n            selectedDataset: selectedOption.value,\n        });\n        const label = selectedOption.value;\n        let initial = 1;\n        axios.post('/api/v1/drugpatient/dataset', { label }, { headers: { Authorization: localStorage.getItem('user') } }, axiosConfig.headers)\n            .then((response) => {\n                const data = response.data.data[0].map((item) => ({\n                    value: initial++,\n                    label: item.drug,\n                }));\n                this.setState({\n                    drugs: [{ value: 'all', label: `All (${data.length})` }, ...data],\n                });\n                const drug = response.data.data[0].map((item) => (item.drug).replace(/\\s/g, '').replace('+', '_'));\n                this.setState({\n                    allDrugs: [...drug],\n                });\n            });\n    }\n\n    // sets the value of selected gene search,\n    // empty if it's user defined list else the option selected.\n    handleGeneListChange(selectedOption) {\n        if (selectedOption.value === 'user defined list') {\n            this.setState({\n                selectedGeneSearch: '',\n            });\n        } else {\n            this.setState({\n                selectedGeneSearch: selectedOption.value,\n            });\n        }\n    }\n\n    // sets the value on event change.\n    handleGeneSearchChange(event) {\n        this.setState({\n            selectedGeneSearch: event.target.value,\n        });\n    }\n\n    // this adds the value either mutation or cnv or RNASeq.\n    handleExpressionChange(selectedOption) {\n        const { genomicsValue } = this.state;\n        if (selectedOption !== null && selectedOption.length > 0) {\n            // map through the options in order to store the selected value.\n            const genomicsCurrentValue = selectedOption.map((value) => value.label);\n\n            // if all then everything will be passed else the selected value.\n            if (genomicsCurrentValue.includes('All')) {\n                const genomic = genomicsValue.filter((item, i) => {\n                    if (i !== 0) {\n                        return ({\n                            label: item,\n                            value: i,\n                        });\n                    }\n                });\n                this.setState({\n                    genomics: genomic,\n                    selectedGenomics: ['Mutation', 'CNV', 'RNASeq'],\n                });\n            } else {\n                this.setState({\n                    genomics: selectedOption,\n                    selectedGenomics: genomicsCurrentValue,\n                });\n            }\n\n            // and if it includes RNASeq or all then toggle should be true.\n            if (genomicsCurrentValue.includes('Gene Expression') || genomicsCurrentValue.includes('All')) {\n                this.setState({\n                    toggleRNA: true,\n                });\n            } else {\n                this.setState({\n                    toggleRNA: false,\n                });\n            }\n        } else if (selectedOption === null || selectedOption.length === 0) {\n            this.setState({\n                toggleRNA: false,\n                genomics: [],\n            });\n        }\n    }\n\n    // threshold for GeneExpression.\n    handleThreshold(event) {\n        this.setState({\n            threshold: event.target.value,\n        });\n    }\n\n\n    handleKeyPress(event) {\n        if (event.key === 'Enter') {\n            this.redirectUser();\n        }\n    }\n\n    // redirects the user to search page.\n    redirectUser() {\n        const {\n            selectedDataset, selectedDrugs, selectedGeneSearch,\n            selectedGenomics, threshold, genomics,\n        } = this.state;\n        if ((selectedDataset !== '') && (selectedDrugs.length > 0) && (selectedGeneSearch[0] !== 'Enter Gene Symbol(s)' && selectedGeneSearch !== '') && (genomics.length > 0)) {\n            const { history } = this.props;\n            history.push(`/search/?drug=${selectedDrugs}&dataset=${selectedDataset}&genes=${selectedGeneSearch}&genomics=${selectedGenomics}&threshold=${threshold}`);\n        }\n    }\n\n    // check if all fields are selected.\n    checkInput() {\n        const {\n            selectedDataset, selectedDrugs, selectedGeneSearch, genomics,\n        } = this.state;\n        return ((selectedDataset !== '') && (selectedDrugs.length > 0) && (selectedGeneSearch[0] !== 'Enter Gene Symbol(s)' && selectedGeneSearch !== '') && (genomics.length > 0));\n    }\n\n    // clear the text.\n    clearText() {\n        this.setState({\n            selectedGeneSearch: '',\n        });\n    }\n\n\n    render() {\n        const {\n            datasets, drugs, drugValue, genomicsValue, genomics,\n            threshold, toggleRNA, genes, selectedGeneSearch,\n        } = this.state;\n        return (\n\n            <StyleBar className=\"wrapper\">\n                <div className=\"search-container\">\n                    <div className=\"select-component\" onKeyPress={this.handleKeyPress}>\n                        <h1>\n                            {' '}\n                            <span style={{ color: '#cd5686' }}>XevaDB:</span>\n                            {' '}\n                                A Database For PDX Pharmacogenomic Data\n                            {' '}\n                        </h1>\n                        <div className=\"two-col\">\n                            <div className=\"div-dataset\">\n                                <Select\n                                    options={datasets}\n                                    styles={customStyles}\n                                    placeholder=\"Select the Dataset\"\n                                    onChange={this.handleDatasetChange}\n                                />\n                            </div>\n                            <div className=\"div-drug\">\n                                <Select\n                                    options={drugs}\n                                    styles={customStyles}\n                                    placeholder=\"Search for the Drug (eg. CLR457)\"\n                                    onChange={this.handleDrugChange}\n                                    isMulti\n                                    isSearchable\n                                    isClearable\n                                    value={drugValue}\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"div-genomics\">\n                            <Select\n                                options={genomicsValue}\n                                styles={customStyles}\n                                placeholder=\"Genomics\"\n                                onChange={this.handleExpressionChange}\n                                isMulti\n                                isClearable\n                                value={genomics}\n                            />\n                        </div>\n\n                        <div className=\"div-rnaseq\">\n                            {\n                                toggleRNA\n                                    ? (\n                                        <div>\n                                    Enter a z-score threshold \n                                            <input\n                                                type=\"text\"\n                                                name=\"title\"\n                                                value={threshold}\n                                                onChange={this.handleThreshold}\n                                            />\n                                        </div>\n                                    )\n                                    : null\n                            }\n\n                        </div>\n\n                        <div className=\"div-gene\">\n                            <Select\n                                options={genes}\n                                styles={customStyles}\n                                placeholder=\"User Defined or Pre-Defined Gene List\"\n                                onChange={this.handleGeneListChange}\n                            />\n                        </div>\n\n                        <div className=\"div-gene-enter\">\n                            <form>\n                                <textarea\n                                    type=\"text\"\n                                    value={selectedGeneSearch}\n                                    onChange={this.handleGeneSearchChange}\n                                    onClick={this.clearText}\n                                />\n                            </form>\n                        </div>\n\n                        {/* http://localhost:3000/search/?drug=BGJ398,binimetinib,BKM120,BYL719&dataset=1&genes=SOX9,RAN,TNK2,EP300,PXN,NCOA2,AR,NRIP1,NCOR1,NCOR2&genomics=Mutation,CNV,RNASeq&threshold=2 */}\n                        <div className=\"sample\">\n                            <a href=\"/search/?drug=BGJ398,binimetinib,BKM120,BYL719&dataset=1&genes=SOX9,RAN,TNK2,EP300,PXN,NCOA2,AR,NRIP1,NCOR1,NCOR2&genomics=Mutation,CNV,RNASeq&threshold=2\"> Feeling Lucky? </a>\n                        </div>\n\n                        <div>\n                            {\n                                this.checkInput()\n                                    ? (\n                                        <StyleButton onClick={this.redirectUser} type=\"button\" className=\"stylebutton\">\n                                            <span>\n                                                Search\n                                            </span>\n                                        </StyleButton>\n                                    )\n                                    : (\n                                        <Popup\n                                            trigger={(\n                                                <StyleButton onClick={this.redirectUser} type=\"button\" className=\"stylebutton\">\n                                                    <span>\n                                                        Search\n                                                    </span>\n                                                </StyleButton>\n                                            )}\n                                            position=\"right center\"\n                                        >\n                                            <div style={{\n                                                color: '#3453b0', fontFamily: 'Raleway', fontSize: '17px', fontWeight: '500',\n                                            }}\n                                            >\n                                                Complete all the fields!!\n                                            </div>\n                                        </Popup>\n                                    )\n                            }\n                        </div>\n                    </div>\n                </div>\n            </StyleBar>\n        );\n    }\n}\n\n\nexport default withRouter(Search);\n","import styled from 'styled-components';\n\n\nconst Container = styled.div`\n  display: flex;\n  min-height: 100vh;\n  flex-direction: column;\n`;\n\nexport default Container;\n","import React from 'react';\nimport Search from '../Search/Search';\nimport CounterNav from '../CounterNav/CounterNav';\nimport Container from './HomeStyle';\n\n\nconst Home = () => (\n    <Container>\n        <Search />\n        <CounterNav />\n    </Container>\n);\n\n\nexport default Home;\n","import styled from 'styled-components';\n\n\nconst Paper = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 300px;\n    width: 400px;\n    margin: auto;\n    margin-top: 20vh;\n`;\n\nconst PaperGradient = styled.div`\n    background-image: linear-gradient(\n        to right,\n        #CBC5EA,\n        #EAEAEA\n    );\n    height: 400px;\n    width: 530px;\n    border-radius: 5px;\n    margin:auto;\n`;\n\nconst SubmitStyle = styled.div`\n    margin-top: 2vh;\n`;\n\nconst LogoStyle = styled.img`\n    width:calc(5em + 2vw);\n    margin-top:2px;\n    z-index:999;\n    position: relative;\n    margin-left: calc(100vw - (3vw + 5em))\n`;\n\nconst LogoBack = styled.div`\n    background-image: linear-gradient(\n        to right,\n        #CBC5EA,\n        #EAEAEA\n    );\n`;\n\n\nexport {\n    Paper,\n    SubmitStyle,\n    LogoStyle,\n    PaperGradient,\n    LogoBack,\n};\n","/* eslint-disable class-methods-use-this */\nimport React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport axios from 'axios';\nimport {\n    Paper, SubmitStyle, LogoStyle, PaperGradient, LogoBack,\n} from './LoginStyle';\nimport logo from '../../images/logo.png';\n\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n            isAuthenticated: false,\n            axiosConfig: {\n                headers: {\n                    'Content-Type': 'application/json;charset=UTF-8',\n                    Accept: 'application/json',\n                },\n            },\n        };\n\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleUserChange = this.handleUserChange.bind(this);\n        this.handlePasswordChange = this.handlePasswordChange.bind(this);\n        this.isAuthenticated = this.isAuthenticated.bind(this);\n    }\n\n\n    handleUserChange(event) {\n        this.setState({\n            username: event.target.value,\n        });\n    }\n\n    handlePasswordChange(event) {\n        this.setState({\n            password: event.target.value,\n        });\n    }\n\n    handleSubmit(event) {\n        // prevent the default behaviour.\n        event.preventDefault();\n\n        // destructuring the state.\n        const { username, password, axiosConfig } = this.state;\n\n        // post request.\n        axios.post('/api/v1/login', {\n            username,\n            password,\n        }, axiosConfig.headers)\n            .then((response) => {\n                localStorage.setItem('user', response.headers['auth-token']);\n                this.setState({\n                    isAuthenticated: this.isAuthenticated(),\n                });\n            })\n            .catch((error) => {\n                console.log(error, 'authentication failed');\n                alert('Authentication Failed, Please Enter a valid Password and Username');\n            });\n    }\n\n    isAuthenticated() {\n        const token = localStorage.getItem('user');\n        return token && token.length > 10;\n    }\n\n\n    render() {\n        const { isAuthenticated } = this.state;\n        return (\n            <div>\n                { isAuthenticated ? <Redirect to={{ pathname: '/' }} /> : (\n                    <div>\n                        <Link to=\"/\">\n                            <LogoBack>\n                                <LogoStyle src={logo} alt=\"logo\" />\n                            </LogoBack>\n                        </Link>\n\n                        <PaperGradient>\n                            <Paper>\n\n                                <Typography\n                                    component=\"h1\"\n                                    variant=\"h5\"\n                                    style={{\n                                        color: '#3f51b5', marginTop: '4.5vh', fontWeight: '700', fontSize: '30px',\n                                    }}\n                                >\n                                    Sign in\n                                </Typography>\n\n                                <form onSubmit={this.handleSubmit}>\n                                    <TextField\n                                        variant=\"outlined\"\n                                        margin=\"normal\"\n                                        required\n                                        fullWidth\n                                        id=\"email\"\n                                        label=\"Username\"\n                                        name=\"username\"\n                                        onChange={this.handleUserChange}\n                                    />\n                                    <TextField\n                                        variant=\"outlined\"\n                                        margin=\"normal\"\n                                        required\n                                        fullWidth\n                                        name=\"password\"\n                                        label=\"Password\"\n                                        type=\"password\"\n                                        id=\"password\"\n                                        autoComplete=\"current-password\"\n                                        onChange={this.handlePasswordChange}\n                                    />\n\n                                    <SubmitStyle>\n                                        <Button\n                                            type=\"submit\"\n                                            fullWidth\n                                            variant=\"contained\"\n                                            color=\"primary\"\n                                        >\n                                            Sign In\n                                        </Button>\n                                    </SubmitStyle>\n\n                                    <Grid container style={{ marginTop: '15px' }}>\n                                        <Grid item xs>\n                                            <Link href=\"#\" variant=\"body2\">\n                                                Forgot password?\n                                            </Link>\n                                        </Grid>\n                                    </Grid>\n                                </form>\n\n                            </Paper>\n                        </PaperGradient>\n\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\n\nexport default Login;\n","/* eslint-disable no-shadow */\nimport React from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport HeatMap from '../HeatMap/HeatMap';\n\nclass SearchResultHeatMap extends React.Component {\n    constructor(props) {\n        super(props);\n        // setting the states for the data.\n        this.state = {\n            drugData: [],\n            patientIdDrug: [],\n            drugId: [],\n            dimensions: {},\n            margin: {},\n        };\n        // binding the functions declared.\n        this.parseData = this.parseData.bind(this);\n    }\n\n    componentDidMount() {\n        const { drugParam } = this.props;\n        const { datasetParam } = this.props;\n\n        axios.get(`/api/v1/response?drug=${drugParam}&dataset=${datasetParam}`, { headers: { Authorization: localStorage.getItem('user') } })\n            .then((response) => {\n                this.parseData(response.data);\n            });\n    }\n\n    // this function takes the parsed result and set the states.\n    parseData(result) {\n        // defining the variables.\n        const dataset = [];\n        let patient = [];\n        const drug = [];\n\n        // patient array.\n        patient = result.pop();\n\n        // this function will loop through the elements and\n        // assign empty values in case model information is not available.\n        result.forEach((element) => {\n            const dataObject = {};\n            drug.push(element.Drug);\n            patient.forEach((patient) => {\n                if (!element[patient]) {\n                    dataObject[patient] = '';\n                } else {\n                    dataObject[patient] = element[patient];\n                }\n            });\n            dataset.push(dataObject);\n        });\n\n        // patient from one of the object elements to keep it in sync.\n        patient = Object.keys(dataset[0]);\n\n        // setting the states using the defined variables.\n        this.setState({\n            drugId: drug,\n            patientIdDrug: patient,\n            drugData: dataset,\n            dimensions: { height: 35, width: 20 },\n            margin: {\n                top: 300, right: 200, bottom: 0, left: 250,\n            },\n        });\n    }\n\n    render() {\n        const {\n            drugData, drugId,\n            patientIdDrug, dimensions,\n            margin,\n        } = this.state;\n        const { datasetParam } = this.props;\n        return (\n            drugData.length > 0 ? (\n                <HeatMap\n                    data={drugData}\n                    drugId={drugId}\n                    patientId={patientIdDrug}\n                    dimensions={dimensions}\n                    margin={margin}\n                    className=\"searchedheatmap\"\n                    dataset={datasetParam}\n                />\n            ) : ''\n        );\n    }\n}\n\nSearchResultHeatMap.propTypes = {\n    datasetParam: PropTypes.string.isRequired,\n    drugParam: PropTypes.string.isRequired,\n};\n\nexport default SearchResultHeatMap;\n","/* eslint-disable no-shadow */\nimport React from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport Oncoprint from '../Oncoprint/Oncoprint';\nimport Spinner from '../SpinnerUtil/Spinner';\n\nclass SearchResultOncoprint extends React.Component {\n    constructor(props) {\n        super(props);\n        // setting the states for the data.\n        this.state = {\n            threshold: 0,\n            hmapPatients: [],\n            genesMut: [],\n            genesRna: [],\n            genesCnv: [],\n            patientMut: [],\n            patientRna: [],\n            patientCnv: [],\n            dataMut: [],\n            dataRna: [],\n            dataCnv: [],\n            dimensions: {},\n            margin: {},\n            loading: true,\n        };\n        // binding the functions declared.\n        this.updateResults = this.updateResults.bind(this);\n    }\n\n\n    componentDidMount() {\n        const { datasetParam } = this.props;\n        const { geneParam } = this.props;\n        const { genomicsParam } = this.props;\n        const queryData = [];\n        const genomics = [];\n\n        // making get requests based on the genomics parameters.\n        // sequence is important (first cnv or mutation) then rnaseq has to be pushed.\n        if (genomicsParam.includes('Mutation')) {\n            queryData.push(axios.get(`/api/v1/mutation?genes=${geneParam}&dataset=${datasetParam}`, { headers: { Authorization: localStorage.getItem('user') } }));\n            genomics.push('Mutation');\n        }\n        if (genomicsParam.includes('RNASeq') || genomicsParam.includes('Expression')) {\n            queryData.push(axios.get(`/api/v1/rnaseq?genes=${geneParam}&dataset=${datasetParam}`, { headers: { Authorization: localStorage.getItem('user') } }));\n            genomics.push('RNASeq');\n        }\n        if (genomicsParam.includes('CNV')) {\n            queryData.push(axios.get(`/api/v1/cnv?genes=${geneParam}&dataset=${datasetParam}`, { headers: { Authorization: localStorage.getItem('user') } }));\n            genomics.push('CNV');\n        }\n\n        Promise.all([...queryData])\n            .then((response) => {\n                this.updateResults(response, genomics);\n            });\n    }\n\n    updateResults(result, genomics) {\n        // grab the last array(patient array) from result[0]\n        const dataset = result[0].data;\n\n        // grabbing the total patients from hmap.\n        let hmapPatients = dataset.pop();\n\n        // removing last element from each array element of result\n        if (result.length > 1) {\n            result.forEach((value, i) => {\n                if (i !== 0) {\n                    value.data.pop();\n                }\n            });\n        }\n\n        // this is according to the object and heatmap sequence.\n        result.forEach((value, i) => { // can't break in forEach use for if wanna break.\n            const dataObject = {};\n            if (value.data.length > 0) {\n                hmapPatients.forEach((patient) => {\n                    if (!result[i].data[0][patient]) {\n                        dataObject[patient] = '';\n                    } else {\n                        dataObject[patient] = result[i].data[0][patient];\n                    }\n                });\n            }\n            hmapPatients = Object.keys(dataObject);\n        });\n\n        // setting patients genes and data for each of mutation,\n        // cnv and rna (given they are present)\n        const patient = {};\n        const genes = {};\n        const data = {};\n\n        genomics.forEach((value, i) => {\n            const val = value.substring(0, 3).toLowerCase();\n\n            // setting patients\n            const patientId = Object.keys(result[i].data[0]).filter((value) => {\n                let returnValue = '';\n                if (value !== 'gene_id') {\n                    returnValue = value;\n                }\n                return returnValue;\n            });\n            patient[`patient_${val}`] = patientId;\n\n            // genes\n            const geneId = result[i].data.map((data) => data.gene_id);\n            genes[`genes_${val}`] = geneId;\n\n            // data\n            data[`data_${val}`] = result[i].data;\n        });\n\n        // destructuring the states and prop.\n        const {\n            dataMut, dataRna, dataCnv,\n            genesMut, genesRna, genesCnv,\n            patientMut, patientRna, patientCnv,\n        } = this.state;\n        const { threshold } = this.props;\n\n        this.setState({\n            threshold,\n            hmapPatients,\n            patientMut: patient.patient_mut ? patient.patient_mut : patientMut,\n            patientRna: patient.patient_rna ? patient.patient_rna : patientRna,\n            patientCnv: patient.patient_cnv ? patient.patient_cnv : patientCnv,\n            genesMut: genes.genes_mut ? genes.genes_mut : genesMut,\n            genesRna: genes.genes_rna ? genes.genes_rna : genesRna,\n            genesCnv: genes.genes_cnv ? genes.genes_cnv : genesCnv,\n            dataMut: data.data_mut ? data.data_mut : dataMut,\n            dataRna: data.data_rna ? data.data_rna : dataRna,\n            dataCnv: data.data_cnv ? data.data_cnv : dataCnv,\n            dimensions: { height: 35, width: 20 },\n            margin: {\n                top: 75, right: 200, bottom: 100, left: 250,\n            },\n            loading: true,\n        });\n    }\n\n\n    render() {\n        const {\n            dimensions, margin, threshold, dataMut, dataRna, dataCnv, hmapPatients,\n            genesMut, genesRna, genesCnv, patientMut, patientRna, patientCnv, loading,\n        } = this.state;\n        return (\n            (dataMut.length || dataCnv.length || dataRna.length) ? (\n                <Oncoprint\n                    className=\"oprint_result\"\n                    dimensions={dimensions}\n                    margin={margin}\n                    threshold={Number(threshold)}\n                    hmap_patients={hmapPatients}\n                    genes_mut={genesMut}\n                    genes_rna={genesRna}\n                    genes_cnv={genesCnv}\n                    patient_mut={patientMut}\n                    patient_rna={patientRna}\n                    patient_cnv={patientCnv}\n                    data_mut={dataMut}\n                    data_rna={dataRna}\n                    data_cnv={dataCnv}\n                />\n            ) : (<div className=\"oprint-wrapper\"><Spinner loading={loading} /></div>)\n        );\n    }\n}\n\n\nSearchResultOncoprint.propTypes = {\n    datasetParam: PropTypes.string.isRequired,\n    geneParam: PropTypes.string.isRequired,\n    genomicsParam: PropTypes.string.isRequired,\n    threshold: PropTypes.string.isRequired,\n};\n\n\nexport default SearchResultOncoprint;\n","import React from 'react';\nimport SearchResultHeatMap from './SearchResultHeatMap';\nimport SearchResultOncoprint from './SearchResultOncoprint';\nimport GlobalStyles from '../../GlobalStyles';\nimport TopNav from '../TopNav/TopNav';\nimport { PatientProvider } from '../Context/PatientContext';\n\nclass SearchResult extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.setPatients = (patients) => {\n            this.setState({\n                globalPatients: patients,\n            });\n        };\n\n        this.state = {\n            drugParam: '',\n            datasetParam: '',\n            geneParam: '',\n            genomicsParam: '',\n            threshold: 0,\n            globalPatients: [],\n            setPatients: this.setPatients,\n        };\n    }\n\n    static getDerivedStateFromProps(props) {\n        // eslint-disable-next-line react/prop-types\n        const { location } = props;\n        // eslint-disable-next-line react/prop-types\n        const params = new URLSearchParams(location.search);\n        const genomics = params.get('genomics');\n        const drug = params.get('drug');\n        const dataset = params.get('dataset');\n        const gene = params.get('genes');\n        const threshold = params.get('threshold');\n        return {\n            drugParam: drug,\n            datasetParam: dataset,\n            geneParam: gene,\n            genomicsParam: genomics,\n            threshold,\n        };\n    }\n\n    render() {\n        const {\n            drugParam, datasetParam, geneParam, genomicsParam,\n            threshold, globalPatients, setPatients,\n        } = this.state;\n        const providerData = {\n            globalPatients,\n            setPatients,\n        };\n        return (\n            <div>\n                <TopNav />\n                <GlobalStyles />\n                <div className=\"wrapper\" style={{ margin: 'auto' }}>\n                    <PatientProvider value={providerData}>\n                        <SearchResultHeatMap\n                            drugParam={drugParam}\n                            datasetParam={datasetParam}\n                        />\n                        <SearchResultOncoprint\n                            geneParam={geneParam}\n                            datasetParam={datasetParam}\n                            genomicsParam={genomicsParam}\n                            threshold={threshold}\n                        />\n                    </PatientProvider>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport default SearchResult;\n","/* eslint-disable react/prefer-stateless-function */\nimport React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport {\n    CounterNav,\n    Dataset,\n    DatasetDonut,\n    Documentation,\n    DonutDrug,\n    DonutTissue,\n    DrugTable,\n    Footer,\n    GrowthCurveData,\n    HeatMapData,\n    Home,\n    Login,\n    OncoprintData,\n    SearchResult,\n    StatTable,\n} from './Components/index';\n\n\nconst Merge = () => (\n    <div>\n        <HeatMapData />\n        <OncoprintData />\n        <Footer />\n    </div>\n);\n\n\nclass App extends React.Component {\n    render() {\n        return (\n            <div>\n                <Router>\n                    <Switch>\n                        <Route path=\"/\" exact component={Home} />\n                        <Route path=\"/curve\" exact component={GrowthCurveData} />\n                        <Route path=\"/datasets\" exact component={DatasetDonut} />\n                        <Route path=\"/dataset/:id\" exact component={Dataset} />\n                        <Route path=\"/doc\" exact component={Documentation} />\n                        <Route path=\"/drugs\" exact component={DonutDrug} />\n                        <Route path=\"/drug/:id\" exact component={DrugTable} />\n                        <Route path=\"/home\" exact component={CounterNav} />\n                        <Route path=\"/login\" exact component={Login} />\n                        <Route path=\"/maps\" exact component={Merge} />\n                        <Route path=\"/search\" exact component={SearchResult} />\n                        <Route path=\"/tissues\" exact component={DonutTissue} />\n                        <Route path=\"/stat\" exact component={StatTable} />\n                        <Route render={() => <h1> 404 Error </h1>} />\n                    </Switch>\n                </Router>\n            </div>\n        );\n    }\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/logo.1de5f71c.png\";","module.exports = __webpack_public_path__ + \"static/media/bgImg7.3eb67c7e.png\";","module.exports = \"data:image/gif;base64,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\""],"sourceRoot":""}