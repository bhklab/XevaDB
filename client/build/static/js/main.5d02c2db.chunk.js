(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(t,e,a){t.exports=a.p+"static/media/bgImg7.3eb67c7e.png"},106:function(t,e){t.exports="data:image/gif;base64,R0lGODdhUABJAPcAAAAAAAAAVQAAYAAAgAAA/wAzhgBAgABOjwBOkABRjwBVkgBVqlVVqgFalAtblBRblANdmRxdlAtemCJelRJfmBlfmA9gmiZglhZhmhximitiliRkmzFklyplmzRmmWZmmThnmStonjZomjlpmi1qoTRsokFtnTpuokBvoD1xpTZyrDt0rUN0pUR2qkp2pUh3qUV5rkx6rE56plN7pkV8tFN9rUx+sVl+qlF/sACAgECAgFWArYCAgICAv4CA/1aBsVqCrVyEs2OFsWOGrGmGsl+It1yJu2SJtGaJr2mKr2SNu2uNtGmOunKOsnCPuG6RtnORtW2SvICUs3SVvXuVtnqWuW+XxHOXwGaZmXaZwpmZzH2au3ydxIKewYOevX2fyIWgv3+hyYOhxIyjv4Okyoulw4mmypKmwY+pxlWqqoiqu4qq0IyqzJOqxaqqqqqq1aqq/5Sty5mtx5Ku0ZmuyYmx2JWx05exzqSxxZyyzJu006G1zZy22KG20J+416m4zp2526S5z6W50qO826q907O90IC/v5+/v7+/v7+//67A1azC3LLD1qzE4bTF2bHH47nH2bbI3LzL3ZnMzKrM3bfM5szMzMzM5szM/7zN4rrP6MHP3sHP4LzQ3b7R6MDR3sTS4rjT8sLU66rV1arV6tXV1dXV/8rW5MzX6MTY68za5bbb283b6dvb29vb/9Pd5tPe6r/f39rf6tHh8dbh7Nvk7dzm8ebm5ujo/97p8tXq9ODr6+Pr8+bt+O7u7u7u9ePw9uPx+Ovz9uz0+vP1/ur4//T6/gD//4D//6r//7///8z/////7f///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkHAM4ALAAAAABQAEkAAAj/AJ0JHEiwoMGDCBMqXMiwoUOGtRgpIiTJ2MOLGDMaZOXoTpgvXNYsOsVLo8mTB5tJ2iOmhoIGDhwoUMCkTBlYKHNm5HUqE5kTDSaAGEGUqAMKO/QIkqSz6UJQdLg0aKBhqAgPFzR48DDCwwQFNqbsqeW0rEBQjAQt2aCAK1EPETqwOJHhwlCiExykEFOGkC2zKHkRElNkKlcRXRWUCFIGLZQYCiIcHsFBQYgsdBgB1piHzw4HkruO0KAgA5c2jggKelSjwQMOojlMVVKFU67NDNF2SaFggtvRCliIoXgwF6tGQkoo4HDXw4MKMcyUUYX7IKM4ZDJQHYHYa3A2hHAu/5QkSIzyqtxBXGjQgk0eptVfnWpzRPnhrQ8a1GgkiezDU4LYEYIDvhVFGgk1wVJSWbXssUUQFIT2VgQlHKEHIQtmBAsoZfyAgQIaFOWBAyHUsAgj4qEECiFmKFFBaCKAoEEDGTAGilOOtMFFCQ7AhhgHX8UQByGZaDRMLZksAZmEIORVwhSewFdWL5J0wUUHBDZ3gQIxLJFJLRky5IgoS3TwwAWiOafAD1BE8ldCEQHxlgcinBBDH7QwBIsjS+AQGVdcXeDABktooshCr3AIBEzMcQXCAxkoEYciNx60CSNeJLEEFzas4OmnNETRxRBLEJJnQuTF8UMDEQzlAQgcOP/QABBgSFLpQM3AIoggO3QgYWINKNFFIG8W5IgjixwRwwkdNHDAAyJ0sMEGHXjQQAIKdFBCDELEwYmUBsEiySCLtiXiBB3UMMcepwwESygssLoVYgdywS5CoDj4AwQTPODACS0YIYQIN0DRhJxLMNHCSw488MAGZNCRokG1AEgGCSC66lUDMQxyqDNQqPDAW6M1sAEbbYBi0UGSiIHDAxpEQEEMVQyxRWMGvZKHF4SQ8cMGMOs1Rx4KNaNKHHO0QGBXMUZAwxECAdHCVnAFJ4YjnCQ0nxIOxNxAEHowohlDxjBSRhtRlEAVx4OkphAoYogRwwEXbDXCCiIIxMIKW2n/UMMgezwFSAkTVMZEHKecilG+U2zggQYbQHFrQrSQV4NWHqwwgkAopLBVCXKEad0aDXCgwQlsODJMTpKUEUOPCkTh9kLDeFFt5h4INMIJW9HQwXhkKDDC12hQ55QgU6TAAgRKRNKQkhqIwLdAJniOu0Ks2NGACQlMAS6OhOSRB2r+KfRY9NM7szcHmW+eUCMNDJ/F5NU5VEUM6Oeu/grsa56QICngwAOmQL/6NeR++dMb/9qHEFjMoS0nCIQBM4JA6elvfQw8iCAcp4BKrG6CF9kC/iyowP65ryCSmENQjvA9EDLEC5cj4f5MeJA8tEADJaCDCzEyhhpcQIYY9J9B//wANCbMbocNOYMPZeiCBQqxIFWIwAbKgMSLtOEHE2CiE09IkCU4oEtVfMgVs5i+JvZPfwVhQQSOELgwNmSMMpSBE9FIkBF0IAhUcGND8hAEMupPjmc8iB2VsAU9MuQPQojA3fQ3gzkKsgNGWIIhF8IIIowsfTVwpEFOoIEgFHKSCZHC5a7njB1osiA1eEAQxgDKhChABVdZgQYEYspAGmQJD+hAG1tpkEVmjgMCyaQtC8IFa4mhfLwcSPsiIAQ8RK0FwySIIygwgRhsIpkFad8DhFCIZ2olfQWBRBa+kgfR8XKZQWjjEG5ISoNsIQMaiIEgsKlMvE0gCERzxjq/Sf9HgjBCCRFoQBiOeE57BkGH+mQnOAsyjEU0AAQb2AJBQZk5EUzgB20QyD7baRBQXKEBHihBHIxXUItiVCBJgME385YQQhQBZixAwyeSeTcRXKAGrHTGElQqvQkoZBiZCIFWLBAHZOrEGLxIKi9e4RAHqGA0OBXI+TI3g4XwwhEDAoECuDBRk0hiEZV4xCIa0YxmNKQJMXhcVJ0hQq10gAqgIOlBeJGJIwjvAS1AQ1f/k4crvAQBJPjkQnLBCCR0JZ5eEEgPMdeBpOQBFGY9yDAU0TgNQC4IaMjnQ1a0CCaEAGYNYAIhciMJLsTAcWrNqRwu1xW4sIcPkpBrQUARhxb/gHQCFVBCE6Bwr4TkwhFb8IISMhCBGcXAPU8RBBkwQBW7+U0OAiktAkLUHdKEgAuPTYgjABGCDPSrAy1QAhKoAIU4XHMImxAEEKBAhSi0IAITiEAGUmAv2RaEEG2YAnN91JUJICALUmrZwh4wGQ8oJgp72IM5naGKTMyhBiyQCUw2IIIXzOUEKXhBCjowEwVcoAQ1MIMg9uqMWoBiEDVgi1tAYOAN1EAPrCjIKSSRB64RODYNoIASFiGJYhmrDVQIww8svIEDNKADZkpAAuwUgyssYTpMRQgtCKGHFARlMrHKQBbiQOJhCKIMUYBABPgLlwP84Gr2FcgwQHEzEVCh/xFcUIIRrDAIOozAC2MYrUIkoQi5JQA9MZqRaQhRQIRIghD1SUDdRBPQFLgHsgupRR+2MAU2qOKDCjEGKNpAhvNwZwQgCGgMuJCJQjNEEHqIQVCsAhwSmIEQqhCGU2yRryttB1ARUEAQqsCIBT+kFnSYg6pvTBTSKGAKZYiD4jQCCzSIIQozcctWSvMDj7WrKaCgsRJg8qqiNAADFiJ0RsijhyBk4AGsnlEDovBYHzuFF5LQwxRcEyJcrwkKinC3bwXxhCD8qbUzCgEZHAEKowKGF7AQRRRY4OG7NEkvfJGEr4UhCUdMoQUPEIqBNpACMuTBEZF1oSMIUQY/aSU9M6QqQRg+bpBN5IELEGhud4L0BIIbEhaEGES8xvxp0kiAkKcgC36ZIIEeiUi+LmjEx1oJCwAFAWMn7wqkYiAGn2lH2qRZDIxvQ09nRCIPYlBaiN4ygQZUoECv0gBeuUAH53VdxmXYAsOJLZr+PuBJYjD1251BC1B04QiM4oDgHfaDKWQizXsvyFXLcIUVtKAFK4iCF3aZ+IbwQhE7yPwM9oD4ync9IAA7"},163:function(t,e,a){t.exports=a(216)},216:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(12),o=a.n(s),l=a(78),i=a(15),c=a(17),d=a(39),p=a.n(d),h=a(8),m=a.n(h),g=a(9),u=a(10);function f(){const t=Object(g.a)(["\n    display: flex;\n    background-color: rgb(255,255,255,0.8);\n    min-height: 70px;\n    max-height: 70px;\n    position: fixed;\n    bottom:0;\n    left:0;\n    width: 100%;\n    align-items: flex-end;\n    justify-content: space-around;\n    flex-wrap: wrap;\n    font-family: 'Raleway', sans-serif;\n    font-weight:500;\n    font-size: 1.4em;\n    padding-bottom:5px;\n    a{\n        padding: 10px;\n        color: #3453b0;\n        letter-spacing: 2px;\n        font-weight: bold;\n        font-size: 20px;\n        text-decoration: none;\n        &:hover {\n            color: #cd5686;\n        }\n        text-align:center;\n    }\n    h4 {\n        margin-top: 3px;\n        margin-bottom: 0px;\n    }\n\n    @media screen and (max-width: 1500px) {\n        a {\n            font-size: 18px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 100px;\n        }\n    }\n\n    @media screen and (max-width: 1300px) {\n        a {\n            font-size: 18px;\n        }\n        \n        a:nth-child(1) {\n            margin-left : 10px;\n        }\n    }\n\n    @media screen and (max-width: 1000px) {\n        a {\n           font-size: 14px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 0px;\n        }\n    }\n\n    @media screen and (max-width: 700px) {\n        a {\n           font-size: 10px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 0px;\n        }\n    }\n"]);return f=function(){return t},t}var x=u.b.div(f()),b=a(103),A=a.n(b);function y(){const t=Object(g.a)(["\n\n  body {\n    background: linear-gradient(\n      to right top,\n      rgba(255, 255, 255, 0.3), \n      rgba(255, 255, 255, 0.3)\n    ),url('","');\n    background-size: cover;\n    background-attachment: fixed;\n    background-position: center;\n    margin: auto;\n    width:100%;\n  }\n\n  #root {\n    display: flex;\n    min-height: 100vh;\n    flex-direction: column;\n    \n    min-width:100vw;\n    width:auto;\n    position:relative;\n    margin:0px;\n  }\n\n  .wrapper {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    h1 {\n      font-family:'Raleway', sans-serif;\n      font-weight:700;\n      text-align:center;\n      color: #3453b0;\n    }\n  }\n\n  .heatmap-wrapper, .doc-wrapper {\n    margin-top: 200px;\n  }\n\n  .oprint-wrapper {\n    margin-bottom:100px;\n  }\n\n  .heatmap-wrapper, .oprint-wrapper {\n    min-width:1417px;\n  }\n  .heatmap-wrapper, .oprint-wrapper, .curve-wrapper,\n  .donut-wrapper, .doc-wrapper { //put all wrappers here and wrap them with wrapper\n    background:white;\n    font-family:'Raleway', sans-serif;\n  }\n\n  .donut-wrapper {\n    margin-bottom:20px;\n    min-width:1300px;\n  }\n\n  .heatmap, .oprint {\n    height:700px;\n    overflow:auto;\n  }\n\n  .curve-wrapper {\n    min-width:1300px;\n    display:flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    a {\n      text-decoration:none;\n      font-size:16px;\n      padding:20px;\n      font-family: 'Raleway', sans-serif;\n      color: #3453b0;\n    }\n\n    .no-graph {\n      padding:50px;\n    }\n  }\n"]);return y=function(){return t},t}var v=Object(u.a)(y(),A.a),E=a(253);function C(){const t=Object(g.a)(["\n    width:calc(5em + 2vw);\n    margin-top:2px;\n    z-index:999;\n"]);return C=function(){return t},t}function w(){const t=Object(g.a)(["\n    display: flex;\n    justify-content: space-around;\n    width: 60%;\n\n    a {\n        color: #3453b0;\n        text-decoration: none;\n        letter-spacing:1px;\n        font-family: 'Raleway', sans-serif;\n        font-weight:700;\n        font-size: 24px;\n        &:hover {\n            color: #cd5686;\n            cursor:pointer;\n        }\n    }\n\n    \n    a:nth-child(1) {\n        margin-left : 600px;\n    }\n\n    a:nth-child(6) {\n        margin-right : -200px;\n    }\n\n    @media screen and (max-width: 2100px) {\n        a {\n            font-size: 20px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 100px;\n        }\n\n        a:nth-child(6) {\n        margin-right : -100px;\n        }\n    }\n\n    @media screen and (max-width: 1300px) {\n        a {\n            font-size: 18px;\n        }\n        \n        a:nth-child(1) {\n            margin-left : 10px;\n        }\n    }\n\n    @media screen and (max-width: 1000px) {\n        a {\n           font-size: 14px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 0px;\n        }\n    }\n\n    @media screen and (max-width: 700px) {\n        a {\n           font-size: 10px;\n        }\n\n        a:nth-child(1) {\n            margin-left : 0px;\n        }\n    }\n"]);return w=function(){return t},t}function k(){const t=Object(g.a)(["\n    *{\n        margin: 0px;\n        padding: 0px;\n        box-sizing: border-box;\n    }\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    min-height: 80px;\n    max-height: 100px;\n    font-family: 'Raleway', sans-serif;\n    background-color: rgb(255,255,255,0.8);\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n"]);return k=function(){return t},t}const D=u.b.header(k()),S=u.b.div(w()),R=u.b.img(C());var _=a(59),P=a.n(_);class B extends r.a.Component{constructor(t){super(t),this.state={isLogged:"Login",isLink:"/login"},this.isLoggedIn=this.isLoggedIn.bind(this)}static getDerivedStateFromProps(){let t="";return t=localStorage.getItem("user")?{isLogged:"Logout",isLink:"/login"}:{isLogged:"Login"},t}isLoggedIn(){"Logout"===this.state.isLogged&&(localStorage.removeItem("user"),this.setState({isLogged:"Login",isLink:"/login"}))}render(){const t=this.state,e=t.isLink,a=t.isLogged;return r.a.createElement(D,null,r.a.createElement(i.b,{to:"/"},r.a.createElement(R,{src:P.a,alt:"logo"})),r.a.createElement(S,null,r.a.createElement(i.b,{to:"/"}," Home "),r.a.createElement(i.b,{to:"/datasets"}," Datasets "),r.a.createElement(i.b,{to:"/drugs"}," Drugs "),r.a.createElement(i.b,{to:"/tissues"}," Tissues "),r.a.createElement(i.b,{to:"/doc"}," Documentation "),r.a.createElement(i.b,{to:"".concat(e)},r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:this.isLoggedIn},a))))}}var N=B;class M extends r.a.Component{constructor(t){super(t),this.state={drugs:0,patients:0,datasets:0,tissues:0,models:0}}componentDidMount(){m.a.get("/api/v1/counter",{headers:{Authorization:localStorage.getItem("user")}}).then(t=>{this.setState({tissues:t.data.data[0][0].tissues,drugs:t.data.data[1][0].drugs,patients:t.data.data[2][0].patients,models:t.data.data[3][0].models,datasets:t.data.data[4][0].datasets})})}render(){const t=this.state,e=t.datasets,a=t.tissues,n=t.patients,s=t.drugs,o=t.models;return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(v,null),r.a.createElement(x,null,r.a.createElement(i.b,{to:"/datasets"},r.a.createElement(p.a,{start:0,end:e,duration:3,useEasing:!0}),r.a.createElement("h4",null," DATASETS ")),r.a.createElement(i.b,{to:"/tissues"},r.a.createElement(p.a,{start:0,end:a,duration:3,useEasing:!0}),r.a.createElement("h4",null," TISSUES ")),r.a.createElement(i.b,{to:"/"},r.a.createElement(p.a,{start:0,end:n,duration:3,useEasing:!0}),r.a.createElement("h4",null," PATIENTS ")),r.a.createElement(i.b,{to:"/"},r.a.createElement(p.a,{start:0,end:o,duration:3,useEasing:!0}),r.a.createElement("h4",null," MODELS ")),r.a.createElement(i.b,{to:"/drugs"},r.a.createElement(p.a,{start:0,end:s,duration:3,useEasing:!0}),r.a.createElement("h4",null," DRUGS "))))}}var F=M,T=a(43),I=a(3);const O=r.a.createContext({globalPatients:[],setPatients:()=>{}}),H=O.Provider,G=O.Consumer;var K=O;const L=(t,e,a)=>t.append("rect").attr("x",0).attr("y",0).attr("width",e).attr("height",a).attr("stroke","black").attr("stroke-width",1).style("fill","white"),z=(t,e)=>I.r().domain([t,e]).range([0,1]),j=t=>{const e=t.map(t=>Number.isNaN(t)?0:t).sort(I.b),a=I.p(e,.25),n=I.p(e,.5),r=I.p(e,.75);return{sortedData:e,min:I.n(e),q1:a,median:n,q3:r,max:I.l(e)}};var Q=t=>{const e=t.data,a=t.response,s=t.patients,o=t.drugs,l=((t,e,a)=>{const n={},r={};let s=0,o=0;return t.forEach((t,l)=>{r[a[l]]=[],Object.keys(t).forEach(i=>{const c=t[i][e];Number(c)>o&&(o=Number(c)),Number(c)<s&&(s=Number(c)),n[i]||(n[i]=[]),void 0!==c&&"NA"!==c&&"empty"!==c&&(n[i].push(Number(c)),r[a[l]].push(Number(c)))})}),{parsedPatientData:n,minTotal:s,maxTotal:o,parsedDrugData:r}})(e,a,o),i=l.parsedPatientData,c=l.minTotal,d=l.maxTotal,p=l.parsedDrugData,h=Object.keys(i).length,m=(()=>{const t={top:1,right:1,bottom:1,left:1};return{margin:t,patientHeight:100-t.top-t.bottom,patientWidth:20-t.left-t.right,drugHeight:35-t.top-t.bottom,drugWidth:70-t.left-t.right}})(),g=m.patientWidth,u=m.patientHeight,f=m.margin,x=m.drugHeight,b=m.drugWidth,A=(g+f.left+f.right)*h,y=u+f.bottom+f.top,v=b+f.left+f.right,E=(x+f.bottom+f.top)*o.length;return Object(n.useEffect)(()=>{I.u("#boxplotsvgtop").remove(),I.u("#svg-y-axis").remove();const t=z(c,d),e=((t,e,a)=>{const n=z(e,a);return I.r().domain([n(e),n(a)]).range([t-2,3])})(u,c,d),a=((t,e,a)=>{const n=z(e,a);return I.r().domain([n(e),n(a)]).range([2,t-2])})(b,c,d);((t,e,a,n,r)=>{const s=I.t("#boxplot").append("svg").attr("width",e+n.left+n.right+10).attr("height",a+n.top+n.bottom).attr("transform","translate(220, 150)").attr("id","svg-".concat(r)),o=I.d().scale(t).ticks(7).tickSize(0);s.append("g").attr("transform","translate(30, 0)").call(o)})(e,g,u,f,"y-axis"),((t,e,a)=>{const n=I.e().scale(t).ticks(3).tickSize(0);I.t("#heatmap-heatmap-g").append("g").attr("transform","translate(".concat(e+20,", ").concat(a,")")).call(n)})(a,A,x);const n=(r=A,l=y,h="boxplot",m="top",I.t("#".concat(h)).append("svg").attr("width",r).attr("height",l).attr("transform","translate(220, 150)").attr("id","boxplotsvg".concat(m)));var r,l,h,m;const C=((t,e,a,n)=>I.t("#".concat(t)).append("g").attr("transform","translate(".concat(a+20,", ").concat(n,")")).attr("id","boxplotsvg".concat(e,"-g")))("heatmap-heatmap-g","right",A,x);L(n,A,y),L(C,v,E);(0===s.length?Object.keys(i):s).forEach((a,r)=>{const s=((t,e,a,n)=>t.append("g").attr("transform","translate(".concat((a+e.left+e.right)*n,",").concat(e.top,")")).style("background-color","grey").attr("id","boxplotbody"))(n,f,g,r),o=i[a],l=j(o),c=l.median,d=l.min,p=l.max,h=l.q1,m=l.q3;((t,e,a,n,r,s)=>{n.append("line").attr("x1",t/2).attr("x2",t/2).attr("y1",r(s(e))).attr("y2",r(s(a))).attr("stroke","black").attr("stroke-width",.5)})(g,d,p,s,e,t),((t,e,a,n,r,s,o,l)=>{t.append("rect").attr("x",e.left).attr("y",s(l(n))).attr("height",s(l(r))-s(l(n))).attr("width",a).attr("stroke","black").attr("stroke-width",.5).style("fill","#69b3a2").attr("id","box".concat(o))})(s,f,g,m,h,e,a,t),((t,e,a,n,r,s,o)=>{t.selectAll("total").data([e,a,n]).enter().append("line").attr("x1",1).attr("x2",r+1).attr("y1",t=>s(o(t))).attr("y2",t=>s(o(t))).attr("stroke","black").attr("stroke-width",.5)})(s,d,c,p,g,e,t)}),o.forEach((e,n)=>{const r=((t,e,a,n)=>t.append("g").attr("transform","translate(0, ".concat((a+e.top+e.bottom)*n,")")))(C,f,x,n),s=p[e],o=j(s),l=o.median,i=o.min,c=o.max,d=o.q1,h=o.q3;((t,e,a,n,r,s)=>{n.append("line").attr("y1",t/2).attr("y2",t/2).attr("x1",r(s(e))).attr("x2",r(s(a))).attr("stroke","black").attr("stroke-width",.5)})(x,i,c,r,a,t),((t,e,a,n,r,s,o,l)=>{t.append("rect").attr("x",s(l(r))).attr("y",e.top).attr("height",a).attr("width",s(l(n))-s(l(r))).attr("stroke","black").attr("stroke-width",.5).style("fill","#69b3a2").attr("id","box".concat(o))})(r,f,x,h,d,a,e,t),((t,e,a,n,r,s,o)=>{t.selectAll("total").data([e,a,n]).enter().append("line").attr("x1",t=>s(o(t))).attr("x2",t=>s(o(t))).attr("y1",1).attr("y2",r+1).attr("stroke","black").attr("stroke-width",.5)})(r,i,l,c,x,a,t)})}),r.a.createElement("div",null,r.a.createElement("div",{id:"boxplot"}))};class U extends n.Component{constructor(t){super(t),this.state={modifiedPatients:[],responseValue:"mRECIST"},this.HeatMap=this.HeatMap.bind(this),this.makeHeatmap=this.makeHeatmap.bind(this),this.rankHeatMap=this.rankHeatMap.bind(this),this.rankHeatMapBasedOnOncoprintChanges=this.rankHeatMapBasedOnOncoprintChanges.bind(this)}componentDidMount(){this.HeatMap()}HeatMap(){const t=this.node,e=this.props.data,a=this.props.drugId,n=this.props.patientId,r=this.props.dimensions,s=this.props.margin,o=this.props.className,l=this.props.dataset,i=this.state.responseValue;this.makeHeatmap(e,n,a,l,o,r,s,t,i)}makeHeatmap(t,e,a,n,r,s,o,l,i){const c=this.makeHeatmap,d=this;this.node=l;const p=s.height,h=s.width,m=a.length*p+100,g=e.length*h+100,u=[{CR:"#0033CC"},{PR:"#1a9850"},{SD:"#fed976"},{PD:"#e41a1c"}],f={CR:"#0033CC",PR:"#1a9850",SD:"#fed976",PD:"#e41a1c",empty:"lightgray",NA:"lightgray"},x=I.t(".heatmap-wrapper").append("div").attr("id","heatmap-tooltip").style("position","absolute").style("visibility","hidden").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","5px").attr("top",10).attr("left",20);let b="",A=0;const y=e;let v=0,E={};if("mRECIST"===i)for(let T=0;T<a.length;T++)E[a[T]]={CR:0,PR:0,SD:0,PD:0,NA:0,empty:0};let C={};if("mRECIST"===i)for(let T=0;T<e.length;T++)C[e[T]]={CR:0,PR:0,SD:0,PD:0,NA:0,empty:0,total:0};function w(t,e){const n=a[e],r=Object.entries(t);let s=0;r.forEach(t=>{""===t[1]&&(t[1]="empty"),E[n][t[1][i]]++,C[t[0]][t[1][i]]++,"NA"===t[1]&&"empty"===t[1]||(s++,C[t[0]].total++)}),s>v&&(v=s)}function k(t,e){if(0===e&&(b=a[A],A++),2===t.length&&"NA"!==t||Number(t))return"/curve?patient=".concat(y[e],"&drug=").concat(b)}const D=I.q().domain(a).rangeRound([p,a.length*p+p]),S=I.q().domain(e).rangeRound([0,e.length*h]),R=I.d().scale(D).tickSize(0).tickPadding(25),_=I.e().scale(S).tickSize(5),P=I.t(l).append("svg").attr("id","heatmap-".concat(r)).attr("xmlns","http://wwww.w3.org/2000/svg").attr("xmlns:xlink","http://wwww.w3.org/1999/xlink").attr("height",m+o.bottom+o.top).attr("width",g+o.left+o.right).append("g").attr("transform","translate(".concat(o.left,",").concat(o.top,")")).attr("id","heatmap-".concat(r,"-g"));a.forEach((t,e)=>{P.append("circle").attr("cx",-12).attr("cy",e).attr("r",6).attr("id","circle-".concat(t.replace(/\s/g,"").replace(/\+/g,""))).style("fill","#5b8c85").attr("transform","translate(0,".concat(D(t)+15-e,")")).style("visibility","hidden")});const B=P.append("g").attr("id","skeleton"),N=B.append("g").attr("id","targ_rect").selectAll("g").data(t).enter().append("g").attr("transform",(t,e)=>"translate(0,".concat(e*p,")")),M=N.selectAll("rect.hmap-rect").data((t,a)=>{"mRECIST"===i&&w(t,a);return e.map(e=>{let a="";return 0===t[e].length?a="empty":"object"===typeof t[e]&&null!==t[e]&&(a=t[e][i]),a})}).enter().append("a").attr("xlink:href",(t,e)=>k(t,e)).append("rect").attr("class",(t,a)=>"hmap-rect heatmap-".concat(e[a])).attr("width",h-2).attr("height",p-2).attr("x",(t,e)=>e*h).attr("y",p),F=function(){let e=0,a=0;return t.forEach(t=>{Object.keys(t).forEach(n=>{Number(t[n][i])>a&&(a=Number(t[n][i])),Number(t[n][i])<e&&(e=Number(t[n][i]))})}),[e,a]}(),O=Object(T.a)(F,2),H=O[0],G=O[1],K=I.r().domain([H,0,G]).range(["#5ab4ac","#f7f7f7","#d8b365"]);M.attr("fill",t=>"mRECIST"===i?f[t]:"mRECIST"===i||"empty"!==t&&"NA"!==t?K(t):"lightgray"),E={};for(let T=0;T<a.length;T++)E[a[T]]={CR:0,PR:0,SD:0,PD:0,NA:0,empty:0};C={};for(let T=0;T<e.length;T++)C[e[T]]={CR:0,PR:0,SD:0,PD:0,NA:0,empty:0,total:0};let L=0;A=0,N.selectAll("rect.hmap-hlight").data((t,a)=>{"mRECIST"===i&&w(t,a);return e.map(e=>{let a="";return 0===t[e].length?a="empty":"object"===typeof t[e]&&null!==t[e]&&(a=t[e][i]),a})}).enter().append("a").attr("xlink:href",(t,e)=>k(t,e)).append("rect").attr("class",(t,n)=>{const r=a[L].replace(/\s/g,"").replace(/[.]/g,"").replace(/[+]/g,"-");return n===e.length-1&&L++,"hmap-hlight-".concat(e[n]," hmap-hlight-").concat(r)}).attr("width",h-2).attr("height",p-2).attr("x",(t,e)=>e*h).attr("fill","rgb(0,0,0)").attr("y",p).style("opacity",0).on("mouseover",(function(t,a){const n=e[a];((t,e,a,n)=>{x.style("visibility","visible");const r=x.style("left","".concat(t+10,"px")).style("top","".concat(e+10,"px")).style("color","#000000").style("background-color","#ffffff"),s=["Patient: ".concat(a),"Response Evaluation: ".concat(n)];r.selectAll("textDiv").data(s).enter().append("div").attr("id","tooltiptextonco").html(t=>{const e=t.split(":");return"<b>".concat(e[0],"</b>: ").concat(e[1])}).attr("x","".concat(t+10,"px")).attr("y",(t,a)=>"".concat(e+10+10*a,"px"))})(I.h.pageX,I.h.pageY,n,t);const r=I.t(this).attr("class").split(" ")[1];return I.u(".hmap-hlight-".concat(e[a])).style("opacity",.2),I.u(".oprint-hlight-".concat(e[a])).style("opacity",.2),I.u(".hlight-space-".concat(e[a])).style("opacity",.2),r})).on("mouseout",(function(t,a){x.style("visibility","hidden"),I.u("#tooltiptextonco").remove();const n=I.t(this).attr("class").split(" ")[1];return I.u(".hmap-hlight-".concat(e[a])).style("opacity",0),I.u(".oprint-hlight-".concat(e[a])).style("opacity",0),I.u(".hlight-space-".concat(e[a])).style("opacity",0),n}));const z=B.append("g").attr("id","lines").attr("transform",()=>"translate(2,".concat(m-62,")")),j=e.slice(0);j.push(""),z.selectAll("line.dashed-line").data(j).enter().append("line").attr("class","dashed-line").attr("x1",(t,e)=>e*h-3).attr("x2",(t,e)=>e*h-3).attr("y1",2).attr("y2",200).attr("stroke","black").attr("stroke-width",1).style("stroke-dasharray","3 2").style("opacity",.2),z.selectAll("rect.hlight-space").data(e).enter().append("rect").attr("class",t=>"hlight-space-".concat(t)).attr("width",h-2).attr("height",200).attr("x",(t,e)=>e*h-2).attr("fill","rgb(0,0,0)").attr("y",0).style("opacity",0);B.append("g").attr("id","drugName").attr("stroke-width","0").style("font-family","'Raleway',sans-serif").style("font-size","12px").attr("font-weight","500").call(R).selectAll("text").attr("fill",t=>"untreated"===t||"WATER"===t||"Control"===t?"#3453b0":"black").attr("font-weight",t=>"untreated"===t||"WATER"===t||"Control"===t?"700":"500").attr("id",t=>"tick-".concat(t.replace(/\s/g,"").replace(/\+/g,""))).on("mouseover",(function(){I.t(".heatmap-wrapper").append("div").style("position","absolute").style("border","solid").style("visibility","visible").style("border-width","1px").style("border-radius","5px").style("padding","5px").style("left","".concat(I.h.pageX-100,"px")).style("top","".concat(I.h.pageY+15,"px")).attr("id","tooltiptextdrug").style("color","#000000").style("background-color","#ffffff").text("Click to Sort");const t=I.t(this).text().replace(/\s/g,"").replace(/[.]/g,"").replace(/[+]/g,"-");I.u(".hmap-hlight-".concat(t)).style("opacity",.2)})).on("mouseout",(function(){x.style("visibility","hidden"),I.t("#tooltiptextdrug").remove();const t=I.t(this).text().replace(/\s/g,"").replace(/[.]/g,"").replace(/[+]/g,"-");I.u(".hmap-hlight-".concat(t)).style("opacity",0)})).on("click",(e,a)=>{x.style("visibility","hidden"),I.t("#tooltiptextdrug").remove(),this.rankHeatMap(e,a,t,i)});if(B.append("g").attr("id","patient_id").attr("stroke-width","0").style("font-size","12px").style("font-family","'Raleway',sans-serif").style("text-anchor","7"===n?"start":"middle").call(_).selectAll("text").attr("transform","rotate(-90)").attr("font-weight","500").attr("x","7"===n?"-2.4em":"0.6em").attr("y",".15em"),"mRECIST"===i){const t=B.append("g").attr("id","small_rect");t.selectAll("rect").data(u).enter().append("rect").attr("x",e.length*h+120).attr("y",(t,e)=>10*a.length+25*e).attr("height","15").attr("width","15").attr("fill",t=>Object.values(t)),t.selectAll("text").data(u).enter().append("text").attr("x",e.length*h+140).attr("y",(t,e)=>10*a.length+12+25*e).text(t=>Object.keys(t)).attr("font-size","14px");const n=.75,r=B.append("g").attr("id","drug_eval"),s=I.r().domain([0,v]).range([0,70]),o=I.e().scale(s).ticks(4).tickSize(3).tickFormat(I.i(".0f"));B.append("g").attr("transform","translate(".concat(e.length*h+20,",",35,")")).call(o).selectAll("text").attr("fill","black").style("font-size",8).attr("stroke","none");const l=I.r().domain([0,44+40*(a.length-1)]).range([0,p*a.length+10]);r.append("rect").attr("class","drug_eval_rect").attr("x",e.length*h+20).attr("y",35).attr("height",p*a.length).attr("width",s(v)).attr("fill","white").style("stroke","black").style("stroke-width",1);const i=t=>{let o=e.length*h+20,i=0;["CR","PR","SD","PD"].forEach(e=>{o+=i,i=s(E[a[t]][e]),r.append("rect").attr("class","drug_eval_".concat(e)).attr("height",26).attr("width",i).attr("x",o).attr("y",l(42+40*t)).attr("fill",f[e]).style("stroke","black").style("stroke-width",n)})};for(let e=0;e<a.length;e++)i(e);let c=0;const d=80;if(Object.entries(C).forEach(t=>{const e=t[1].total;e>c&&(c=e)}),a.length>1){const t=B.append("g").attr("id","patient_eval");t.append("rect").attr("class","patient_eval_rect").attr("x",0).attr("y",-130).attr("height",d).attr("width",20*e.length).attr("fill","white").style("stroke","black").style("stroke-width",1);const a=I.r().domain([0,c]).range([0,d]);if(0!==c){const t=I.r().domain([0,c]).range([d,0]),e=I.d().scale(t).ticks(2).tickSize(0).tickFormat(I.i(".0f"));B.append("g").attr("transform","translate(0,-130.5)").call(e)}const r=r=>{let s=0,o=-130+d;["CR","PR","SD","PD"].forEach(l=>{s=a(C[e[r]][l]),o-=s,t.append("rect").attr("class","patient_eval_cr").attr("height",s).attr("width",16).attr("x",20*r).attr("y",o).attr("fill",f[l]).style("stroke","black").style("stroke-width",n)})};for(let n=0;n<e.length;n++)r(n)}}I.t(".select").selectAll("option").data(["mRECIST","Slope","Best Average Response","AUC"]).enter().append("option").text(t=>t).attr("value",t=>t),I.t(".select").on("change",()=>{const i=I.t("select").property("value");let p="";switch(i){case"Slope":p="slope";break;case"Best Average Response":p="best.average.response";break;default:p=i}d.setState({responseValue:p},()=>{I.t("#heatmap-".concat(r)).remove(),I.t("#heatmap-tooltip").remove(),c(t,e,a,n,r,s,o,l,p)})}),"mRECIST"!==i&&function(t,e,a,n,r){const s=t.append("defs").append("linearGradient").attr("id","linear-gradient");s.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),s.append("stop").attr("offset","0%").attr("stop-color","#d8b365"),s.append("stop").attr("offset",n<0?"50%":"100%").attr("stop-color","#f7f7f7"),n<0&&s.append("stop").attr("offset","100%").attr("stop-color","#5ab4ac"),t.append("rect").attr("x",a+30).attr("y",e/4).attr("width",28).attr("height",129).style("fill","url(#linear-gradient)");const o=[r,n];t.append("g").attr("id","small_rect").selectAll("text").data(o).enter().append("text").attr("x",a+60).attr("y",(t,a)=>[e/4+15,e/4+125][a]).text(t=>t).attr("font-size","15px").style("text-anchor","start")}(P,m,g,H,G)}rankHeatMap(t,e,a,n){const r=a[e],s=this.node,o=this.props.dimensions,l=this.props.drugId,i=this.props.margin,c=this.props.className,d=this.props.dataset,p=[];if("mRECIST"===n)["CR","PR","SD","PD","","NA"].forEach(t=>{Object.keys(r).forEach(e=>{r[e][n]!==t&&r[e]!==t||p.push(e)})});else{const t=[];Object.keys(r).forEach(e=>{t.push([e,r[e][n]])}),t.sort((t,e)=>t[1]-e[1]),t.forEach(t=>{void 0===t[1]?p.push(t[0]):p.unshift(t[0])})}const h=[];a.forEach((t,e)=>{h.push({}),p.forEach(a=>{h[e][a]=t[a]})}),this.setState({modifiedPatients:p},()=>{(0,this.context.setPatients)(this.state.modifiedPatients)}),I.t("#heatmap-".concat(c)).remove(),I.t("#heatmap-tooltip").remove(),this.makeHeatmap(h,p,l,d,c,o,i,s,n),I.t("#circle-".concat(t.replace(/\s/g,"").replace(/\+/g,""))).style("visibility","visible")}rankHeatMapBasedOnOncoprintChanges(t){const e=this.node,a=this.props.data,n=this.props.drugId,r=t.globalPatients,s=this.props.dimensions,o=this.props.margin,l=this.props.className,i=this.props.dataset,c=this.state.responseValue,d=[];a.forEach((t,e)=>{d.push({}),r.forEach(a=>{d[e][a]=t[a]})}),r.length>0&&(I.t("#heatmap-".concat(l)).remove(),I.t("#heatmap-tooltip").remove(),this.makeHeatmap(d,r,n,i,l,s,o,e,c))}render(){const t=this.state.responseValue,e=this.props.data,a=this.state.modifiedPatients,n=this.props.drugId;return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("select",{className:"select",id:"selectButton",style:{display:"block",align:"right",height:"30px",marginTop:"290px",position:"absolute",right:"80px"}})),r.a.createElement("div",{ref:t=>{this.node=t},className:"heatmap-wrapper"},"mRECIST"!==t?r.a.createElement(Q,{response:t,data:e,patients:a,drugs:n}):r.a.createElement("div",null)),r.a.createElement(G,null,t=>{this.rankHeatMapBasedOnOncoprintChanges(t)}))}}U.contextType=K;var V=U;class q extends r.a.Component{constructor(t){super(t),this.state={data:[],patientId:[],drugId:[],datasetParam:0,dimensions:{},margin:{}},this.parseData=this.parseData.bind(this)}static getDerivedStateFromProps(t){return{datasetParam:t.dataset}}componentDidMount(){const t=this.state.datasetParam;t>0&&m.a.get("/api/v1/response/".concat(t),{headers:{Authorization:localStorage.getItem("user")}}).then(t=>{this.parseData(t.data)})}parseData(t){const e=[];let a=[];const n=[];a=t.pop(),t.forEach(t=>{const r={};n.push(t.Drug),a.forEach(e=>{t[e]?r[e]=t[e]:r[e]=""}),e.push(r)}),a=Object.keys(e[0]),this.setState({drugId:n,patientId:a,data:e,dimensions:{height:35,width:20},margin:{top:200,right:200,bottom:0,left:250}})}render(){const t=this.state,e=t.data,a=t.drugId,n=t.patientId,s=t.dimensions,o=t.margin,l=t.datasetParam;return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(v,null),e.length>0?r.a.createElement("div",{className:"wrapper",style:{margin:"auto"}},r.a.createElement(V,{data:e,drugId:a,className:"heatmap",patientId:n,dimensions:s,margin:o,dataset:l})):"")}}var Y=q;const X={missense:{label:"Missense",longName:"Missense",style:"missense_mutation",mainType:"missense",priority:3,color:"#1a9850"},inframe:{label:"IF",longName:"In-frame",style:"inframe_mutation",mainType:"inframe",priority:4,color:"#8B4513"},truncating:{label:"Truncating",longName:"Truncating",style:"trunc_mutation",mainType:"truncating",priority:6,color:"#000000"},nonsense:{label:"Nonsense",longName:"Nonsense",style:"trunc_mutation",mainType:"truncating",priority:8,color:"#000000"},nonstop:{label:"Nonstop",longName:"Nonstop",style:"trunc_mutation",mainType:"truncating",priority:9,color:"#000000"},nonstart:{label:"Nonstart",longName:"Nonstart",style:"trunc_mutation",mainType:"truncating",priority:10,color:"#000000"},frameshift:{label:"FS",longName:"Frame Shift",style:"trunc_mutation",mainType:"truncating",priority:6,color:"#000000"},frame_shift_del:{label:"FS del",longName:"Frame Shift Deletion",style:"trunc_mutation",mainType:"truncating",priority:6,color:"#000000"},frame_shift_ins:{label:"FS ins",longName:"Frame Shift Insertion",style:"trunc_mutation",mainType:"truncating",priority:7,color:"#000000"},in_frame_ins:{label:"IF ins",longName:"In-frame Insertion",style:"inframe_mutation",mainType:"inframe",priority:5,color:"#8B4513"},in_frame_del:{label:"IF del",longName:"In-frame Deletion",style:"inframe_mutation",mainType:"inframe",priority:4,color:"#8B4513"},splice_site:{label:"Splice",longName:"Splice site",style:"trunc_mutation",mainType:"truncating",priority:11,color:"#000000"},fusion:{label:"Fusion",longName:"Fusion",style:"fusion",mainType:"other",priority:12,color:"#8B00C9"},silent:{label:"Silent",longName:"Silent",style:"other_mutation",mainType:"other",priority:13,color:"#8B00C9"},default:{label:"Other",longName:"Other",style:"other_mutation",mainType:"other",priority:13,color:"#8B00C9"},other:{style:"other_mutation",mainType:"other",priority:13,color:"#8B00C9"}},J={missense_mutation:X.missense,mutation:X.missense,missense:X.missense,missense_variant:X.missense,frame_shift_ins:X.frame_shift_ins,frame_shift_del:X.frame_shift_del,frameshift:X.frameshift,frameshift_deletion:X.frame_shift_del,frameshift_insertion:X.frame_shift_ins,de_novo_start_outofframe:X.frameshift,frameshift_variant:X.frameshift,nonsense_mutation:X.nonsense,nonsense:X.nonsense,stopgain_snv:X.nonsense,stop_gained:X.nonsense,splice_site:X.splice_site,splice:X.splice_site,"splice site":X.splice_site,splicing:X.splice_site,splice_site_snp:X.splice_site,splice_site_del:X.splice_site,splice_site_indel:X.splice_site,splice_region_variant:X.splice_site,translation_start_site:X.nonstart,initiator_codon_variant:X.nonstart,start_codon_snp:X.nonstart,start_codon_del:X.nonstart,nonstop_mutation:X.nonstop,stop_lost:X.nonstop,in_frame_del:X.in_frame_del,in_frame_deletion:X.in_frame_del,in_frame_ins:X.in_frame_ins,in_frame_insertion:X.in_frame_ins,indel:X.in_frame_del,nonframeshift_deletion:X.inframe,nonframeshift:X.inframe,"nonframeshift insertion":X.inframe,nonframeshift_insertion:X.inframe,targeted_region:X.inframe,inframe:X.inframe,truncating:X.truncating,feature_truncation:X.truncating,fusion:X.fusion,silent:X.silent,synonymous_variant:X.silent,any:X.default,other:X.default},W={"-2":{label:"DeepDel",style:"cna-homdel",tooltip:"Deep deletion",color:"#0033CC",xevalabel:"del",priority:2},"-1":{label:"ShallowDel",style:"cna-hetloss",tooltip:"Shallow deletion",color:"#0033CC",xevalabel:"del",priority:2},0:{label:"Diploid",style:"cna-diploid",tooltip:"Diploid / normal",color:"lightgray",xevalabel:"empty",priority:16},1:{label:"Gain",style:"cna-gain",tooltip:"Low-level gain",color:"#e41a1c",xevalabel:"amp",priority:1},2:{label:"AMP",style:"cna-amp",tooltip:"High-level amplification",color:"#e41a1c",xevalabel:"amp",priority:1},"del0.8":{label:"DeepDel",style:"cna-homdel",tooltip:"Deep deletion",color:"#0033CC",xevalabel:"del",priority:2},deletion:{label:"DeepDel",style:"cna-homdel",tooltip:"Deep deletion",color:"#0033CC",xevalabel:"del",priority:2},"shallow deletion":{label:"DeepDel",style:"cna-homdel",tooltip:"Deep deletion",color:"#0033CC",xevalabel:"del",priority:2},"deep deletion":{label:"DeepDel",style:"cna-homdel",tooltip:"Deep deletion",color:"#0033CC",xevalabel:"del",priority:2},gain:{label:"Gain",style:"cna-gain",tooltip:"Low-level gain",color:"#e41a1c",xevalabel:"amp",priority:1},amp:{label:"AMP",style:"cna-amp",tooltip:"High-level amplification",color:"#e41a1c",xevalabel:"amp",priority:1},amplification:{label:"AMP",style:"cna-amp",tooltip:"High-level amplification",color:"#e41a1c",xevalabel:"amp",priority:1},unknown:{label:"NA",style:"cna-unknown",tooltip:"CNA data is not available for this gene",xevalabel:"empty",priority:16}},Z={positive:{priority:14},negative:{priority:15},"not available":{priority:16}};class $ extends r.a.Component{constructor(t){super(t),this.Oncoprint=this.Oncoprint.bind(this),this.rankOncoprintBasedOnHeatMapChanges=this.rankOncoprintBasedOnHeatMapChanges.bind(this),this.rankOncoprint=this.rankOncoprint.bind(this)}componentDidMount(){this.Oncoprint()}Oncoprint(t){let e=this.props.hmap_patients;e=t||e;const a=this.node,n=this.props.className,r=this.props.dimensions,s=this.props.margin,o=this.props.threshold,l=this.props.data_mut,i=this.props.data_rna,c=this.props.data_cnv,d=this.props.genes_mut,p=this.props.genes_rna,h=this.props.genes_cnv,m=this.props.patient_mut,g=this.props.patient_rna,u=this.props.patient_cnv;this.makeOncoprint(a,n,r,s,o,e,l,i,c,d,p,h,m,g,u)}makeOncoprint(t,e,a,n,r,s,o,l,i,c,d,p,h,m,g){this.node=t;let u=!1;Array.prototype.unique=function(){const t=this.concat();for(let e=0;e<t.length;++e)for(let a=e+1;a<t.length;++a)t[e]===t[a]&&t.splice(a--,1);return t};const f=[...c,...d,...p].unique(),x=[...h,...m,...g].unique(),b=[{value:"missense",color:"#1a9850"},{value:"inframe",color:"#8B4513"},{value:"truncating",color:"#000000"},{value:"other",color:"#8B00C9"},{value:"del",color:"#0033CC"},{value:"amp",color:"#e41a1c"}],A=a.height,y=a.width,v=f.length*A+100,E=s.length*y+100;let C=[];o.length>0&&(C=[{value:"Missense Mutation",color:"#1a9850"},{value:"Inframe Mutation",color:"#8B4513"},{value:"Truncating Mutation",color:"#000000"},{value:"Other Mutations",color:"#8B00C9"}]);let w=[];l.length>0&&(w=[{value:"mRNA High",color:"none"},{value:"mRNA Low",color:"none"}]);let k=[];i.length>0&&(k=[{value:"Deletion",color:"#0033CC"},{value:"Amplification",color:"#e41a1c"}]);const D=[...C,...w,...k,{value:"Wild Type",color:"lightgray"},{value:"Not Available",color:"none"}],S=I.t(".oprint-wrapper").append("div").style("position","absolute").style("visibility","hidden").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","5px").attr("top",10).attr("left",20),R=I.t(t).append("svg").attr("id","oncoprint-".concat(e)).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("width",E+n.left+n.right).attr("height",v+n.top+n.bottom).append("g").attr("transform","translate(".concat(n.left,",").concat(n.top,")")),_=R.append("g").attr("id","skeleton");f.forEach((t,e)=>{R.append("circle").attr("cx",-12).attr("cy",e).attr("r",6).attr("id","circle-".concat(t.replace(/\s/g,"").replace(/\+/g,""))).style("fill","#5b8c85").attr("transform","translate(0,".concat(e*A+15-e,")")).style("visibility","hidden")});const P=_.append("g").attr("id","gene-names");(()=>{for(let t=0;t<f.length;t++)P.append("text").attr("class",f[t]).attr("dx",-25).style("text-anchor","end").style("font-size","12px").attr("dy",t*A+20).attr("font-weight","500").text(f[t]).on("mouseover",()=>{I.t(".oprint-wrapper").append("div").style("position","absolute").style("border","solid").style("visibility","visible").style("border-width","1px").style("border-radius","5px").style("padding","5px").style("left","".concat(I.h.pageX-100,"px")).style("top","".concat(I.h.pageY+15,"px")).attr("id","tooltiptextgene").style("color","#000000").style("background-color","#ffffff").text("Click to Sort"),I.u(".oprint-hlight-".concat(f[t])).style("opacity",.2)}).on("mouseout",()=>{S.style("visibility","hidden"),I.t("#tooltiptextgene").remove(),I.u(".oprint-hlight-".concat(f[t])).style("opacity",0)}).on("click",()=>{S.style("visibility","hidden"),I.t("#tooltiptextgene").remove(),this.rankOncoprint(f[t],[o,i,l])})})();const B=R.append("g").attr("id","alterations"),N=R.append("g").attr("id","highlight"),M={},F=[];if(c.length>0||p.length>0){for(let t=0;t<f.length;t++)M[f[t]]={missense:0,amp:0,del:0,inframe:0,truncating:0,other:0};for(let t=0;t<s.length;t++)F.push({missense:0,amp:0,del:0,inframe:0,truncating:0,other:0})}const T=(t,e,a,n,r)=>{const s="mut"===t?12:0;"empty"!==t&&"mut"===t?(M[f[a]][r]++,F[n][r]++):"empty"===t||"amp"!==t&&"del"!==t||(M[f[a]][t]++,F[n][t]++);const o=B.append("rect").attr("class","alter-rect ".concat(t)).attr("width",y-6).attr("height",A-6-2*s).attr("fill",e).attr("x",n*y).attr("y",a*A+s/2*2);"highrna"===t?o.attr("stroke","red").style("opacity",.6):"lowrna"===t&&o.attr("stroke","blue").style("opacity",.6)},O=(t,e)=>{B.append("rect").attr("class","alter-rect nseq").attr("width",y-6).attr("height",A-6).attr("fill","white").attr("stroke","lightgray").attr("stroke-width","1px").attr("x",e*y+1).attr("y",t*A+1)};for(let I=0;I<f.length;I++)for(let t=0;t<s.length;t++)x.includes(s[t])?T("empty","lightgrey",I,t):O(I,t);for(let I=0;I<f.length;I++)for(let t=0;t<s.length;t++){if(p.includes(f[I])&&i[I][s[t]]){const e=W[i[I][s[t]].toLowerCase()].xevalabel;u||(u="empty"!==e),T(e,W[i[I][s[t]].toLowerCase()].color,I,t)}if(c.includes(f[I])&&h.includes(s[t])&&"0"!==o[I][s[t]]&&""!==o[I][s[t]]){u=u||!0;T("mut",J[o[I][s[t]].toLowerCase()].color,I,t,J[o[I][s[t]].toLowerCase()].mainType)}}let H=0;for(let I=0;I<f.length;I++)if(d.includes(f[I])){for(let t=0;t<s.length;t++)Number(l[H][s[t]])>r?T("highrna","none",I,t):Number(l[H][s[t]])<-r&&T("lowrna","none",I,t);H++}if((c.length>0||p.length>0)&&u){const t=[];for(let s=0;s<f.length;s++){let e=0;for(let t=0;t<b.length;t++)e+=M[f[s]][b[t].value];t.push(e)}const e=I.l(t),a=I.r().domain([0,e]).range([0,70]),n=R.append("g").attr("id","gene-alter").attr("transform","translate(".concat(s.length*y+20,",0)")),r=1;n.append("rect").attr("class","patient_eval_rect").attr("x",0).attr("y",0).attr("height",A*f.length-6).attr("width",a(e)).attr("fill","white").style("stroke","black").style("stroke-width",r);const o=t=>{const e=t;let s=r/2,o="";b.forEach(t=>{const r=t.color;""!==o&&(s+=a(M[f[e]][o])),o=t.value,n.append("rect").attr("class","gene-rect ".concat(t)).attr("height",A-6).attr("width",a(M[f[e]][t.value])).attr("fill",r).attr("y",e*A).attr("x",s)})};for(let s=0;s<f.length;s++)o(s);const l=I.r().domain([0,e]).range([0,a(e)]),i=I.e().scale(l).ticks(4).tickSize(3).tickFormat(I.i(".0f"));R.append("g").attr("class","x_axis").attr("fill","none").attr("stroke","black").attr("stroke-width",1).attr("transform","translate(".concat(s.length*y+20," -0 )")).call(i).selectAll("text").attr("fill","black").style("font-size",8).attr("stroke","none"),R.selectAll(".tick").select("text").attr("fill","black").attr("stroke","none")}if((c.length>0||p.length>0)&&u){const t=[];for(let l=0;l<F.length;l++){let e=0;for(let t=0;t<b.length;t++)e+=F[l][b[t].value];t.push(e)}const e=I.l(t),a=R.append("g").attr("id","patient-alter"),n=I.r().domain([0,e]).range([35,0]),r=t=>{const e=t;let r=0;b.forEach((t,s)=>{s=s>1?s/s:s,r=n(F[e][t.value])-(35*s-r);const o=t.color;a.append("rect").attr("class","patient-rect".concat(t)).attr("height",35-n(F[e][t.value])).attr("width",y-5).attr("fill",o).attr("y",r).attr("x",20*e+1).attr("transform","translate(0,-40)")})};for(let l=0;l<F.length;l++)r(l);const s=I.r().domain([0,e]).range([35-n(e),0]).nice(),o=I.d().scale(s).ticks(4);R.append("g").attr("class","y_axis").attr("fill","none").attr("stroke","black").attr("stroke-width",1).attr("transform","translate(-10,".concat(-(35-n(e))-5,")")).call(o).selectAll("text").attr("fill","black").style("font-size",8).attr("stroke","none"),R.selectAll(".tick").select("text").attr("fill","black").attr("stroke","none"),R.selectAll(".y_axis .tick").each((function(t){0===t&&this.remove()}))}const G=R.append("g").attr("id","lines").attr("transform",()=>"translate(2,-200)"),K=s.slice(0);K.push(""),G.selectAll("line.dashed-line").data(K).enter().append("line").attr("class","dashed-line").attr("x1",(t,e)=>e*y-3).attr("x2",(t,e)=>e*y-3).attr("y1",0).attr("y2",200).attr("stroke","black").attr("stroke-width",1).style("stroke-dasharray","3 2").style("opacity",.2),G.selectAll("rect.hlight-space").data(s).enter().append("rect").attr("class",t=>"hlight-space-".concat(t)).attr("width",y-2).attr("height",200).attr("x",(t,e)=>e*y-2).attr("fill","rgb(0,0,0)").attr("y",0).style("opacity",0);const L=_.append("g").attr("id","small_rectangle");L.selectAll("rect").data(D).enter().append("rect").attr("x",s.length*y+120).attr("y",(t,e)=>10*f.length+25*e).attr("height","15").attr("width","15").attr("fill",(function(t){return"none"===t.color?(I.t(this).attr("stroke","lightgray").attr("transform","translate(1,1)").attr("width",14).attr("height",14),"white"):t.color})).attr("stroke",t=>{let e="";return"mRNA High"===t.value&&(e="red"),"mRNA Low"===t.value&&(e="blue"),"Not Available"===t.value&&(e="lightgray"),e}).attr("stroke-width",".5px"),L.selectAll("text").data(D).enter().append("text").attr("x",s.length*y+140).attr("y",(t,e)=>10*f.length+12+25*e).text(t=>t.value).attr("font-size","14px");const z=(t,e,a,n,r,s)=>{S.style("visibility","visible");const o=S.style("left","".concat(t+10,"px")).style("top","".concat(e+10,"px")).style("color","#000000").style("background-color","#ffffff"),l=["Gene: ".concat(a),"Patient: ".concat(n)];"0"!==r&&r&&l.push("Mutation: ".concat(r)),"0"!==s&&s&&l.push("Copy Number Variation: ".concat(s)),o.selectAll("textDiv").data(l).enter().append("div").attr("id","tooltiptextonco").html(t=>{const e=t.split(":");return"<b>".concat(e[0],"</b>: ").concat(e[1])}).attr("x","".concat(t+10,"px")).attr("y",(t,a)=>"".concat(e+10+10*a,"px"))};for(let j=0;j<f.length;j++)for(let t=0;t<s.length;t++)N.append("rect").attr("class","oprint-hlight-".concat(s[t]," oprint-hlight-").concat(f[j])).attr("width",y-2).attr("height",A-2).attr("fill","black").attr("x",t*y).attr("y",j*A).style("opacity",0).on("mouseover",()=>{const e=0!==o.length&&void 0!==o[j]&&o[j][s[t]],a=0!==i.length&&void 0!==i[j]&&i[j][s[t]];z(I.h.pageX,I.h.pageY,f[j],s[t],e,a),I.u(".hmap-hlight-".concat(s[t])).style("opacity",.2),I.u(".oprint-hlight-".concat(s[t])).style("opacity",.2),I.u(".hlight-space-".concat(s[t])).style("opacity",.2)}).on("mouseout",()=>{S.style("visibility","hidden"),I.u("#tooltiptextonco").remove(),I.u(".hmap-hlight-".concat(s[t])).style("opacity",0),I.u(".oprint-hlight-".concat(s[t])).style("opacity",0),I.u(".hlight-space-".concat(s[t])).style("opacity",0)})}rankOncoprintBasedOnHeatMapChanges(t){const e=t.globalPatients,a=this.props.className;e.length>0&&(I.t("#oncoprint-".concat(a)).remove(),this.Oncoprint(e))}rankOncoprint(t,e){const a={},n=t=>{let e="";const a=this.props.threshold;return e=Number(t)>a?"positive":Number(t)<-a?"negative":"not available",e},r=(t,e)=>{if(!a[t]||a[t]&&16===a[t].priority){const n=1;a[t]={priority:e,total:n}}else if(a[t].priority<e&&16!==e){const e=a[t].total+1;a[t].total=e}else if(a[t]&&a[t].priority>e&&16!==e){const n=a[t].total+1;a[t].total=n,a[t].priority=e}};e.forEach((e,s)=>{const o=(t=>{let e={};switch(t){case 0:e=J;break;case 1:e=W;break;case 2:e=Z;break;default:e=J}return e})(s);e.forEach(e=>{e.gene_id===t&&Object.keys(e).forEach((t,l)=>{if(!isNaN(e[t])&&1!==s||"gene_id"===t)if(Number(e[t])){const a=n(e[t]),s=o[a].priority;r(t,s)}else 0!==Number(e[t])&&""!==e[t]||"undefined"!==typeof a[t]||(a[t]={priority:16,total:1});else{const a=o[e[t].toLowerCase()].priority;r(t,a)}})})});const s=[];Object.keys(a).forEach(t=>{s.push([t,a[t].priority,a[t].total])});const o=s.sort((t,e)=>t[1]-e[1]).map(t=>t[0]);this.props.hmap_patients.filter(t=>!o.includes(t)).forEach(t=>o.push(t));(0,this.context.setPatients)(o);const l=this.props.className;I.t("#oncoprint-".concat(l)).remove(),this.Oncoprint(o),I.t("#circle-".concat(t.replace(/\s/g,"").replace(/\+/g,""))).style("visibility","visible")}render(){return r.a.createElement("div",null,r.a.createElement("div",{ref:t=>{this.node=t},className:"oprint-wrapper"}),r.a.createElement(G,null,t=>{this.rankOncoprintBasedOnHeatMapChanges(t)}))}}$.contextType=K;var tt=$,et=a(104),at=a(5);function nt(){const t=Object(g.a)(["\n    display: block;\n    margin: auto;\n    margin-top: 300px;\n"]);return nt=function(){return t},t}const rt=Object(at.css)(nt());var st=t=>t.loading?r.a.createElement("div",{style:{height:"500px",width:"1300px"}},r.a.createElement(et.HashLoader,{css:rt,sizeUnit:"px",size:100,color:"#cd5686"})):r.a.createElement("div",null);function ot(){const t=Object(g.a)(["\n    margin: 400px;\n    color: #3453b0 !important;\n    font-size: 40px !important;\n"]);return ot=function(){return t},t}const lt=u.b.h1(ot());var it=({message:t})=>{let e="";return t||(e="Page not found!!"),r.a.createElement(lt,null,t||e)};class ct extends r.a.Component{constructor(t){super(t),this.state={dataset:0,threshold:2,hmap_patients:[],genes_mut:[],genes_rna:[],genes_cnv:[],patient_mut:[],patient_rna:[],patient_cnv:[],data_mut:[],data_rna:[],data_cnv:[],dimensions:{},margin:{},loading:!0,error:!1},this.updateResults=this.updateResults.bind(this)}static getDerivedStateFromProps(t){return{dataset:t.dataset}}componentDidMount(){if(this.state.dataset>0){const t=m.a.get("/api/v1/mutation/".concat(this.state.dataset),{headers:{Authorization:localStorage.getItem("user")}}),e=m.a.get("/api/v1/rnaseq/".concat(this.state.dataset),{headers:{Authorization:localStorage.getItem("user")}}),a=m.a.get("/api/v1/cnv/".concat(this.state.dataset),{headers:{Authorization:localStorage.getItem("user")}});Promise.all([t,e,a]).then(t=>{this.updateResults(t)}).catch(t=>{t&&this.setState({error:!0})})}}updateResults(t){const e=t[0].data;let a=[];a=e.pop(),t.forEach((e,n)=>{const r={};e.data.length>1&&(a.forEach(e=>{t[n].data[0][e]?r[e]=t[n].data[0][e]:r[e]=""}),a=Object.keys(r))});const n={},r={},s={};(t[2].data.length>1?["Mutation","RNASeq","CNV"]:["RNASeq"]).forEach(e=>{let a=0;"Mutation"===e?a=0:"RNASeq"===e?a=1:"CNV"===e&&(a=2);const o=e.substring(0,3).toLowerCase(),l=Object.keys(t[a].data[0]).filter(t=>{let e="";return"gene_id"!==t&&(e=t),e});n["patient_".concat(o)]=l;const i=t[a].data.map(t=>t.gene_id);r["genes_".concat(o)]=i,s["data_".concat(o)]=t[a].data}),this.setState({hmap_patients:a,patient_mut:n.patient_mut?n.patient_mut:[],patient_rna:n.patient_rna?n.patient_rna:[],patient_cnv:n.patient_cnv?n.patient_cnv:[],genes_mut:r.genes_mut?r.genes_mut:[],genes_rna:r.genes_rna?r.genes_rna:[],genes_cnv:r.genes_cnv?r.genes_cnv:[],data_mut:s.data_mut?s.data_mut:[],data_rna:s.data_rna?s.data_rna:[],data_cnv:s.data_cnv?s.data_cnv:[],dimensions:{height:35,width:20},margin:{top:50,right:200,bottom:0,left:250},loading:!1})}render(){const t=this.state,e=t.genes_mut,a=t.genes_rna,n=t.genes_cnv,s=t.patient_mut,o=t.patient_rna,l=t.patient_cnv,i=t.data_mut,c=t.data_rna,d=t.data_cnv,p=t.dimensions,h=t.margin,m=t.threshold,g=t.hmap_patients,u=t.loading,f=t.error,x=t.dataset;return r.a.createElement("div",{className:"wrapper",style:{margin:"auto"}},function(){let t="";if(i.length||d.length||c.length)t=r.a.createElement(tt,{className:"oprint",dimensions:p,margin:h,threshold:m,hmap_patients:g,genes_mut:e,genes_rna:a,genes_cnv:n,patient_mut:s,patient_rna:o,patient_cnv:l,data_mut:i,data_rna:c,data_cnv:d});else{if("4"===x)return r.a.createElement(it,{message:"There is no data available for PDXE (Gastric Cancer)"});if(f)return r.a.createElement(it,{message:"Page not found!!"});t=r.a.createElement("div",{className:"oprint-wrapper"},r.a.createElement(st,{loading:u}))}return t}())}}var dt=ct;const pt={color:"#3453b0",fontSize:18,textAlign:"center",paddingTop:"30px",minHeight:"50px",bottom:"0",right:"0",display:"flex",flexDirection:"column",position:"absolute",minWidth:"100vw",backgroundColor:"rgb(255,255,255,0.8)",fontFamily:"Raleway, sans-serif"};var ht=()=>r.a.createElement("div",{style:pt},"\xa9BHKLab 2019");class mt extends r.a.Component{constructor(t){super(t),this.setPatients=t=>{this.setState({globalPatients:t})},this.state={dataset:0,globalPatients:[],setPatients:this.setPatients}}static getDerivedStateFromProps(t){return{dataset:t.match.params.id}}render(){const t=this.state,e=t.dataset,a={globalPatients:t.globalPatients,setPatients:t.setPatients};return r.a.createElement("div",null,r.a.createElement(H,{value:a},r.a.createElement(Y,{dataset:e}),r.a.createElement(dt,{dataset:e})),r.a.createElement(ht,null))}}var gt=mt;class ut extends r.a.Component{constructor(t){super(t),this.DonutChart=this.DonutChart.bind(this),this.makeDonutChart=this.makeDonutChart.bind(this)}componentDidMount(){}componentDidUpdate(){this.DonutChart()}DonutChart(){const t=this.props.dimensions,e=this.props.margin,a=this.node,n=this.props.data,r=t.height,s=t.width,o=e.left,l=e.top,i=e.bottom,c=e.right;this.makeDonutChart(a,n,r,s,o,l,i,c)}makeDonutChart(t,e,a,n,r,s,o,l){const i=this.props.chartId;I.t("svg").remove();const c=I.t(t).append("svg").attr("id","donutchart-".concat(i)).attr("xmlns","http://wwww.w3.org/2000/svg").attr("xmlns:xlink","http://wwww.w3.org/1999/xlink").attr("height",a+s+o).attr("width",n+r+l).append("g").attr("transform","translate(".concat(r,",").concat(s,")")),d=c.append("g").attr("id","skeleton"),p=I.s().domain(e).range(["#E64B35FF","#4DBBD5FF","#00A087FF","#3C5488FF","#F39B7FFF","#8491B4FF","#91D1C2FF","#B09C85FF","#0073C2FF","#868686FF","#CD534CFF","#7AA6DCFF","#003C67FF","#3B3B3BFF","#A73030FF","#4A6990FF","#00468BBF","#42B540BF","#0099B4BF","#925E9FBF","#FDAF91BF","#AD002ABF","#ADB6B6BF"]),h=I.t(t).append("div").style("position","absolute").style("visibility","hidden").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px").attr("top",10).attr("left",20),m=this.props.arcRadius,g=I.a().outerRadius(m.outerRadius).innerRadius(m.innerRadius),u=I.a().outerRadius(m.outerRadius-20).innerRadius(m.innerRadius+10),f=I.o().sort(null).value(t=>t.value),x=d.selectAll(".arc").data(()=>f(e)).enter().append("a").attr("xlink:href",(t,a)=>{if("donut_datasets"===i)return"/dataset/".concat(e[a].parameter)}).append("g").attr("class",t=>"".concat(t.data.id.replace(/\s/g,"").replace(/[(-)]/g,""),"_Arc")),b=x.append("path").attr("d",g).attr("fill",t=>p(t.data.value)).attr("stroke","black").style("stroke-width",".5px");b.transition().ease(I.g).duration(500).attrTween("d",(function(t){t.innerRadius=0;const e=I.j({startAngle:0,endAngle:0},t);return function(t){return g(e(t))}}));const A=function(t){const e=t.data.id.replace(/\s/g,"").replace(/[(-)]/g,"");I.t(".".concat(e,"_Arc")).transition().duration(300).style("opacity",.4).style("cursor","pointer"),h.style("visibility","visible")},y=function(t){const e=t.data.id.replace(/\s/g,"").replace(/[(-)]/g,"");I.t(".".concat(e,"_Arc")).transition().duration(300).style("opacity",.4).style("cursor","pointer");const a=" (".concat(t.data.value,")");h.text([t.data.id+a]).style("left","".concat(I.h.pageX+10,"px")).style("top","".concat(I.h.pageY+10,"px")).style("color","white").style("background-color",p(t.data.value))},v=function(t){const e=t.data.id.replace(/\s/g,"").replace(/[(-)]/g,"");I.t(".".concat(e,"_Arc")).transition().duration(300).style("opacity",1).style("cursor","pointer"),h.style("visibility","hidden").style("background-color","black")};b.on("mouseover",t=>{A(t)}).on("mousemove",t=>{y(t)}).on("mouseout",t=>{v(t)}),"donut_drugs"!==i&&"donut_datasets"!==i&&"donut_tissues"!==i&&x.append("text").attr("transform",t=>"translate(".concat(u.centroid(t),")")).attr("dy","0.35em").text(t=>"Non-small Cell Lung Carcinoma"===t.data.id?"NSCLC":t.data.id).style("text-anchor","middle").style("font-size",14).attr("fill","white").on("mouseover",t=>{A(t)}).on("mousemove",t=>{y(t)}).on("mouseout",t=>{v(t)});const E=c.append("g").attr("id","donut_small_rect");E.selectAll("rect").data(e).enter().append("rect").attr("x",n-290).attr("y",(t,a)=>30*a-15*e.length).attr("width",20).attr("height",20).attr("fill",t=>p(t.value)),E.selectAll("text").data(e).enter().append("text").attr("x",n-250).attr("y",(t,a)=>30*a-15*e.length+15).attr("fill",t=>p(t.value)).text(t=>"".concat(t.id.charAt(0).toUpperCase()+t.id.slice(1)," (").concat(t.value,")"))}render(){return r.a.createElement("div",{ref:t=>this.node=t,className:"donut-chart"})}}var ft=ut,xt=a(65);function bt(){const t=Object(g.a)(["\n    padding:10px 20px 30px 20px;\n    font-family: 'Raleway', sans-serif;\n\n    .ReactTable * {\n        box-sizing: border-box;\n    }\n\n    .ReactTable .rt-table {\n        align-items: stretch;\n        width: 100%;\n        border-collapse: collapse;\n        overflow: auto\n    }\n\n    .rt-thead.-header {\n        border-bottom: 1px solid rgba(0,0,0,0.1);\n    }\n\n    .ReactTable.-highlight .rt-tbody .rt-tr:not(.-padRow):hover {\n        background: #EAEFF9\n    }\n\n    .ReactTable .rt-thead {\n        color:  #3453b0;\n        font-size: 18px;\n        font-weight: 600;\n        box-shadow:none !important;\n    }\n\n    .ReactTable .rt-tbody{\n        color:  #3453b0;\n        font-size: 16px;\n        box-shadow:none !important;\n    }\n\n    .-previous, .-next, .-btn {\n      background: #3453b0;\n      color:white !important;\n    }\n\n    .-pagination, .pagination-bottom {\n        box-shadow:none !important;\n        border-top:1px solid rgba(0,0,0,0.1) !important;\n    }\n\n    .ReactTable .-pagination .-pageJump input, input{\n        color: #3453b0;\n        box-shadow:none !important;\n        background: #EAEFF9 !important;\n    }\n\n    .ReactTable .-pagination select {\n        color: #3453b0;\n    }\n"]);return bt=function(){return t},t}var At=u.b.div(bt());a(98);const yt={color:"#3453b0",margin:"50px"};var vt=t=>{const e=t.data,a=t.dataLength,n=!(a>0),s=[{Header:"Dataset Name",accessor:"id",minWidth:180,search:!1,sortable:!1,Cell:t=>r.a.createElement(i.b,{to:"/dataset/".concat(t.original.parameter),style:{color:"#3453b0",textDecoration:"none"}},t.original.id)},{Header:"Number of Patients",accessor:"value",minWidth:120},{Header:"Number of Models",accessor:"totalModels",minWidth:120}];return n?r.a.createElement(st,{loading:n}):r.a.createElement(At,{className:"wrap"},r.a.createElement("h1",{style:yt}," List of Datasets "),r.a.createElement(xt.a,{data:e,columns:s,className:"-highlight",showPagination:!1,pageSize:a>0?a+1:7}))};function Et(){const t=Object(g.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: 200px;\n    color: #3453b0;\n    margin-bottom: 100px;\n\n    h1 {\n        font-family:'Raleway', sans-serif;\n        font-weight:700;\n        text-align:center;\n    }\n"]);return Et=function(){return t},t}const Ct=u.b.div(Et());class wt extends r.a.Component{static parseDataset(t){return"SU2C UHN (Breast Cancer)"===t?"UHN (Breast Cancer)":"SU2C McGill (Breast Cancer)"===t?"McGill (Breast Cancer)":t}constructor(t){super(t),this.state={data:[],dimensions:{},margin:{},arc:{}}}componentDidMount(){m.a.get("/api/v1/dataset/models",{headers:{Authorization:localStorage.getItem("user")}}).then(t=>{const e=t.data.data.map(t=>({id:wt.parseDataset(t.dataset_name),value:t.patient_id,parameter:t.dataset_id,totalModels:t.totalModels}));this.setState({data:e,dimensions:{width:650,height:250},margin:{top:320,right:100,bottom:100,left:380},arc:{outerRadius:260,innerRadius:150}})})}render(){const t=this.state,e=t.data,a=t.arc,n=t.dimensions,s=t.margin;return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(v,null),r.a.createElement(Ct,null,r.a.createElement("div",{className:"donut-wrapper"},r.a.createElement("h1",null," Number of Patients Per Dataset "),r.a.createElement(ft,{dimensions:n,margin:s,data:e,arcRadius:a,chartId:"donut_datasets"})),r.a.createElement("div",{className:"donut-wrapper"},r.a.createElement(vt,{data:e,dataLength:e.length}))),r.a.createElement(ht,null))}}var kt=wt;var Dt=()=>r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(v,null),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"doc-wrapper"},r.a.createElement("h1",null," Documentation will be added Later. ")))),St=a(106),Rt=a.n(St);const _t={color:"#3453b0",margin:"50px"};class Pt extends r.a.Component{constructor(t){super(t),this.state={data:[],loading:!0}}componentDidMount(){m.a.get("/api/v1/drugs",{headers:{Authorization:localStorage.getItem("user")}}).then(t=>{this.setState({data:t.data,loading:!1})})}render(){const t=this.state,e=t.data,a=t.loading;e.forEach(t=>{t.img=Rt.a});const n=t=>"string"!==typeof t?"":t.charAt(0).toUpperCase()+t.slice(1),s=[{Header:"Drug Name",accessor:"drug_name",minWidth:180,Cell:t=>n(t.value),sortable:!0},{Header:"Standard Name",accessor:"standard_name",minWidth:150,Cell:t=>n(t.value),sortable:!0},{Header:"Targets",accessor:"class",minWidth:150,Cell:t=>n(t.value),sortable:!0},{Header:"Class",accessor:"class_name",minWidth:220,Cell:t=>n(t.value),sortable:!0},{Header:"Source",Cell:t=>{const e=t.original.source.split(" + "),a=e.length,n=[];let s="";return e.forEach(t=>{"NA"===t&&(s=!0)}),e.forEach((e,o)=>{"NA"!==e&&n.push(r.a.createElement("span",{key:e},r.a.createElement("a",{className:"hover",target:"_blank",rel:"noopener noreferrer",href:"".concat(e)},r.a.createElement("img",{height:38,src:t.original.img,alt:"pubchem links"})),a>o+1&&!s?r.a.createElement("sup",null," + "):""))}),n},sortable:!1}];return a?r.a.createElement(st,{loading:a}):r.a.createElement(At,{className:"wrap"},r.a.createElement("h1",{style:_t}," List of Drugs "),r.a.createElement(xt.a,{data:e,columns:s,className:"-highlight",defaultPageSize:10,filterable:!0}))}}var Bt=Pt;var Nt=t=>{const e=t.dimensions,a=t.margin;let s=t.data;const o=e.width,l=e.height,i=a.left,c=a.right,d=a.top,p=a.bottom;s=s.sort((t,e)=>e.value-t.value);const h=["#E64B35FF","#4DBBD5FF","#00A087FF","#3C5488FF","#F39B7FFF","#8491B4FF","#91D1C2FF","#B09C85FF","#0073C2FF","#868686FF","#CD534CFF","#7AA6DCFF","#003C67FF","#3B3B3BFF","#A73030FF","#4A6990FF","#00468BBF","#42B540BF","#0099B4BF","#925E9FBF","#FDAF91BF","#AD002ABF","#ADB6B6BF"];return Object(n.useEffect)(()=>{I.u("#barplotsvg").remove();const t=((t,e,a,n,r,s)=>I.t("#barplot").append("svg").attr("width",t+a+n).attr("height",e+r+s).append("g").attr("transform","translate(".concat(a,",").concat(r,")")).attr("id","barplotsvg"))(o,l,i,c,d,p),e=((t,e)=>I.q().domain(e.map(t=>t.id)).range([0,t]).padding([.3]))(o,s),a=(t=>I.r().domain([0,1700]).range([t,0]).nice())(l),n=((t,e)=>{const a=t.map(t=>t.id);return I.s().domain(a).range(e)})(s,h);((t,e,a)=>{const n=I.c().scale(e).ticks(7);t.append("g").call(n).attr("transform","translate(0,".concat(a,")")).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end").style("font-size",13)})(t,e,l),((t,e)=>{const a=I.d().scale(e).ticks(7);t.append("g").call(a).style("font-size",13)})(t,a),((t,e,a,n)=>{e.forEach(e=>{t.append("text").attr("x",a(e.id)+14).attr("y",n(e.value)-4).attr("font-family","sans-serif").attr("font-size","12px").style("text-anchor","start").attr("fill","black").text(e.value)})})(t,s,e,a),((t,e,a,n,r,s)=>{t.selectAll("bars").data(e).enter().append("rect").attr("x",t=>a(t.id)).attr("y",t=>n(t.value)).attr("width",a.bandwidth()).attr("height",t=>r-n(t.value)).attr("id",t=>"bar_".concat(t.id)).attr("fill",t=>s(t.id))})(t,s,e,a,l,n)},[s]),r.a.createElement("div",{id:"barplot",style:{textAlign:"center"}})};function Mt(){const t=Object(g.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: 200px;\n    margin-bottom: 100px;\n    \n    h1 {\n        font-family:'Raleway', sans-serif;\n        font-weight:700;\n        text-align:center;\n        color: #3453b0\n    }\n"]);return Mt=function(){return t},t}const Ft=u.b.div(Mt());class Tt extends r.a.Component{constructor(t){super(t),this.state={data:[],dimensions:{},margin:{},arc:{}}}componentDidMount(){const t=[];m.a.get("/api/v1/drug/class",{headers:{Authorization:localStorage.getItem("user")}}).then(e=>{e.data.data.forEach(e=>{const a={};""!==e.class_name&&(a.id=e.class_name.replace('"',"").replace("/","_"),a.value=e.model_ids,t.push(a))}),this.setState({data:t,dimensions:{width:850,height:400},margin:{top:50,right:150,bottom:200,left:150},arc:{outerRadius:260,innerRadius:150}})})}render(){const t=this.state,e=t.data,a=t.arc,n=t.dimensions,s=t.margin;return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(v,null),r.a.createElement(Ft,null,r.a.createElement("div",{className:"donut-wrapper"},r.a.createElement("h1",null," Number of Models Per Drug class "),0===e.length?r.a.createElement("div",null):r.a.createElement(Nt,{dimensions:n,margin:s,chartId:"donut_drugs",data:e,arcRadius:a})),r.a.createElement("div",{className:"donut-wrapper"},r.a.createElement(Bt,null))),r.a.createElement(ht,null))}}var It=Tt;r.a.Component;function Ot(){const t=Object(g.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: 200px;\n    color: #3453b0;\n    margin-bottom: 100px;\n\n    h1 {\n        font-family:'Raleway', sans-serif;\n        font-weight:700;\n        text-align:center;\n    }\n"]);return Ot=function(){return t},t}const Ht=u.b.div(Ot());class Gt extends r.a.Component{constructor(t){super(t),this.state={data:[],dimensions:{},margin:{},arc:{}}}componentDidMount(){const t=[];m.a.get("/api/v1/tissue/models",{headers:{Authorization:localStorage.getItem("user")}}).then(e=>{e.data.data.forEach(e=>{const a={};a.id=e.tissue_name,a.value=e.total,t.push(a)}),this.setState({data:t,dimensions:{width:600,height:300},margin:{top:320,right:100,bottom:100,left:380},arc:{outerRadius:260,innerRadius:150}})})}render(){const t=this.state,e=t.data,a=t.arc,n=t.dimensions,s=t.margin;return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(v,null),r.a.createElement(Ht,null,r.a.createElement("div",{className:"donut-wrapper"},r.a.createElement("h1",null," PDXs Per Tissue Type "),r.a.createElement(ft,{dimensions:n,margin:s,chartId:"donut_tissues",data:e,arcRadius:a}))),r.a.createElement(ht,null))}}var Kt=Gt,Lt=a(107);function zt(){const t=Object(g.a)(["\n\n    table, th, td {\n        border: 1px solid #999999;\n    }\n\n    #stats-table {\n        text-align: left;\n        font-family: 'Raleway', sans-serif;\n        border-collapse: collapse;\n        width: 800px;\n    }\n\n    th {\n        color: #5974c4;\n        text-align: left;\n        font-family: 'Raleway', sans-serif;\n        padding: 10px;\n        height: 40px;\n        background-color: #ddd;\n    }\n\n    td {\n        color: #cd5686;\n        padding: 10px;\n        white-space: normal;\n        max-width: 200px;\n        overflow: scroll;\n    }\n\n    tr:hover {\n        background-color: #f5f5f5;\n    }\n\n"]);return zt=function(){return t},t}var jt=u.b.div(zt());class Qt extends r.a.Component{constructor(t){super(t),this.state={tableHeader:["Batch","TGI","Angle","ABC"]},this.createTable=this.createTable.bind(this),this.createTableHeader=this.createTableHeader.bind(this)}createTable(){const t=this.props.data,e=[];let a=0,n="";t.forEach(t=>{0!==e.length&&n===t.batch_id||(e.push({}),n=t.batch_id,e[a].batch=t.batch,a+=1),e[a-1][t.response_type]=t.value});return e.map((t,e)=>{const a=t.batch,n=t.angle,s=t.TGI,o=t.abc;return r.a.createElement("tr",{key:e},r.a.createElement("td",null,a),r.a.createElement("td",null,s),r.a.createElement("td",null,n),r.a.createElement("td",null,o))})}createTableHeader(){return this.state.tableHeader.map((t,e)=>r.a.createElement("th",{key:e},t))}render(){return r.a.createElement("div",{className:"curve-wrapper",style:{marginTop:"0px",padding:"60px 0px 20px 0px"}},r.a.createElement("h1",{id:"title"},"Statistics (Batch Response)"),r.a.createElement(jt,null,r.a.createElement("table",{id:"stats-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,this.createTableHeader()),this.createTable()))))}}var Ut=Qt;class Vt extends r.a.Component{constructor(t){super(t),this.state={data:[],batchData:[],tableHeader:["Patient","Model","Drug","mRECIST","Best Average Response","Slope","AUC","Survival (Days)","Link","Row Number"]},this.createTable=this.createTable.bind(this),this.createTableHeader=this.createTableHeader.bind(this),this.parseData=this.parseData.bind(this),this.getCSVHeader=this.getCSVHeader.bind(this)}componentDidMount(){const t=this.props,e=t.drugParam,a=t.patientParam,n=m.a.get("/api/v1/stats?patient=".concat(a,"&drug=").concat(e),{headers:{Authorization:localStorage.getItem("user")}}),r=m.a.get("/api/v1/batchstat?patient=".concat(a,"&drug=").concat(e),{headers:{Authorization:localStorage.getItem("user")}});Promise.all([r,n]).then(t=>{this.parseData(t)})}getCSVHeader(t){let e=[];0!==t.length&&(e=Object.keys(t[0]).map(t=>({label:t.split("_").map(t=>t.charAt(0).toUpperCase()+t.substring(1)).join(" "),key:t})),console.log(e))}parseData(t){this.setState({data:t[1].data,batchData:t[0].data});const e=this.state.data;e[0]&&7!==e[0].dataset_id&&this.setState({tableHeader:["Patient","Model","Drug","mRECIST","Best Average Response","Slope","AUC","Survival (Days)"]})}createTable(){const t=this.state.data,e=[];let a=0,n="",s="";t.forEach(t=>{0!==e.length&&n===t.drug_name&&s===t.model||(e.push({}),n=t.drug_name,s=t.model,e[a].model=s,e[a].drug=n,e[a].patient=t.patient,e[a].link=t.link,e[a].row=t.row,a+=1),e[a-1]["best.average.response"===t.response_type?"bar":t.response_type]=t.value});return e.map((t,e)=>((t,e)=>{const a=t.patient,n=t.model,s=t.drug,o=t.bar,l=t.mRECIST,i=t.slope,c=t.AUC,d=t.survival,p=t.link,h=t.row,m=t=>{let e="";return e=t&&t===p?r.a.createElement("td",{style:{minWidth:150}},r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},"Google-Sheet")):t&&t===h?r.a.createElement("td",null,t):null,e};return r.a.createElement("tr",{key:e,className:"responsetable_".concat(n.replace(/\./g,"_"))},r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,s),r.a.createElement("td",null,l),r.a.createElement("td",null,o),r.a.createElement("td",null,i),r.a.createElement("td",null,c),r.a.createElement("td",null,d),m(p),m(h))})(t,e))}createTableHeader(){return this.state.tableHeader.map((t,e)=>r.a.createElement("th",{key:e},t))}render(){const t=this.state,e=t.batchData,a=t.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut,{data:e}),r.a.createElement("div",{className:"curve-wrapper",style:{marginTop:"0px",padding:"30px 0px"}},r.a.createElement("h1",{id:"titlemodel"},"Statistics (Model Response)"),r.a.createElement(Lt.CSVLink,{data:a,headers:this.getCSVHeader(a)},r.a.createElement("h3",{style:{color:"#cd5686"}}," Download Model Response Data ")),r.a.createElement(jt,null,r.a.createElement("table",{id:"stats-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,this.createTableHeader()),this.createTable())))))}}var qt=Vt;const Yt=(t,e,a)=>{a.style("visibility","visible");const n=a.style("left","".concat(I.h.pageX+10,"px")).style("top","".concat(I.h.pageY+10,"px")).style("color","#000000").style("background-color","#ffffff");let r=[];"line"===e?r=["Model: ".concat(t.model),"Drug: ".concat(t.drug),"Type: ".concat(t.exp_type),"Batch: ".concat(t.batch)]:"dot"===e&&(r=["Time: ".concat(t.time," days"),"Volume: ".concat(t.volume," mm\xb3")]),n.selectAll("textDiv").data(r).enter().append("div").attr("id","tooltiptext").html(t=>{const e=t.split(":");return"<b>".concat(e[0],"</b>: ").concat(e[1])}).attr("x","".concat(I.h.pageX+10,"px")).attr("y",(t,e)=>"".concat(I.h.pageY+10+10*e,"px"))},Xt=(t,e,a,n)=>{let r=0,s=0;n.forEach(t=>{"control"===t.exp_type?r+=1:s+=1});const o="control"===a?r:s,l=[],i=[],c=[];let d=!1;return Object.keys(t).forEach(a=>{if(d=t[a].volume.length>1,d||e&&1===o){l.push(I.m(t[a].volume));const e=I.f(t[a].volume),n=Math.sqrt(t[a].volume.length-1);i.push(e/n),c.push(a)}}),[l,i,c,o]},Jt=(t,e,a,n,r,s,o,l)=>{const i=r.append("g").attr("id","errorBars");i.selectAll("line.error").data(e).enter().append("line").attr("class","error").attr("stroke",()=>"control"===t?"#cd5686":"#5974c4").attr("stroke-width",2).attr("x1",t=>s(t)).attr("x2",t=>s(t)).attr("y1",(t,e)=>o(n[e]+l[e])).attr("y2",(t,e)=>o(n[e]-l[e]));i.selectAll("line.errorTop").data(e).enter().append("line").attr("class","errorTop").attr("stroke",()=>"control"===t?"#cd5686":"#5974c4").attr("stroke-width",2).attr("x1",t=>s(t)-4).attr("x2",t=>s(t)+4).attr("y1",(t,e)=>o(n[e]+l[e])).attr("y2",(t,e)=>o(n[e]+l[e]));i.selectAll("line.errorBot").data(e).enter().append("line").attr("class","errorBot").attr("stroke",()=>"control"===t?"#cd5686":"#5974c4").attr("stroke-width",2).attr("x1",t=>s(t)-4).attr("x2",t=>s(t)+4).attr("y1",(t,e)=>o(n[e]-l[e])).attr("y2",(t,e)=>o(n[e]-l[e]))},Wt=(t,e,a,n,r,s,o)=>{const l=(t=>{let e=[],a=[];for(let n=0;n<t.length;n++)if("control"===t[n].exp_type){const a=t[n].pdx_points[0].times;e=[...e,...a]}else if("treatment"===t[n].exp_type){const e=t[n].pdx_points[0].times;a=[...a,...e]}return[[...new Set(e)].sort((t,e)=>t-e),[...new Set(a)].sort((t,e)=>t-e)]})(t);let i=[];const c=t[0].batch;0===l[0].length?(i=["treatment"],l.shift()):0===l[1].length?(i=["control"],l.pop()):i=["control","treatment"];const d={},p={};t.forEach(t=>{((t,e,a,n,r)=>{const s=n;let o=t;r.forEach(t=>{if(t!==a[o]||s[t]){if(t===a[o]&&s[t])s[t].totalVolume+=e[o],s[t].number+=1,s[t].minVol=s[t].minVol>e[o]?e[o]:s[t].minVol,s[t].maxVol=s[t].maxVol<e[o]?e[o]:s[t].maxVol,s[t].volume.push(e[o]),o++;else if(a[o]){const n=e[o-1]+(e[o]-e[o-1])/(a[o]-a[o-1])*(t-a[o-1]);s[t]||(s[t]={},s[t].totalVolume=0,s[t].minVol=1e4,s[t].maxVol=0,s[t].volume=[]),s[t].totalVolume+=n,s[t].number=s[t].number?s[t].number+1:1,s[t].minVol=s[t].minVol>n?n:s[t].minVol,s[t].maxVol=s[t].maxVol<n?n:s[t].maxVol,s[t].volume.push(n)}}else s[t]={},s[t].totalVolume=e[o],s[t].number=1,s[t].minVol=e[o],s[t].maxVol=e[o],s[t].volume=[],s[t].volume.push(e[o]),o++})})(0,r?t.pdx_points[0].volume_normals:t.pdx_points[0].volumes,t.pdx_points[0].times,"control"===t.exp_type?d:p,"control"===t.exp_type?l[0]:l[1])});for(let h=0;h<i.length;h++){const r=i[h],m="control"===i[h]?d:p,g=Xt(m,s,i[h],t),u=Object(T.a)(g,4),f=u[0],x=u[1],b=u[2],A=u[3];if(o){const t=e.append("g").attr("id","mean_".concat(i[h]));t.selectAll(".mean-dot").data(f).enter().append("circle").attr("id","mean-dot-".concat(i[h],"-").concat(c)).attr("class","mean-dot ".concat(c)).attr("r",4).attr("fill",()=>"control"===i[h]?"#cd5686":"#5974c4").attr("cx",(t,e)=>a(b[e])).attr("cy",(t,e)=>n(f[e]));const r=t.selectAll(".mean-path").data(f).enter(),s=I.k().x((t,e)=>a(l[h][e])).y((t,e)=>n(f[e]));r.append("path").attr("id","mean-path-".concat(i[h],"-").concat(c)).attr("class","mean-path ".concat(c)).attr("d",s(f)).attr("fill","none").style("opacity",.2).attr("stroke",()=>"control"===i[h]?"#cd5686":"#5974c4").attr("stroke-width",2)}s&&A>1&&Jt(r,b,0,f,e,a,n,x)}},Zt=(t,e,a,n,r,s)=>{const o=e.selectAll("g.model").data(t).enter().append("g").attr("class","model"),l=e.selectAll(".model-path").data(()=>t).enter(),i=I.k().x(t=>a(t.time)).y(t=>n(s?t.volume_normal:t.volume)),c=(t,e,a="#cd5686")=>l.append("path").attr("id",t=>"path-".concat(t.model.replace(/\./g," ").replace(/\s/g,"-"))).attr("class",t=>"model-path_".concat(t.exp_type)).attr("d",t=>i(t.pdx_json)).attr("fill","none").style("opacity",e).attr("stroke",t=>"white"===a?a:"control"===t.exp_type?"#cd5686":"#5974c4").attr("stroke-width",t),d=(t,e,a,n,r,s,o)=>{I.t("#path-".concat(t.model.replace(/\./g," ").replace(/\s/g,"-"))).attr("stroke-width",e).style("opacity",a),I.u(".responsetable_".concat(t.model.replace(/\./g,"_"))).selectAll("td").style("color",n).style("background",r),I.u(".responsetable_".concat(t.model.replace(/\./g,"_"))).selectAll("a").style("color",s).style("background",o)};c(3,.7).attr("stroke-dasharray","3"),c(4,0,"white").on("mouseover",t=>{Yt(t,"line",r),d(t,5,1,"#f5f5f5","#5974c4","#f5f5f5","#5974c4")}).on("mouseout",t=>{I.u("#tooltiptext").remove(),r.style("visibility","hidden"),I.t("#path-".concat(t.model.replace(/\./g," ").replace(/\s/g,"-"))).classed("selected")||d(t,3,.7,"#cd5686","white","#5974c4","white")}).on("click",t=>{I.h.preventDefault();let e=!1;const a=I.t("#path-".concat(t.model.replace(/\./g," ").replace(/\s/g,"-")));I.h.ctrlKey||I.h.metaKey||I.u("path").nodes().forEach(t=>{if(t.attributes[5]&&"0"!==t.style.opacity&&t.classList.contains("selected")){t.attributes[5].value=3,t.style.opacity=.7;const n=I.t(".".concat(t.classList[0])),r=n.data()[0];n.classed("selected",!1),d(r,3,.7,"#cd5686","white","#5974c4","white"),t.classList[0]===a.attr("class")&&(e=!0)}}),a.classed("selected")||e?a.classed("selected")&&(a.classed("selected",!1),d(t,3,.7,"#cd5686","white","#5974c4","white")):(a.classed("selected",!0),d(t,5,1,"#f5f5f5","#5974c4","#f5f5f5","#5974c4"))});o.selectAll(".model-dot").data(t=>t.pdx_json).enter().append("circle").attr("id",(t,e)=>"dot-".concat(t.model.replace(/\./g," ").replace(/\s/g,"-"),"-").concat(t.exp_type).concat(e)).attr("class",t=>"model-dot_".concat(t.exp_type)).attr("r",4).attr("fill",t=>"control"===t.exp_type?"#cd5686":"#5974c4").style("opacity",1).attr("cx",t=>a(t.time)).attr("cy",t=>n(s?t.volume_normal:t.volume)).on("mouseover",t=>{Yt(t,"dot",r)}).on("mouseout",()=>{I.u("#tooltiptext").remove(),r.style("visibility","hidden")}),Wt(t,e,a,n,s,!1,!0)},$t=(t,e,a,n,r,s,o,l,i)=>{let c=!1,d=!1;function p(t,e,a,n){const s=function(t,e,a,n){let r=0,s=0;return t?(r=e-1,s=a+1):(r=0,s=n),[r,s]}(t,e,a,n),o=Object(T.a)(s,2),l=o[0],i=o[1];return I.r().domain([l,i]).range([r,0]).nice()}["allCurves","allCurvesText","errorBar","errorBarText","volRaw","volNorm","volRawText","volNormText"].forEach(h=>{let m=50,g="#cd5686",u="",f="#5974c4",x="lightgray",b="#cd5686",A="lightgray",y=0,v=s,E="",C=29,w=84,k="";switch(h){case"errorBar":case"errorBarText":m=70,g="lightgray",u="errorBar"===h?"errorBar":"errorBarText",E="errorBarText"===h?"ErrorBars":"",C=34,b="lightgray",A="#cd5686";break;case"allCurves":u="allCurves";break;case"allCurvesText":u="allCurvesText",E="All Curves",C=32,w=64;break;case"volRaw":m=120,u="volRawToggle",g="#5974c4";break;case"volRawText":u="volRawText",E="Raw",C=60,w=134;break;case"volNorm":m=141,u="volNormToggle",g="lightgray",y=l-1,v=o+1,f="lightgray",x="#5974c4";break;case"volNormText":u="volNormText",E="Normalized",C=28,w=155,y=l-1,v=o+1,f="lightgray",x="#5974c4";break;default:u="Looking for what??"}k=function(t,a,s,o,l,i,c){let d="";switch(o){case"volRaw":case"volNorm":case"errorBar":case"allCurves":d=e.append("rect").attr("x",n+25).attr("y",r/2+t).attr("width",70).attr("height",20).attr("fill",a).style("opacity",.8).attr("id",s);break;case"volRawText":case"volNormText":case"errorBarText":case"allCurvesText":d=e.append("text").attr("fill","black").style("font-size","12px").attr("text-anchor","volRawText"===o?"middle":"null").attr("id",s).attr("x",n+i).attr("y",r/2+c).text(l);break;default:console.log("It's not available")}return d}(m,g,u,h,E,C,w),k.on("click",()=>{let n=p(c,l,o,s);if(h.match(/(allCurves|allCurvesText|errorBar|errorBarText)/g))d=!!h.match(/(errorBar|errorBarText)/g),I.u("tr").nodes().forEach(t=>{t.className&&(I.t(".".concat(t.className)).selectAll("td").style("color","#cd5686").style("background","white"),I.t(".".concat(t.className)).selectAll("a").style("color","#5974c4").style("background","white"))}),I.t("#errorBar").attr("fill",A),I.t("#allCurves").attr("fill",b);else{c=function(t){let e=!1;return t.match(/(volNorm|volNormText)/g)&&(e=!0),e}(h),n=p(c,l,o,s);const t=I.d().scale(n).tickPadding(2);I.u("g.y.axis").call(t),e.selectAll(".tick").select("text").attr("fill","black").attr("stroke","none").attr("font-size","14px"),I.t("#volRawToggle").attr("fill",f),I.t("#volNormToggle").attr("fill",x)}I.t("#curves").remove();const r=e.append("g").attr("id","curves");d?Wt(t,r,a,n,c,!0,!0):Zt(t,r,a,n,i,c)})})};var te=t=>{const e=t.patientParam,a=t.drugParam,s=t.data;return Object(n.useEffect)(()=>{if(0!==s.length){const t=I.t(".wrapper").append("div").style("position","absolute").style("visibility","hidden").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","5px").style("max-width","250px").style("max-height","180px").attr("top",10).attr("left",20),e=(t=>{const e=[],a=[],n=[],r=[],s=[];for(let o=0;o<t.length;o++)e.push(I.l(t[o].pdx_points[0].times)),a.push(I.n(t[o].pdx_points[0].volumes)),n.push(I.l(t[o].pdx_points[0].volumes)),r.push(I.l(t[o].pdx_points[0].volume_normals)),s.push(I.n(t[o].pdx_points[0].volume_normals));return{maxTime:Math.max.apply(null,e),minVolume:Math.min.apply(null,a),maxVolume:Math.max.apply(null,n),maxVolNorm:Math.max.apply(null,r),minVolNorm:Math.min.apply(null,s)}})(s),a=((t,e,a)=>{const n=["control","treatment"],r=50,s=260,o=250,l=130,i=I.t("#svg-curve").append("svg").attr("id","pdx".concat(e)).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("width",970+l+s).attr("height",500+r+o).append("g").attr("transform","translate(".concat(l,",").concat(r,")")),c=i.selectAll(".legend").data(n).enter();c.append("circle").attr("id",(t,e)=>"legend-dot-".concat(n[e])).attr("class","legend").attr("r",5).attr("fill",(t,e)=>"control"===n[e]?"#cd5686":"#5974c4").attr("cx",1e3).attr("cy",(t,e)=>200+50*e),c.append("text").attr("id",(t,e)=>"legend-text-".concat(n[e])).attr("class","legend").attr("fill","black").style("font-size","16px").attr("x",1010).attr("y",(t,e)=>205+50*e).text((t,e)=>n[e]);const d=I.r().domain([0,a.maxTime]).range([0,970]).nice(),p=I.r().domain([0,a.maxVolume]).range([500,0]).nice(),h=I.c().scale(d).tickPadding(2),m=I.d().scale(p).tickPadding(2);i.append("g").attr("class","x axis").attr("transform","translate(0,".concat(p(0),")")).attr("fill","none").attr("stroke","black").attr("stroke-width",1).call(h),i.append("text").attr("text-anchor","middle").attr("fill","black").attr("transform","translate(".concat(485,",").concat(540,")")).text("Time (days)");i.append("g").attr("class","y axis").attr("fill","none").attr("stroke","black").attr("stroke-width",1).call(m);i.append("text").attr("text-anchor","middle").attr("fill","black").attr("transform","translate(".concat(-60,",").concat(250,")rotate(-90)")).text("Volume (mm\xb3)"),i.selectAll(".tick").select("text").attr("fill","black").attr("stroke","none").attr("font-size","14px");return{graph:i.append("g").attr("id","curves"),xrange:d,yrange:p,width:970,height:500,svg:i}})(0,"plot",e);Zt(s,a.graph,a.xrange,a.yrange,t,!1),$t(s,a.svg,a.xrange,a.width,a.height,e.maxVolume,e.maxVolNorm,e.minVolNorm,t)}}),r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(v,null),r.a.createElement("div",{className:"wrapper",style:{margin:"auto",fontSize:"16px"}},r.a.createElement("div",{className:"curve-wrapper",style:{marginTop:"100px"}},r.a.createElement("h1",null,"Drug ID ="," ",r.a.createElement("span",{style:{color:"#cd5686"}},a.replace(/\s\s\s/g," + ").replace(/\s\s/g," + "))," ","and Patient ID ="," ",r.a.createElement("span",{style:{color:"#cd5686"}},e)),r.a.createElement("svg",{id:"svg-curve",width:1300,height:620})),r.a.createElement(qt,{patientParam:e,drugParam:a}),r.a.createElement("div",{className:"curve-wrapper",style:{marginTop:"20px",padding:"10px 0px"}},r.a.createElement(i.b,{to:"/datasets"}," \u2190\xa0\xa0Back to Datasets "))))};class ee extends r.a.Component{constructor(t){super(t),this.state={dataFormatted:[],patientParam:"",drugParam:""},this.dataParse=this.dataParse.bind(this)}static getDerivedStateFromProps(t){const e=t.location,a=new URLSearchParams(e.search);return{patientParam:a.get("patient"),drugParam:a.get("drug")}}componentDidMount(){const t=this.state,e=t.patientParam,a=t.drugParam;m.a.get("/api/v1/treatment?drug=".concat(a,"&patient=").concat(e),{headers:{Authorization:localStorage.getItem("user")}}).then(t=>{const e=[];for(let a=0;a<t.data.length;a++)e.push(t.data[a].batch);this.dataParse(t.data,e[0])})}dataParse(t,e){const a=[],n=[];for(let r=0;r<t.length;r++)if(n.push(t[r].batch),t[r].batch===e)if(0===t[r].time){const e={exp_type:t[r].type,batch:t[r].patient_id,model:t[r].model_id,drug:t[r].drug,pdx_points:[{times:[parseInt(t[r].time)],volumes:[parseFloat(t[r].volume)],volume_normals:[parseFloat(t[r].volume_normal)]}],pdx_json:[{model:t[r].model_id.replace(/\./g," ").replace(/\s/g,"-"),batch:t[r].patient_id,exp_type:t[r].type,time:parseInt(t[r].time),volume:parseFloat(t[r].volume),volume_normal:parseFloat(t[r].volume_normal)}]};a.push(e)}else t[r].time<=200&&(a[a.length-1].pdx_points[0].times.push(parseInt(t[r].time)),a[a.length-1].pdx_points[0].volumes.push(parseFloat(t[r].volume)),a[a.length-1].pdx_points[0].volume_normals.push(parseFloat(t[r].volume_normal)),a[a.length-1].pdx_json.push({model:t[r].model_id,batch:t[r].patient_id,exp_type:t[r].type,time:parseInt(t[r].time),volume:parseFloat(t[r].volume),volume_normal:parseFloat(t[r].volume_normal)}));this.setState({dataFormatted:a})}render(){const t=this.state,e=t.patientParam,a=t.drugParam,n=t.dataFormatted;return r.a.createElement("div",null,r.a.createElement(te,{patientParam:e,drugParam:a,data:n}))}}var ae=ee,ne=a(44),re=a(108),se=a(18);function oe(){const t=Object(g.a)(["\n    background-color: #3453b0;\n    border: none;\n    border-radius: 6px;\n    color: #ffffff;\n    padding: 10px 20px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 32px;\n    font-family: 'Raleway', sans-serif;\n    font-weight:700;\n    margin: auto;\n    transition: .3s;\n    outline-style: none;\n    margin-top: 0px;\n    &:hover {\n        opacity: 1;\n        cursor: pointer;\n        color:  #3453b0;\n        background-color: #ffffff;\n        border: 1px solid #3453b0;\n    }\n"]);return oe=function(){return t},t}function le(){const t=Object(g.a)(["\n    margin-top: 30vh;\n    font-family: 'Raleway', sans-serif;\n    display:flex;\n    margin:auto;\n    \n    .search-container {\n        max-width: 1000px;\n        text-align:center;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: space-around;\n        align-items: center;\n        border-radius:25px;\n        max-height: 700px;\n    }\n\n    .select-component {\n        background: rgb(255,255,255,0.8);\n        width: 45%;\n        min-width: 750px;\n        margin-top: 0px;\n        max-height: 550px;\n        display: flex;\n        flex-wrap: wrap;\n        margin: 35px;\n        padding: 10px 25px 50px 25px;\n        \n        justify-content: space-around;\n        border-radius: 20px;\n\n        .div-dataset, .div-drug {\n            max-width: 49%;\n            min-width: 295px;\n        }\n        .div-genomics, .div-gene {\n            margin: 10px;\n            min-width: 600px;\n            max-width: 70%;\n        }\n\n        .div-rnaseq {\n            text-align: left;\n            padding-left: 5px;\n            margin: 5px;\n            min-width: 600px;\n            max-width: 70%;\n            font-size: 15px;\n            color: #3453b0;\n            \n            input {\n                color: #3453b0;\n                font-size: 14px;\n                border: 1px solid #3453b0;\n                border-radius: 4px;\n                outline-style: none;\n                padding: 2px;\n                margin-left: 4px;\n            }\n        }\n\n        .div-gene-enter {\n            margin-top: 15px;\n            min-width: 620px;\n            max-height: 150px;\n            textarea {\n                min-width: 600px;\n                min-height: 120px;\n                outline-style: none;\n                border-radius: 10px;\n                color: #3453b0;\n                font-weight: 300;\n                font-size: 15px;\n                border: 1px solid #3453b0;\n                padding: 10px;\n                overflow-wrap: break-word;\n                box-sizing: border-box;\n                resize: none\n            }\n        }\n\n        .sample {\n            margin: 10px 0px 0px 15px;\n            min-width: 600px;\n            font-size: 16px;\n            text-align: left;\n            font-weight: 550;\n            a {\n                color: #3453b0;\n                text-decoration: none;\n            }\n            a:hover {\n                color: #cd5686;\n                cursor: pointer;\n            }\n            font-style: italic;\n        }\n\n    }\n\n    .two-col {\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: space-around;\n        align-items: flex-end;\n        min-width: 610px;\n        max-width: 70%;\n        margin-bottom:10px;\n    }\n\n    h1 {\n      color: #3453b0;\n      text-align: center;\n      font-size: 36px;\n    }    \n\n   @media screen and (max-width: 1700px) {\n        h1 {\n            font-size: 22px;\n        }\n        .select-component {\n            width: 55%;\n            max-height: 400px;\n            min-width: 650px;\n        }\n        .search-container {\n            max-height: 500px;\n        }\n        .div-gene-enter {\n            min-height: 100px !important;\n            margin: 10px !important;\n            textarea {\n                min-height: 100px !important;\n                max-height: 100px;\n            }\n        }\n        .div-genomics, .div-gene {\n            margin: 5px !important;\n        }\n        .sample {\n            font-size: 14px !important;\n            margin: 0px 0px -10px 10px !important;\n        }\n        .stylebutton {\n            font-size: 28px;\n            padding: 6px 10px 6px 10px;\n        }\n   }\n\n   @media screen and (max-width: 650px) {\n       h1 {\n           font-size: 18px;\n       }\n   }\n"]);return le=function(){return t},t}const ie=u.b.div(le()),ce=u.b.button(oe()),de={placeholder:t=>Object(se.a)(Object(se.a)({},t),{},{color:"#3453b0",fontWeight:"400",fontSize:"15px"}),control:t=>Object(se.a)(Object(se.a)({},t),{},{"&:hover":{borderColor:"#3453b0"},border:"1px solid #3453b0",boxShadow:"none",padding:"0px 5px",borderRadius:"5px",background:"rgb(255,255,255,0.7)"}),indicatorSeparator:t=>Object(se.a)(Object(se.a)({},t),{},{background:"#3453b0","&:hover":{background:"#3453b0"},height:"30px"}),dropdownIndicator:t=>Object(se.a)(Object(se.a)({},t),{},{color:"#3453b0","&:hover":{color:"#3453b0",cursor:"pointer"}}),option:t=>Object(se.a)(Object(se.a)({},t),{},{color:"#3453b0",background:"#ffffff",margin:"0px 0px","&:hover":{background:"#fee8c8"},fontSize:"14px",textAlign:"left"}),singleValue:t=>Object(se.a)(Object(se.a)({},t),{},{color:"#3453b0",fontSize:"15px"}),multiValue:t=>Object(se.a)(Object(se.a)({},t),{},{color:"#3453b0",fontSize:"15px"}),input:t=>Object(se.a)(Object(se.a)({},t),{},{color:"#3453b0"}),clearIndicator:t=>Object(se.a)(Object(se.a)({},t),{},{color:"#3453b0","&:hover":{color:"#3453b0"}}),valueContainer:t=>Object(se.a)(Object(se.a)({},t),{},{minHeight:"10px",height:"40px",paddingTop:"0",paddingBottom:"0",overflow:"auto"})},pe=["Prostate Cancer: AR Signaling=SOX9 RAN TNK2 EP300 PXN NCOA2 AR NRIP1 NCOR1 NCOR2","Prostate Cancer: AR and steroid synthesis enzymes=AKR1C3 AR CYB5A CYP11A1 CYP11B1 CYP11B2 CYP17A1 CYP19A1 CYP21A2 HSD17B1 HSD17B10 HSD17B11 HSD17B12 HSD17B13 HSD17B14 HSD17B2 HSD17B3 HSD17B4 HSD17B6 HSD17B7 HSD17B8 HSD3B1 HSD3B2 HSD3B7 RDH5 SHBG SRD5A1 SRD5A2 SRD5A3 STAR","Prostate Cancer: Steroid inactivating genes=AKR1C1 AKR1C2 AKR1C4 CYP3A4 CYP3A43 CYP3A5 CYP3A7 UGT2B15 UGT2B17 UGT2B7","Prostate Cancer: Down-regulated by androgen=BCHE CDK8 CTBP1 ACKR3 DDC DPH1 FN1 HES6 MMP16 MYC PEG3 PIK3R3 PRKD1 SCNN1A SDC4 SERPINI1 SLC29A1 ST7 TULP4","Glioblastoma: TP53 Pathway=CDKN2A MDM2 MDM4 TP53","Glioblastoma: RTK/Ras/PI3K/AKT Signaling=EGFR ERBB2 PDGFRA MET KRAS NRAS HRAS NF1 SPRY2 FOXO1 FOXO3 AKT1 AKT2 AKT3 PIK3R1 PIK3CA PTEN","Glioblastoma: RB Pathway=CDKN2A CDKN2B CDKN2C CDK4 CDK6 CCND2 RB1","Ovarian Cancer: Oncogenes associated with epithelial ovarian cancer=RAB25 MECOM EIF5A2 PRKCI PIK3CA KIT FGF1 MYC EGFR NOTCH3 KRAS AKT1 ERBB2 PIK3R1 CCNE1 AKT2 AURKA","Ovarian Cancer: Putative tumor-suppressor genes in epithelial ovarian cancer=DIRAS3 RASSF1 DLEC1 SPARC DAB2 PLAGL1 RPS6KA2 PTEN OPCML BRCA2 ARL11 WWOX TP53 DPH1 BRCA1 PEG3","General: Cell Cycle Control=RB1 RBL1 RBL2 CCNA1 CCNB1 CDK1 CCNE1 CDK2 CDC25A CCND1 CDK4 CDK6 CCND2 CDKN2A CDKN2B MYC CDKN1A CDKN1B E2F1 E2F2 E2F3 E2F4 E2F5 E2F6 E2F7 E2F8 SRC JAK1 JAK2 STAT1 STAT2 STAT3 STAT5A STAT5B","General: p53 signaling=TP53 MDM2 MDM4 CDKN2A CDKN2B TP53BP1","General: Notch signaling=ADAM10 ADAM17 APH1A APH1B ARRDC1 CIR1 CTBP1 CTBP2 CUL1 DLL1 DLL3 DLL4 DTX1 DTX2 DTX3 DTX3L DTX4 EP300 FBXW7 HDAC1 HDAC2 HES1 HES5 HEYL ITCH JAG1 JAG2 KDM5A LFNG MAML1 MAML2 MAML3 MFNG NCOR2 NCSTN NOTCH1 NOTCH2 NOTCH3 NOTCH4 NRARP NUMB NUMBL PSEN1 PSEN2 PSENEN RBPJ RBPJL RFNG SNW1 SPEN HES2 HES4 HES7 HEY1 HEY2","General: DNA Damage Response=CHEK1 CHEK2 RAD51 BRCA1 BRCA2 MLH1 MSH2 ATM ATR MDC1 PARP1 FANCF","General: Other growth / proliferation signaling=CSF1 CSF1R IGF1 IGF1R FGF1 FGFR1 AURKA DLEC1 PLAGL1 OPCML DPH1","General: Survival / cell death regulation signaling=NFKB1 NFKB2 CHUK DIRAS3 FAS HLA-G BAD BCL2 BCL2L1 APAF1 CASP9 CASP8 CASP10 CASP3 CASP6 CASP7 GSK3B ARL11 WWOX PEG3 TGFB1 TGFBR1 TGFBR2","General: Telomere maintenance=TERC TERT","General: RTK signaling family=EGFR ERBB2 ERBB3 ERBB4 PDGFA PDGFB PDGFRA PDGFRB KIT FGF1 FGFR1 IGF1 IGF1R VEGFA VEGFB KDR","General: PI3K-AKT-mTOR signaling=PIK3CA PIK3R1 PIK3R2 PTEN PDPK1 AKT1 AKT2 FOXO1 FOXO3 MTOR RICTOR TSC1 TSC2 RHEB AKT1S1 RPTOR MLST8","General: Ras-Raf-MEK-Erk/JNK signaling=KRAS HRAS BRAF RAF1 MAP3K1 MAP3K2 MAP3K3 MAP3K4 MAP3K5 MAP2K1 MAP2K2 MAP2K3 MAP2K4 MAP2K5 MAPK1 MAPK3 MAPK4 MAPK6 MAPK7 MAPK8 MAPK9 MAPK12 MAPK14 DAB2 RASSF1 RAB25","General: Regulation of ribosomal protein synthesis and cell growth=RPS6KA1 RPS6KA2 RPS6KB1 RPS6KB2 EIF5A2 EIF4E EIF4EBP1 RPS6 HIF1A","General: Angiogenesis=VEGFA VEGFB KDR CXCL8 CXCR1 CXCR2","General: Folate transport=SLC19A1 FOLR1 FOLR2 FOLR3 IZUMO1R","General: Invasion and metastasis=MMP1 MMP2 MMP3 MMP7 MMP9 MMP10 MMP11 MMP12 MMP13 MMP14 MMP15 MMP16 MMP17 MMP19 MMP21 MMP23B MMP24 MMP25 MMP26 MMP27 MMP28 ITGB3 ITGAV PTK2 CDH1 SPARC WFDC2"];class he extends r.a.Component{static parseDataset(t){return"SU2C UHN (Breast Cancer)"===t?"UHN (Breast Cancer)":"SU2C McGill (Breast Cancer)"===t?"McGill (Breast Cancer)":t}constructor(t){super(t),this.state={drugs:[],datasets:[],genes:[],selectedGeneSearch:["Enter Gene Symbol(s)"],selectedDrugs:[],selectedDataset:"",genomicsValue:["All","Mutation","CNV","Gene Expression"],selectedGenomics:[],allDrugs:[],threshold:2,toggleRNA:!1,genomics:[],drugValue:[],axiosConfig:{}},this.handleDrugChange=this.handleDrugChange.bind(this),this.handleDatasetChange=this.handleDatasetChange.bind(this),this.handleGeneListChange=this.handleGeneListChange.bind(this),this.handleGeneSearchChange=this.handleGeneSearchChange.bind(this),this.handleExpressionChange=this.handleExpressionChange.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.redirectUser=this.redirectUser.bind(this),this.handleThreshold=this.handleThreshold.bind(this),this.checkInput=this.checkInput.bind(this),this.clearText=this.clearText.bind(this)}componentWillMount(){const t=this.state.genomicsValue,e=pe.map(t=>({value:t.split("=")[1].replace(/\s/g,","),label:"".concat(t.split("=")[0]," (").concat(t.split("=")[1].split(" ").length,")")}));this.setState({genes:[{value:"user defined list",label:"User-Defined List"},...e]});const a=t.map((t,e)=>({label:t,value:e}));this.setState({genomicsValue:[...a],axiosConfig:{headers:{"Content-Type":"application/json;charset=UTF-8",Accept:"application/json"}}})}componentDidMount(){m.a.get("/api/v1/datasets",{headers:{Authorization:localStorage.getItem("user")}}).then(t=>{const e=t.data.data.map(t=>({value:t.dataset_id,label:he.parseDataset(t.dataset_name)}));this.setState({datasets:[...e]})})}handleDrugChange(t){if(null!==t&&t.length>0){const e=this.state,a=e.drugs,n=e.allDrugs,r=t.map(t=>t.label.replace(/\s/g,"").replace("+","_"));if((t=>{let e=!1;const a=RegExp("All");return t.map(t=>{a.test(t)&&(e=!0)}),e})(r)){const t=a.filter((t,e)=>{if(0!==e)return{value:e,label:t.drug}});this.setState({selectedDrugs:n,drugValue:t})}else this.setState({selectedDrugs:r,drugValue:t})}else null!==t&&0!==t.length||this.setState({drugValue:[]})}handleDatasetChange(t){const e=this.state.axiosConfig;this.setState({selectedDataset:t.value});const a=t.value;let n=1;m.a.post("/api/v1/drugpatient/dataset",{label:a},{headers:{Authorization:localStorage.getItem("user")}},e.headers).then(t=>{const e=t.data.data[0].map(t=>({value:n++,label:t.drug}));this.setState({drugs:[{value:"all",label:"All (".concat(e.length,")")},...e]});const a=t.data.data[0].map(t=>t.drug.replace(/\s/g,"").replace("+","_"));this.setState({allDrugs:[...a]})})}handleGeneListChange(t){"user defined list"===t.value?this.setState({selectedGeneSearch:""}):this.setState({selectedGeneSearch:t.value})}handleGeneSearchChange(t){this.setState({selectedGeneSearch:t.target.value})}handleExpressionChange(t){const e=this.state.genomicsValue;if(null!==t&&t.length>0){const a=t.map(t=>t.label);if(a.includes("All")){const t=e.filter((t,e)=>{if(0!==e)return{label:t,value:e}});this.setState({genomics:t,selectedGenomics:["Mutation","CNV","RNASeq"]})}else this.setState({genomics:t,selectedGenomics:a});a.includes("Gene Expression")||a.includes("All")?this.setState({toggleRNA:!0}):this.setState({toggleRNA:!1})}else null!==t&&0!==t.length||this.setState({toggleRNA:!1,genomics:[]})}handleThreshold(t){this.setState({threshold:t.target.value})}handleKeyPress(t){"Enter"===t.key&&this.redirectUser()}redirectUser(){const t=this.state,e=t.selectedDataset,a=t.selectedDrugs,n=t.selectedGeneSearch,r=t.selectedGenomics,s=t.threshold,o=t.genomics,l=n.replace(/\s/g,"");if(""!==e&&a.length>0&&"Enter Gene Symbol(s)"!==n[0]&&""!==n&&o.length>0){this.props.history.push("/search/?drug=".concat(a,"&dataset=").concat(e,"&genes=").concat(l,"&genomics=").concat(r,"&threshold=").concat(s))}}checkInput(){const t=this.state,e=t.selectedDataset,a=t.selectedDrugs,n=t.selectedGeneSearch,r=t.genomics;return""!==e&&a.length>0&&"Enter Gene Symbol(s)"!==n[0]&&""!==n&&r.length>0}clearText(){"Enter Gene Symbol(s)"===this.state.selectedGeneSearch[0]&&this.setState({selectedGeneSearch:""})}render(){const t=this.state,e=t.datasets,a=t.drugs,n=t.drugValue,s=t.genomicsValue,o=t.genomics,l=t.threshold,i=t.toggleRNA,c=t.genes,d=t.selectedGeneSearch;return r.a.createElement(ie,{className:"wrapper"},r.a.createElement("div",{className:"search-container"},r.a.createElement("div",{className:"select-component",onKeyPress:this.handleKeyPress},r.a.createElement("h1",null," ",r.a.createElement("span",{style:{color:"#cd5686"}},"XevaDB:")," ","A Database For PDX Pharmacogenomic Data"," "),r.a.createElement("div",{className:"two-col"},r.a.createElement("div",{className:"div-dataset"},r.a.createElement(ne.a,{options:e,styles:de,placeholder:"Select the Dataset",onChange:this.handleDatasetChange})),r.a.createElement("div",{className:"div-drug"},r.a.createElement(ne.a,{options:a,styles:de,placeholder:"Search for the Drug (eg. CLR457)",onChange:this.handleDrugChange,isMulti:!0,isSearchable:!0,isClearable:!0,value:n}))),r.a.createElement("div",{className:"div-genomics"},r.a.createElement(ne.a,{options:s,styles:de,placeholder:"Genomics",onChange:this.handleExpressionChange,isMulti:!0,isClearable:!0,value:o})),r.a.createElement("div",{className:"div-rnaseq"},i?r.a.createElement("div",null,"Enter a z-score threshold \xb1",r.a.createElement("input",{type:"text",name:"title",value:l,onChange:this.handleThreshold})):null),r.a.createElement("div",{className:"div-gene"},r.a.createElement(ne.a,{options:c,styles:de,placeholder:"User Defined or Pre-Defined Gene List",onChange:this.handleGeneListChange})),r.a.createElement("div",{className:"div-gene-enter"},r.a.createElement("form",null,r.a.createElement("textarea",{type:"text",value:d,onChange:this.handleGeneSearchChange,onClick:this.clearText}))),r.a.createElement("div",{className:"sample"},r.a.createElement("a",{href:"/search/?drug=BGJ398,binimetinib,BKM120,BYL719&dataset=1&genes=SOX9,RAN,TNK2,EP300,PXN,NCOA2,AR,NRIP1,NCOR1,NCOR2&genomics=Mutation,CNV,RNASeq&threshold=2"}," Feeling Lucky? ")),r.a.createElement("div",null,this.checkInput()?r.a.createElement(ce,{onClick:this.redirectUser,type:"button",className:"stylebutton"},r.a.createElement("span",null,"Search")):r.a.createElement(re.a,{trigger:r.a.createElement(ce,{onClick:this.redirectUser,type:"button",className:"stylebutton"},r.a.createElement("span",null,"Search")),position:"right center"},r.a.createElement("div",{style:{color:"#3453b0",fontFamily:"Raleway",fontSize:"17px",fontWeight:"500"}},"Complete all the fields!!"))))))}}var me=Object(c.g)(he);function ge(){const t=Object(g.a)(["\n  display: flex;\n  min-height: 100vh;\n  flex-direction: column;\n"]);return ge=function(){return t},t}var ue=u.b.div(ge());var fe=()=>r.a.createElement(ue,null,r.a.createElement(me,null),r.a.createElement(F,null)),xe=a(252),be=a(251),Ae=a(250);function ye(){const t=Object(g.a)(["\n    background-image: linear-gradient(\n        to right,\n        #CBC5EA,\n        #EAEAEA\n    );\n"]);return ye=function(){return t},t}function ve(){const t=Object(g.a)(["\n    width:calc(5em + 2vw);\n    margin-top:2px;\n    z-index:999;\n    position: relative;\n    margin-left: calc(100vw - (3vw + 5em))\n"]);return ve=function(){return t},t}function Ee(){const t=Object(g.a)(["\n    margin-top: 2vh;\n"]);return Ee=function(){return t},t}function Ce(){const t=Object(g.a)(["\n    background-image: linear-gradient(\n        to right,\n        #CBC5EA,\n        #EAEAEA\n    );\n    height: 400px;\n    width: 530px;\n    border-radius: 5px;\n    margin:auto;\n"]);return Ce=function(){return t},t}function we(){const t=Object(g.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 300px;\n    width: 400px;\n    margin: auto;\n    margin-top: 20vh;\n"]);return we=function(){return t},t}const ke=u.b.div(we()),De=u.b.div(Ce()),Se=u.b.div(Ee()),Re=u.b.img(ve()),_e=u.b.div(ye());class Pe extends r.a.Component{constructor(t){super(t),this.state={username:"",password:"",isAuthenticated:!1,axiosConfig:{headers:{"Content-Type":"application/json;charset=UTF-8",Accept:"application/json"}}},this.handleSubmit=this.handleSubmit.bind(this),this.handleUserChange=this.handleUserChange.bind(this),this.handlePasswordChange=this.handlePasswordChange.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this)}handleUserChange(t){this.setState({username:t.target.value})}handlePasswordChange(t){this.setState({password:t.target.value})}handleSubmit(t){t.preventDefault();const e=this.state,a=e.username,n=e.password,r=e.axiosConfig;m.a.post("/api/v1/login",{username:a,password:n},r.headers).then(t=>{localStorage.setItem("user",t.headers["auth-token"]),this.setState({isAuthenticated:this.isAuthenticated()})}).catch(t=>{alert("Authentication Failed, Please Enter a valid Password and Username")})}isAuthenticated(){const t=localStorage.getItem("user");return t&&t.length>10}render(){const t=this.state.isAuthenticated;return r.a.createElement("div",null,t?r.a.createElement(c.a,{to:{pathname:"/"}}):r.a.createElement("div",null,r.a.createElement(i.b,{to:"/"},r.a.createElement(_e,null,r.a.createElement(Re,{src:P.a,alt:"logo"}))),r.a.createElement(De,null,r.a.createElement(ke,null,r.a.createElement(Ae.a,{component:"h1",variant:"h5",style:{color:"#3f51b5",marginTop:"4.5vh",fontWeight:"700",fontSize:"30px"}},"Sign in"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(xe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Username",name:"username",onChange:this.handleUserChange}),r.a.createElement(xe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.handlePasswordChange}),r.a.createElement(Se,null,r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign In")),r.a.createElement(be.a,{container:!0,style:{marginTop:"15px"}},r.a.createElement(be.a,{item:!0,xs:!0},r.a.createElement(i.b,{href:"#",variant:"body2"},"Forgot password?"))))))))}}var Be=Pe;class Ne extends r.a.Component{constructor(t){super(t),this.state={drugData:[],patientIdDrug:[],drugId:[],dimensions:{},margin:{}},this.parseData=this.parseData.bind(this)}componentDidMount(){const t=this.props.drugParam,e=this.props.datasetParam;m.a.get("/api/v1/response?drug=".concat(t,"&dataset=").concat(e),{headers:{Authorization:localStorage.getItem("user")}}).then(t=>{this.parseData(t.data)})}parseData(t){const e=[];let a=[];const n=[];a=t.pop(),t.forEach(t=>{const r={};n.push(t.Drug),a.forEach(e=>{t[e]?r[e]=t[e]:r[e]=""}),e.push(r)}),a=Object.keys(e[0]),this.setState({drugId:n,patientIdDrug:a,drugData:e,dimensions:{height:35,width:20},margin:{top:300,right:200,bottom:0,left:250}})}render(){const t=this.state,e=t.drugData,a=t.drugId,n=t.patientIdDrug,s=t.dimensions,o=t.margin,l=this.props.datasetParam;return e.length>0?r.a.createElement(V,{data:e,drugId:a,patientId:n,dimensions:s,margin:o,className:"searchedheatmap",dataset:l}):""}}var Me=Ne;class Fe extends r.a.Component{constructor(t){super(t),this.state={threshold:0,hmapPatients:[],genesMut:[],genesRna:[],genesCnv:[],patientMut:[],patientRna:[],patientCnv:[],dataMut:[],dataRna:[],dataCnv:[],dimensions:{},margin:{},loading:!0,error:!1},this.updateResults=this.updateResults.bind(this)}componentDidMount(){const t=this.props.datasetParam,e=this.props.geneParam,a=this.props.genomicsParam,n=[],r=[];a.includes("Mutation")&&(n.push(m.a.get("/api/v1/mutation?genes=".concat(e,"&dataset=").concat(t),{headers:{Authorization:localStorage.getItem("user")}})),r.push("Mutation")),(a.includes("RNASeq")||a.includes("Expression"))&&(n.push(m.a.get("/api/v1/rnaseq?genes=".concat(e,"&dataset=").concat(t),{headers:{Authorization:localStorage.getItem("user")}})),r.push("RNASeq")),a.includes("CNV")&&(n.push(m.a.get("/api/v1/cnv?genes=".concat(e,"&dataset=").concat(t),{headers:{Authorization:localStorage.getItem("user")}})),r.push("CNV")),Promise.all([...n]).then(t=>{this.updateResults(t,r)}).catch(t=>{t&&this.setState({error:!0})})}updateResults(t,e){let a=t[0].data.pop();t.length>1&&t.forEach((t,e)=>{0!==e&&t.data.pop()}),t.forEach((e,n)=>{const r={};e.data.length>0&&a.forEach(e=>{t[n].data[0][e]?r[e]=t[n].data[0][e]:r[e]=""}),a=Object.keys(r)});const n={},r={},s={};e.forEach((e,a)=>{const o=e.substring(0,3).toLowerCase(),l=Object.keys(t[a].data[0]).filter(t=>{let e="";return"gene_id"!==t&&(e=t),e});n["patient_".concat(o)]=l;const i=t[a].data.map(t=>t.gene_id);r["genes_".concat(o)]=i,s["data_".concat(o)]=t[a].data});const o=this.state,l=o.dataMut,i=o.dataRna,c=o.dataCnv,d=o.genesMut,p=o.genesRna,h=o.genesCnv,m=o.patientMut,g=o.patientRna,u=o.patientCnv,f=this.props.threshold;this.setState({threshold:f,hmapPatients:a,patientMut:n.patient_mut?n.patient_mut:m,patientRna:n.patient_rna?n.patient_rna:g,patientCnv:n.patient_cnv?n.patient_cnv:u,genesMut:r.genes_mut?r.genes_mut:d,genesRna:r.genes_rna?r.genes_rna:p,genesCnv:r.genes_cnv?r.genes_cnv:h,dataMut:s.data_mut?s.data_mut:l,dataRna:s.data_rna?s.data_rna:i,dataCnv:s.data_cnv?s.data_cnv:c,dimensions:{height:35,width:20},margin:{top:75,right:200,bottom:100,left:250},loading:!0})}render(){const t=this.state,e=t.dimensions,a=t.margin,n=t.threshold,s=t.dataMut,o=t.dataRna,l=t.dataCnv,i=t.hmapPatients,c=t.error,d=t.genesMut,p=t.genesRna,h=t.genesCnv,m=t.patientMut,g=t.patientRna,u=t.patientCnv,f=t.loading;return function(){let t="";if(s.length||l.length||o.length)t=r.a.createElement(tt,{className:"oprint_result",dimensions:e,margin:a,threshold:Number(n),hmap_patients:i,genes_mut:d,genes_rna:p,genes_cnv:h,patient_mut:m,patient_rna:g,patient_cnv:u,data_mut:s,data_rna:o,data_cnv:l});else{if(c)return r.a.createElement(it,null);t=r.a.createElement("div",{className:"oprint-wrapper"},r.a.createElement(st,{loading:f}))}return t}()}}var Te=Fe;class Ie extends r.a.Component{constructor(t){super(t),this.setPatients=t=>{this.setState({globalPatients:t})},this.state={drugParam:"",datasetParam:"",geneParam:"",genomicsParam:"",threshold:0,globalPatients:[],setPatients:this.setPatients}}static getDerivedStateFromProps(t){const e=t.location,a=new URLSearchParams(e.search),n=a.get("genomics");return{drugParam:a.get("drug"),datasetParam:a.get("dataset"),geneParam:a.get("genes"),genomicsParam:n,threshold:a.get("threshold")}}render(){const t=this.state,e=t.drugParam,a=t.datasetParam,n=t.geneParam,s=t.genomicsParam,o=t.threshold,l={globalPatients:t.globalPatients,setPatients:t.setPatients};return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(v,null),r.a.createElement("div",{className:"wrapper",style:{margin:"auto"}},r.a.createElement(H,{value:l},r.a.createElement(Me,{drugParam:e,datasetParam:a}),r.a.createElement(Te,{geneParam:n,datasetParam:a,genomicsParam:s,threshold:o}))))}}var Oe=Ie;const He=()=>r.a.createElement("div",null,r.a.createElement(Y,null),r.a.createElement(dt,null),r.a.createElement(ht,null));var Ge=()=>(Object(n.useEffect)(()=>{l.a.initialize("UA-102362625-5"),l.a.pageview(window.location.pathname+window.location.search)},[]),Object(n.useEffect)(()=>{console.log(window.location.pathname)}),r.a.createElement("div",null,r.a.createElement(i.a,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/",exact:!0,component:fe}),r.a.createElement(c.b,{path:"/curve",exact:!0,component:ae}),r.a.createElement(c.b,{path:"/datasets",exact:!0,component:kt}),r.a.createElement(c.b,{path:"/dataset/:id",exact:!0,component:gt}),r.a.createElement(c.b,{path:"/doc",exact:!0,component:Dt}),r.a.createElement(c.b,{path:"/drugs",exact:!0,component:It}),r.a.createElement(c.b,{path:"/drug/:id",exact:!0,component:Bt}),r.a.createElement(c.b,{path:"/home",exact:!0,component:F}),r.a.createElement(c.b,{path:"/login",exact:!0,component:Be}),r.a.createElement(c.b,{path:"/maps",exact:!0,component:He}),r.a.createElement(c.b,{path:"/search",exact:!0,component:Oe}),r.a.createElement(c.b,{path:"/tissues",exact:!0,component:Kt}),r.a.createElement(c.b,{path:"/stat",exact:!0,component:qt}),r.a.createElement(c.b,{render:()=>r.a.createElement("h1",null," 404 Error ")})))));o.a.render(r.a.createElement(Ge,null),document.getElementById("root"))},59:function(t,e,a){t.exports=a.p+"static/media/logo.1de5f71c.png"}},[[163,1,2]]]);
//# sourceMappingURL=main.5d02c2db.chunk.js.map